#!/usr/bin/env jojo

(run

  (import socket/0.0.1)

  (+jojo run-server
    "12345" 256 tcp-socket-listen
    run-server/loop)

  (+jojo run-server/loop (-> :socket --)
    :socket socket-accept (-> :client :addr)

    "got a connection from " string-write
    :addr string-write
    newline

    :client "thank you for connecting" socket-send
    :client socket-close

    :socket recur)

  run-server)
