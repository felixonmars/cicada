#+title: socket

* server

  #+begin_src jojo
  (+jojo run-server
    "12345" 256 tcp-socket-listen
    run-server/loop)

  (+jojo run-server/loop (-> :socket --)
    :socket socket-accept (-> :client :addr)

    "got a connection from " string-write
    :addr string-write
    newline

    :client "thank you for connecting" socket-send
    :client socket-close

    :socket recur)

  run-server
  #+end_src

* client

  #+begin_src jojo
  (+jojo run-clinet
    "cicada" "12345"
    tcp-socket-connect
    socket-recv
    string-write
    newline)

  {run-clinet} 10000 times
  #+end_src
