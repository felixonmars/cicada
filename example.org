#+HTML_HEAD: <link rel="stylesheet" href="http://xieyuheng.github.io/asset/css/page.css" type="text/css" media="screen" />
#+PROPERTY: tangle example.jo
#+title: example code of jojo

---------

- simple example code ([[https://github.com/xieyuheng/jojo][source]])

---------

* define function

  #+begin_src scheme
  (~ square (: int int -> int)
     dup mul end)

  (~ t (: ->)
     (# 11) square .
     end)
  t
  #+end_src

* loop by explicit tail-call

  #+begin_src scheme
  (~ stack-repl (: [io] -> *)
     read-symbol apply
     print-stack
     (tail-call stack-repl))

  stack-repl
  #+end_src

* branching by if

  #+begin_src scheme
  (~ t (: ->)
     (if true -> true . end)
     (if false -> false . end))
  t
  #+end_src

* receive function

  #+begin_src scheme
  (~ factorial (: int -> int)
     (if dup (# 1) lteq? -> drop (# 1) end)
     dup (# 1) sub factorial mul end)

  (~ t (: ->)
     (# 0) factorial .
     (# 1) factorial .
     (# 2) factorial .
     (# 3) factorial .
     (# 4) factorial .
     end)
  t
  #+end_src

* string

  #+begin_src scheme
  (~ t (: ->)
    (' asd ad) print-string)
  t
  #+end_src

* file

  #+begin_src scheme :tangle no
  (~ t (: -> addr)
    (' README) (# 1024) allocate tuck (# 1024) read-file
    . print-string)
  t
  #+end_src
