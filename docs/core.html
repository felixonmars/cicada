<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-09-10 Sun 21:04 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>core</title>
<meta name="generator" content="Org-mode" />
<meta name="author" content="XIE Yuheng" />
<link rel="stylesheet" href="https://xieyuheng.github.io/asset/css/page.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
.
</div>
<div id="content">
<h1 class="title">core</h1>
<div id="table-of-contents">
<h2>overview</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9888c5a"><span class="done _todo_stack_">[todo-stack]</span> </a>
<ul>
<li><a href="#orgb09c90b">move tests out of core</a></li>
<li><a href="#orgea192c4">something like 'with-output-to-string' &amp; 'with-output-to-file'</a></li>
<li><a href="#org688be40">module</a>
<ul>
<li><a href="#org72cc2bc">move socket to module</a></li>
<li><a href="#orga5751fd">bind nanomsg</a></li>
<li><a href="#org35d23e8">check jo-bound? for module</a></li>
</ul>
</li>
<li><a href="#orgafc76f6">plan</a>
<ul>
<li><a href="#org9a9788">minikanren</a></li>
<li><a href="#org7cf41f0">use jojo to write tangle</a></li>
<li><a href="#orgedbd99b">publish sexp as html to file</a></li>
<li><a href="#org378b6f5">compile sexp to c</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org12425ba">flag</a></li>
<li><a href="#orgfdf3d12">&lt;int&gt;</a>
<ul>
<li><a href="#orgafd6714">even &amp; odd</a></li>
</ul>
</li>
<li><a href="#org731bbe1">&lt;jo&gt;</a>
<ul>
<li><a href="#orgd67393e">jo-append</a></li>
</ul>
</li>
<li><a href="#org201eb29">array</a>
<ul>
<li><a href="#org364e00d">array-eqv?</a></li>
</ul>
</li>
<li><a href="#orgfc9fccb">list</a>
<ul>
<li><a href="#org4df55ec">&lt;null&gt; &amp; &lt;cons&gt;</a></li>
<li><a href="#org25ce5cc">list?</a></li>
<li><a href="#org84363eb">array-&gt;list</a></li>
<li><a href="#orgd374a2e">list-spread</a></li>
<li><a href="#org6f48ea8">list-length</a></li>
<li><a href="#org251ae65">list-any?</a></li>
<li><a href="#orgb570139">list-every?</a></li>
<li><a href="#org87f60f7">list-append</a></li>
<li><a href="#orgdfd05a2">tail-cons</a></li>
<li><a href="#orga256770">list-left</a></li>
<li><a href="#org80bac18">list-right</a></li>
<li><a href="#orgfdff38c">list-split</a></li>
<li><a href="#org690c815">list-map</a></li>
<li><a href="#org5d15b89">list-for-each</a></li>
<li><a href="#org7726646">list-filter</a></li>
<li><a href="#org601b886">list-reverse</a></li>
<li><a href="#orgf8aa132">list-eqv?</a></li>
</ul>
</li>
<li><a href="#org8813254">sexp</a>
<ul>
<li><a href="#orgb4187fa"><span class="todo _note_">[note]</span> sexp</a></li>
<li><a href="#orgc443c69">read-sexp</a></li>
<li><a href="#org44b7af7">sexp-write</a></li>
</ul>
</li>
<li><a href="#org3a5fd9c">repl</a>
<ul>
<li><a href="#org343d655">repl</a></li>
<li><a href="#org5edbc11">sexp-eval</a></li>
<li><a href="#orga509781">jo-eval</a></li>
</ul>
</li>
<li><a href="#orgf95e6c9">compiler</a>
<ul>
<li><a href="#orgbdca701">sexp-list-compile-jojo</a></li>
<li><a href="#orgd206643">sexp-compile-jojo</a></li>
<li><a href="#org33f3d51">sexp-list-compile</a></li>
<li><a href="#org587bb23">sexp-compile</a></li>
<li><a href="#orgdc3ca59">jo-compile</a></li>
<li><a href="#org3db3fb1">sexp-list-run</a></li>
<li><a href="#org26d2e48">sexp-run</a></li>
</ul>
</li>
<li><a href="#orgfc5fd22">basic syntax</a>
<ul>
<li><a href="#org17e6309">(quote)</a></li>
<li><a href="#orgd01af03">(partquote)</a></li>
<li><a href="#org14b8c7e">(if)</a></li>
<li><a href="#org7bed707">(clo)</a></li>
<li><a href="#orgc7ca753">(cond)</a></li>
<li><a href="#org9fd277a">(-&gt;)</a></li>
<li><a href="#orgf46163a">jo-list-compile-cells</a></li>
<li><a href="#org1cd2874">(+data)</a></li>
<li><a href="#org595d49d">(+gene)</a></li>
<li><a href="#org1e13c7b">(+disp)</a></li>
</ul>
</li>
<li><a href="#orgebe41be">reboot basic syntax &#x2013; the order matters</a>
<ul>
<li><a href="#org16be717">re-define (+jojo)</a></li>
<li><a href="#orgc238b51">run repl-over-the-repl-in-c</a></li>
<li><a href="#orgbc8d3c4">re-define new keywords</a></li>
</ul>
</li>
<li><a href="#orgaf2f794">more syntax</a>
<ul>
<li><a href="#orga39ebc8">(array)</a></li>
<li><a href="#org8641159">(list)</a></li>
<li><a href="#org89f808">(assert) &amp; (assert!)</a></li>
<li><a href="#orgdbd39a8">(test)</a></li>
<li><a href="#orgd11f9ed">(let-bind) &#x2013; moand interface</a></li>
<li><a href="#orgdc56a02">(case)</a></li>
</ul>
</li>
<li><a href="#org8de9f07"><span class="done _test_">[test]</span> syntax</a>
<ul>
<li><a href="#orgd2ba725">(list)</a></li>
<li><a href="#org895e512">(+jojo)</a></li>
<li><a href="#orgd2de96f">(cond)</a></li>
<li><a href="#org1171b3a">(clo)</a></li>
<li><a href="#org95580a7">(+gene) &amp; (+disp)</a></li>
<li><a href="#org4e1af71">(partquote)</a></li>
<li><a href="#org798b3b1">(case)</a></li>
<li><a href="#org2488844">dynamic-local</a></li>
</ul>
</li>
<li><a href="#org9f3976a">monad</a>
<ul>
<li><a href="#org8df13f3"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</a></li>
<li><a href="#org7e6b6b6">maybe monad</a></li>
<li><a href="#orgad84d9d"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</a></li>
</ul>
</li>
<li><a href="#org9b3b539">pair</a>
<ul>
<li><a href="#orge14697d">&lt;pair&gt;</a></li>
</ul>
</li>
<li><a href="#orgc4d1c4a"><span class="done _test_">[test]</span> monad</a>
<ul>
<li><a href="#org11118e3">tree</a></li>
<li><a href="#org12773d1">tree-map</a></li>
<li><a href="#orgeed520f">tree-zip &#x2013; maybe monad</a></li>
<li><a href="#org340f258">number-tree &#x2013; intrinsic state monad</a></li>
</ul>
</li>
<li><a href="#org2a0f727">combinator</a>
<ul>
<li><a href="#org4c67128">times</a></li>
</ul>
</li>
<li><a href="#org8f33667">w &#x2013; write &#x2013; gene</a>
<ul>
<li><a href="#org1f3905a">w</a></li>
<li><a href="#orgc115449">list-write</a></li>
<li><a href="#orgc0ac377">array-write</a></li>
<li><a href="#org235f43b">pair-write</a></li>
<li><a href="#orgbaecb9a">nl</a></li>
</ul>
</li>
<li><a href="#org37e3cc5">equal? &#x2013; gene</a>
<ul>
<li><a href="#org348f2dd">equal?</a></li>
</ul>
</li>
<li><a href="#org5cf0a56">more list</a>
<ul>
<li><a href="#org66eb002">list-foldr</a></li>
<li><a href="#org69cbdd5">list-foldl</a></li>
<li><a href="#org4df696f">list-member?</a></li>
<li><a href="#orgabd7858"><span class="done _test_">[test]</span> </a></li>
</ul>
</li>
<li><a href="#orgfcc1855">table</a>
<ul>
<li><a href="#org4a13537">&lt;null-table&gt; &amp; &lt;cons-table&gt;</a></li>
<li><a href="#orga30d2ca">table?</a></li>
<li><a href="#org8a9083b">list-&gt;table</a></li>
<li><a href="#orgc797d3">table</a></li>
<li><a href="#org50164f8">table-write</a></li>
<li><a href="#org920fb6a">table-find</a></li>
<li><a href="#orgf0d114e">table-contain?</a></li>
<li><a href="#org77c4069">table-merge</a></li>
<li><a href="#org4cf3a5">table-equal?</a></li>
<li><a href="#org1cd1bf9">table-key-filter</a></li>
<li><a href="#org33078a3">table-key-map</a></li>
<li><a href="#org831907d"><span class="done _test_">[test]</span> </a></li>
</ul>
</li>
<li><a href="#org3a7dcc8">byte</a>
<ul>
<li><a href="#orga4ea10f">(byte)</a></li>
</ul>
</li>
<li><a href="#org16d20a9">system</a>
<ul>
<li><a href="#org4208c06">cmd-list</a></li>
<li><a href="#orgc060d80">dash-prefixed-string?</a></li>
<li><a href="#orgac07d41">usr-jojo-dir</a></li>
<li><a href="#org52d85c">sys-jojo-dir</a></li>
</ul>
</li>
<li><a href="#org52bedf8">&lt;file&gt;</a>
<ul>
<li><a href="#orgaccc20d">maybe-drop-shabang</a></li>
<li><a href="#org81c0519">input-stack-read-sexp-list</a></li>
<li><a href="#org87805d0">read-sexp-list-to-the-end</a></li>
<li><a href="#org8a57b77">absolute-path?</a></li>
<li><a href="#org495ccca">path-&gt;reading-path</a></li>
<li><a href="#org8d6ae58">path-readable?</a></li>
<li><a href="#org26f7b7d">path-load</a></li>
</ul>
</li>
<li><a href="#orgbe1addc">module</a>
<ul>
<li><a href="#org46520fa"><span class="todo _note_">[note]</span> module system</a></li>
<li><a href="#org110b77a">(+module)</a></li>
<li><a href="#org4d97901">expend-include</a></li>
<li><a href="#org9476a29">path-list-read-sexp-list</a></li>
<li><a href="#org3c3e980">path-read-sexp-list</a></li>
<li><a href="#org44a18eb">list-car-filter</a></li>
<li><a href="#org70431d9">module/generate-define-table</a></li>
<li><a href="#orgc233da0">module/generate-export-table</a></li>
<li><a href="#orgf903601">module/export-check</a></li>
<li><a href="#org4d83273">module/collect-import-table-list</a></li>
<li><a href="#org53507c1">module/import-one</a></li>
<li><a href="#org5798ab1">sexp-for-module?</a></li>
<li><a href="#orgc1f6779">sexp-table-substitute</a></li>
<li><a href="#org91650c1">module-loaded?</a></li>
<li><a href="#orgc01d2b3">module-find-path</a></li>
<li><a href="#org824815e">module-load</a></li>
<li><a href="#orgc84ee69">(run)</a></li>
<li><a href="#orga3441e0"><span class="todo _note_">[note]</span> table processing in module system</a></li>
<li><a href="#orgbb5fe23">import-only</a></li>
<li><a href="#org95e8960">import-except</a></li>
<li><a href="#orgf5ced9d">import-prefix</a></li>
<li><a href="#org98fc7c4">import-rename</a></li>
<li><a href="#org4441e44"><span class="done _test_">[test]</span> </a></li>
</ul>
</li>
<li><a href="#orgead2737">the-story-begin</a>
<ul>
<li><a href="#org4522278">welcome-to-jojo</a></li>
<li><a href="#org2623eae">the-story-begin</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org9888c5a" class="outline-2">
<h2 id="org9888c5a"><span class="done _todo_stack_">[todo-stack]</span> </h2>
<div class="outline-text-2" id="text-org9888c5a">
</div><div id="outline-container-orgb09c90b" class="outline-3">
<h3 id="orgb09c90b">move tests out of core</h3>
</div>

<div id="outline-container-orgea192c4" class="outline-3">
<h3 id="orgea192c4">something like 'with-output-to-string' &amp; 'with-output-to-file'</h3>
</div>

<div id="outline-container-org688be40" class="outline-3">
<h3 id="org688be40">module</h3>
<div class="outline-text-3" id="text-org688be40">
</div><div id="outline-container-org72cc2bc" class="outline-4">
<h4 id="org72cc2bc">move socket to module</h4>
</div>

<div id="outline-container-orga5751fd" class="outline-4">
<h4 id="orga5751fd">bind nanomsg</h4>
</div>

<div id="outline-container-org35d23e8" class="outline-4">
<h4 id="org35d23e8">check jo-bound? for module</h4>
</div>
</div>

<div id="outline-container-orgafc76f6" class="outline-3">
<h3 id="orgafc76f6">plan</h3>
<div class="outline-text-3" id="text-orgafc76f6">
</div><div id="outline-container-org9a9788" class="outline-4">
<h4 id="org9a9788">minikanren</h4>
</div>

<div id="outline-container-org7cf41f0" class="outline-4">
<h4 id="org7cf41f0">use jojo to write tangle</h4>
</div>

<div id="outline-container-orgedbd99b" class="outline-4">
<h4 id="orgedbd99b">publish sexp as html to file</h4>
</div>

<div id="outline-container-org378b6f5" class="outline-4">
<h4 id="org378b6f5">compile sexp to c</h4>
</div>
</div>
</div>

<div id="outline-container-org12425ba" class="outline-2">
<h2 id="org12425ba">flag</h2>
<div class="outline-text-2" id="text-org12425ba">
<div class="org-src-container">

<pre class="src src-jojo">core-flag-on
test-flag-on
repl-flag-off
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfdf3d12" class="outline-2">
<h2 id="orgfdf3d12">&lt;int&gt;</h2>
<div class="outline-text-2" id="text-orgfdf3d12">
</div><div id="outline-container-orgafd6714" class="outline-3">
<h3 id="orgafd6714">even &amp; odd</h3>
<div class="outline-text-3" id="text-orgafd6714">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> even? <span style="color: #ae81ff;">2</span> mod <span style="color: #ae81ff;">0</span> eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> odd? even? not<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org731bbe1" class="outline-2">
<h2 id="org731bbe1">&lt;jo&gt;</h2>
<div class="outline-text-2" id="text-org731bbe1">
</div><div id="outline-container-orgd67393e" class="outline-3">
<h3 id="orgd67393e">jo-append</h3>
<div class="outline-text-3" id="text-orgd67393e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo1</span> <span style="color: #a6e22e;">:jo2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:jo1</span> jo-&gt;string
  <span style="color: #a6e22e;">:jo2</span> jo-&gt;string
  string-append
  string-&gt;jo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org201eb29" class="outline-2">
<h2 id="org201eb29">array</h2>
<div class="outline-text-2" id="text-org201eb29">
</div><div id="outline-container-org364e00d" class="outline-3">
<h3 id="org364e00d">array-eqv?</h3>
<div class="outline-text-3" id="text-org364e00d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> array-length
      <span style="color: #a6e22e;">:y</span> array-length
      eq? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #ae81ff;">0</span> array-eqv?/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv?/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:x</span> array-length gteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">true</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:pred</span> apply not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfc9fccb" class="outline-2">
<h2 id="orgfc9fccb">list</h2>
<div class="outline-text-2" id="text-orgfc9fccb">
</div><div id="outline-container-org4df55ec" class="outline-3">
<h3 id="org4df55ec">&lt;null&gt; &amp; &lt;cons&gt;</h3>
<div class="outline-text-3" id="text-org4df55ec">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #ae81ff;">.car</span> .cdr<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cons
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup null? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup cons? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- cons fail"</span> string-write newline
  <span style="color: #e6db74;">"  cdr of cons must be &lt;null&gt; or &lt;cons&gt;"</span> string-write newline
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org25ce5cc" class="outline-3">
<h3 id="org25ce5cc">list?</h3>
<div class="outline-text-3" id="text-org25ce5cc">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org84363eb" class="outline-3">
<h3 id="org84363eb">array-&gt;list</h3>
<div class="outline-text-3" id="text-org84363eb">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-&gt;list <span style="color: #ae81ff;">0</span> right-of-array-&gt;list<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> right-of-array-&gt;list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length gteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref
              swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd374a2e" class="outline-3">
<h3 id="orgd374a2e">list-spread</h3>
<div class="outline-text-3" id="text-orgd374a2e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-spread <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f48ea8" class="outline-3">
<h3 id="org6f48ea8">list-length</h3>
<div class="outline-text-3" id="text-org6f48ea8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-length <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #ae81ff;">0</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> inc<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org251ae65" class="outline-3">
<h3 id="org251ae65">list-any?</h3>
<div class="outline-text-3" id="text-org251ae65">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-any? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb570139" class="outline-3">
<h3 id="orgb570139">list-every?</h3>
<div class="outline-text-3" id="text-orgb570139">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-every? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org87f60f7" class="outline-3">
<h3 id="org87f60f7">list-append</h3>
<div class="outline-text-3" id="text-org87f60f7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:left</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:left</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.car</span> swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdfd05a2" class="outline-3">
<h3 id="orgdfd05a2">tail-cons</h3>
<div class="outline-text-3" id="text-orgdfd05a2">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-cons null cons list-append<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga256770" class="outline-3">
<h3 id="orga256770">list-left</h3>
<div class="outline-text-3" id="text-orga256770">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-left <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org80bac18" class="outline-3">
<h3 id="org80bac18">list-right</h3>
<div class="outline-text-3" id="text-org80bac18">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-right <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfdff38c" class="outline-3">
<h3 id="orgfdff38c">list-split</h3>
<div class="outline-text-3" id="text-orgfdff38c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null <span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #fd971f;">:right!</span> cons <span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org690c815" class="outline-3">
<h3 id="org690c815">list-map</h3>
<div class="outline-text-3" id="text-org690c815">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d15b89" class="outline-3">
<h3 id="org5d15b89">list-for-each</h3>
<div class="outline-text-3" id="text-org5d15b89">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-for-each <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7726646" class="outline-3">
<h3 id="org7726646">list-filter</h3>
<div class="outline-text-3" id="text-org7726646">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org601b886" class="outline-3">
<h3 id="org601b886">list-reverse</h3>
<div class="outline-text-3" id="text-org601b886">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse null swap list-reverse-swap-append<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse-swap-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> left <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> swap cons <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf8aa132" class="outline-3">
<h3 id="orgf8aa132">list-eqv?</h3>
<div class="outline-text-3" id="text-orgf8aa132">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:l1</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null? <span style="color: #a6e22e;">:l2</span> null? and<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l2</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:eqv</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8813254" class="outline-2">
<h2 id="org8813254">sexp</h2>
<div class="outline-text-2" id="text-org8813254">
</div><div id="outline-container-orgb4187fa" class="outline-3">
<h3 id="orgb4187fa"><span class="todo _note_">[note]</span> sexp</h3>
<div class="outline-text-3" id="text-orgb4187fa">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> sexp
  = sexp list <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> or <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc443c69" class="outline-3">
<h3 id="orgc443c69">read-sexp</h3>
<div class="outline-text-3" id="text-orgc443c69">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> round-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>round-ket read-sexp-list-until-ket<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> square-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'begin square-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> flower-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'clo flower-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> doublequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>read-string<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> singlequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'<span style="color: #66d9ef; font-weight: bold;">quote</span> null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> backquote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'partquote null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> :jo<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-until-ket <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:ket</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> null
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> jo-unread read-sexp<span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #f92672; font-weight: bold;">,</span> cons<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org44b7af7" class="outline-3">
<h3 id="org44b7af7">sexp-write</h3>
<div class="outline-text-3" id="text-org44b7af7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span>'null jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span>round-bar jo-write <span style="color: #a6e22e;">:sexp</span> sexp-list-write
            round-ket jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span>doublequote jo-write <span style="color: #a6e22e;">:sexp</span> string-write
              doublequote jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-write<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3a5fd9c" class="outline-2">
<h2 id="org3a5fd9c">repl</h2>
<div class="outline-text-2" id="text-org3a5fd9c">
</div><div id="outline-container-org343d655" class="outline-3">
<h3 id="org343d655">repl</h3>
<div class="outline-text-3" id="text-org343d655">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  reading-stack-push
  repl/loop
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl/loop
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp sexp-eval
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> repl-flag <span style="color: #66d9ef; font-weight: bold;">then</span> print-data-stack<span style="color: #696969;">)</span>
  <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl-over-the-repl-in-c
  repl/loop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5edbc11" class="outline-3">
<h3 id="org5edbc11">sexp-eval</h3>
<div class="outline-text-3" id="text-org5edbc11">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-eval<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga509781" class="outline-3">
<h3 id="orga509781">jo-eval</h3>
<div class="outline-text-3" id="text-orga509781">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?
     <span style="color: #a6e22e;">:jo</span> set-local-jo? or
     <span style="color: #a6e22e;">:jo</span> dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> field-jo? or
     <span style="color: #a6e22e;">:jo</span> set-field-jo? or<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo-eval can not handle : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-bound? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo is not bound : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf95e6c9" class="outline-2">
<h2 id="orgf95e6c9">compiler</h2>
<div class="outline-text-2" id="text-orgf95e6c9">
</div><div id="outline-container-orgbdca701" class="outline-3">
<h3 id="orgbdca701">sexp-list-compile-jojo</h3>
<div class="outline-text-3" id="text-orgbdca701">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-compile-jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jojo&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:body</span> sexp-list-compile
   emit-jojo-end
  <span style="color: #a6e22e;">:address</span> new-jojo
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd206643" class="outline-3">
<h3 id="orgd206643">sexp-compile-jojo</h3>
<div class="outline-text-3" id="text-orgd206643">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile-jojo null cons sexp-list-compile-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org33f3d51" class="outline-3">
<h3 id="org33f3d51">sexp-list-compile</h3>
<div class="outline-text-3" id="text-org33f3d51">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-compile
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org587bb23" class="outline-3">
<h3 id="org587bb23">sexp-compile</h3>
<div class="outline-text-3" id="text-org587bb23">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> jo-apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-compile<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc3ca59" class="outline-3">
<h3 id="orgdc3ca59">jo-compile</h3>
<div class="outline-text-3" id="text-orgdc3ca59">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-&gt;int emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> dynamic-local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-dynamic-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-dynamic-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> field-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-field<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-field-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-field<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3db3fb1" class="outline-3">
<h3 id="org3db3fb1">sexp-list-run</h3>
<div class="outline-text-3" id="text-org3db3fb1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-run sexp-list-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org26d2e48" class="outline-3">
<h3 id="org26d2e48">sexp-run</h3>
<div class="outline-text-3" id="text-org26d2e48">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-run sexp-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfc5fd22" class="outline-2">
<h2 id="orgfc5fd22">basic syntax</h2>
<div class="outline-text-2" id="text-orgfc5fd22">
</div><div id="outline-container-org17e6309" class="outline-3">
<h3 id="org17e6309">(quote)</h3>
<div class="outline-text-3" id="text-org17e6309">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>sexp-quote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
        <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-quote-compile
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span>

      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd01af03" class="outline-3">
<h3 id="orgd01af03">(partquote)</h3>
<div class="outline-text-3" id="text-orgd01af03">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> partquote <span style="color: #B380A8;">{</span>sexp-partquote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-partquote-compile
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> this function depends on <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> '<span style="color: #ae81ff;">@</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> list
     'swap jo-emit
     'list-append jo-emit<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org14b8c7e" class="outline-3">
<h3 id="org14b8c7e">(if)</h3>
<div class="outline-text-3" id="text-org14b8c7e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  emit-jmp <span style="color: #fd971f;">:address-for-jmp!</span>
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
  <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jmp</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
     <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-else-then<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-then<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (if) fail"</span> string-write newline
          <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
          <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
          <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bed707" class="outline-3">
<h3 id="org7bed707">(clo)</h3>
<div class="outline-text-3" id="text-org7bed707">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-clo
  sexp-list-compile-jojo emit-lit
  'current-local-env jo-emit
  'closure jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7ca753" class="outline-3">
<h3 id="orgc7ca753">(cond)</h3>
<div class="outline-text-3" id="text-orgc7ca753">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     'cond/miss-match-report tail-cons
     '<span style="color: #66d9ef; font-weight: bold;">debug</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/miss-match-report
  <span style="color: #e6db74;">"- runtime (cond) miss match"</span> string-write newline<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
    `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?
                <span style="color: #66d9ef; font-weight: bold;">then</span> '<span style="color: #66d9ef; font-weight: bold;">true</span>
                <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:question</span><span style="color: #696969;">))</span>
         <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'if null cons
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> '<span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:question</span><span style="color: #696969;">)</span>
  tail-cons
  '<span style="color: #66d9ef; font-weight: bold;">then</span> tail-cons
  <span style="color: #a6e22e;">:answer</span> tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9fd277a" class="outline-3">
<h3 id="org9fd277a">(-&gt;)</h3>
<div class="outline-text-3" id="text-org9fd277a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> arrow/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span>local-jo-&gt;set-local-jo<span style="color: #B380A8;">}</span> list-map
  list-reverse
  'begin swap cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf46163a" class="outline-3">
<h3 id="orgf46163a">jo-list-compile-cells</h3>
<div class="outline-text-3" id="text-orgf46163a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-list-compile-cells <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;address&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span>jo-emit<span style="color: #B380A8;">}</span> list-for-each
  emit-zero
  <span style="color: #a6e22e;">:address</span> cells-copy <span style="color: #fd971f;">:new-address!</span>
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push
  <span style="color: #a6e22e;">:new-address</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cd2874" class="outline-3">
<h3 id="org1cd2874">(+data)</h3>
<div class="outline-text-3" id="text-org1cd2874">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-data <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> tag-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- (+data) fail"</span> string-write newline
      <span style="color: #e6db74;">"  name must be of form &lt;...&gt;"</span> string-write newline
      <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
      <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>field-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address!</span>

  <span style="color: #a6e22e;">:address</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind-data<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org595d49d" class="outline-3">
<h3 id="org595d49d">(+gene)</h3>
<div class="outline-text-3" id="text-org595d49d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-gene <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  list-length
  <span style="color: #a6e22e;">:name</span> name-bind-gene

  <span style="color: #a6e22e;">:rest-body</span> sexp-list-compile-jojo
  <span style="color: #a6e22e;">:name</span> name-bind-disp-default-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e13c7b" class="outline-3">
<h3 id="org1e13c7b">(+disp)</h3>
<div class="outline-text-3" id="text-org1e13c7b">
<ul class="org-ul">
<li><p>this syntax always use &lt;jojo&gt; as disp</p></li></ul>

<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-disp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>tag-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address-of-tags!</span>

  <span style="color: #a6e22e;">:rest-body</span> sexp-list-compile-jojo
  <span style="color: #a6e22e;">:address-of-tags</span>
  <span style="color: #a6e22e;">:name</span> name-bind-disp-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgebe41be" class="outline-2">
<h2 id="orgebe41be">reboot basic syntax &#x2013; the order matters</h2>
<div class="outline-text-2" id="text-orgebe41be">
</div><div id="outline-container-org16be717" class="outline-3">
<h3 id="org16be717">re-define (+jojo)</h3>
<div class="outline-text-3" id="text-org16be717">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile-jojo
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc238b51" class="outline-3">
<h3 id="orgc238b51">run repl-over-the-repl-in-c</h3>
<div class="outline-text-3" id="text-orgc238b51">
<div class="org-src-container">

<pre class="src src-jojo">repl-over-the-repl-in-c
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc8d3c4" class="outline-3">
<h3 id="orgbc8d3c4">re-define new keywords</h3>
<div class="outline-text-3" id="text-orgbc8d3c4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> note drop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> begin sexp-list-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if core-if<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> clo core-clo<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond cond/expend sexp-compile<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> arrow/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +data plus-data<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +gene plus-gene<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +disp plus-disp<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaf2f794" class="outline-2">
<h2 id="orgaf2f794">more syntax</h2>
<div class="outline-text-2" id="text-orgaf2f794">
</div><div id="outline-container-orga39ebc8" class="outline-3">
<h3 id="orga39ebc8">(array)</h3>
<div class="outline-text-3" id="text-orga39ebc8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array array/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8641159" class="outline-3">
<h3 id="org8641159">(list)</h3>
<div class="outline-text-3" id="text-org8641159">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list list/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons
  'array-&gt;list tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89f808" class="outline-3">
<h3 id="org89f808">(assert) &amp; (assert!)</h3>
<div class="outline-text-3" id="text-org89f808">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert assert/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #fd971f;">assert!</span> assert!/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert!/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert!) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbd39a8" class="outline-3">
<h3 id="orgdbd39a8">(test)</h3>
<div class="outline-text-3" id="text-orgdbd39a8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> test <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> test-flag <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:body</span> begin<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd11f9ed" class="outline-3">
<h3 id="orgd11f9ed">(let-bind) &#x2013; moand interface</h3>
<div class="outline-text-3" id="text-orgd11f9ed">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> example
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">let-bind</span> bind-maybe
    <span style="color: #a6e22e;">:l</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #a6e22e;">:r</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span>
    <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
     <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span>
     bind-maybe<span style="color: #B380A8;">}</span>
    bind-maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span> bind-maybe<span style="color: #B380A8;">}</span> bind-maybe<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind let-bind/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> let-bind/expend-recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend-recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> list-length <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo?<span style="color: #797979;">]</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo-&gt;set-local-jo
          <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span>drop
       <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc56a02" class="outline-3">
<h3 id="orgdc56a02">(case)</h3>
<div class="outline-text-3" id="text-orgdc56a02">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case case/expend sexp-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>tag<span style="color: #B380A8;">}</span> list-map
     <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> case/expend-rest<span style="color: #696969;">)))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-rest <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"- runtime (case) miss match"</span> string-write newline
            <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
     list-append<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">))</span>
     list-append<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> cons?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #ae81ff;">.cdr</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>case/match?<span style="color: #B380A8;">}</span> list-eqv?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #ae81ff;">.car</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span><span style="color: #696969;">))</span> case/match?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/match? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag2</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> eq?<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8de9f07" class="outline-2">
<h2 id="org8de9f07"><span class="done _test_">[test]</span> syntax</h2>
<div class="outline-text-2" id="text-org8de9f07">
</div><div id="outline-container-orgd2ba725" class="outline-3">
<h3 id="orgd2ba725">(list)</h3>
<div class="outline-text-3" id="text-orgd2ba725">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    mark <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> collect
    array-&gt;list
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    list-append
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">5</span> gteq?<span style="color: #B380A8;">}</span> list-left
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">5</span> gteq?<span style="color: #B380A8;">}</span> list-split
    swap <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span><span style="color: #696969;">)</span> <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?
    swap <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span> <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?
    and<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>inc<span style="color: #B380A8;">}</span> list-map
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span> <span style="color: #ae81ff;">10</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">2</span> mod <span style="color: #ae81ff;">0</span> eq?<span style="color: #B380A8;">}</span> list-filter
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">8</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    list-reverse
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">9</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">6</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">0</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org895e512" class="outline-3">
<h3 id="org895e512">(+jojo)</h3>
<div class="outline-text-3" id="text-org895e512">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> square dup mul<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #ae81ff;">2</span> square <span style="color: #ae81ff;">4</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd2de96f" class="outline-3">
<h3 id="orgd2de96f">(cond)</h3>
<div class="outline-text-3" id="text-orgd2de96f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-length/cond
    <span style="color: #fd971f;">:list!</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #ae81ff;">0</span><span style="color: #797979;">]</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> inc<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span><span style="color: #696969;">)</span> list-length/cond <span style="color: #ae81ff;">5</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1171b3a" class="outline-3">
<h3 id="org1171b3a">(clo)</h3>
<div class="outline-text-3" id="text-org1171b3a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> com <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:m1</span> <span style="color: #a6e22e;">:m2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> jojo<span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:m1</span> apply <span style="color: #a6e22e;">:m2</span> apply<span style="color: #B380A8;">}</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">1</span><span style="color: #B380A8;">}</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">2</span><span style="color: #B380A8;">}</span> com apply add <span style="color: #ae81ff;">3</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">1</span><span style="color: #B380A8;">}</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">2</span><span style="color: #B380A8;">}</span> com <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">3</span><span style="color: #B380A8;">}</span> com apply add add <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">1</span><span style="color: #B380A8;">}</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">2</span><span style="color: #B380A8;">}</span> <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">3</span><span style="color: #B380A8;">}</span> com com apply add add <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org95580a7" class="outline-3">
<h3 id="org95580a7">(+gene) &amp; (+disp)</h3>
<div class="outline-text-3" id="text-org95580a7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> add-two <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #ae81ff;">0</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> add-two <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> swap string-length add<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> add-two <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> string-length add<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> add-two <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> add<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> add-two <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    string-length swap string-length add<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #e6db74;">"123"</span> <span style="color: #ae81ff;">3</span> add-two <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"123"</span> add-two <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">3</span> add-two <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #e6db74;">"123"</span> <span style="color: #e6db74;">"123"</span> add-two <span style="color: #ae81ff;">6</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> '<span style="color: #ae81ff;">123</span> <span style="color: #e6db74;">"123"</span> add-two <span style="color: #ae81ff;">0</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e1af71" class="outline-3">
<h3 id="org4e1af71">(partquote)</h3>
<div class="outline-text-3" id="text-org4e1af71">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> one-two-three 'one 'two 'three<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> one-two-three-list '<span style="color: #696969;">(</span>one two three<span style="color: #696969;">))</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    '<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    '<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    `<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> one-two-three<span style="color: #696969;">)</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    '<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> one two three <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    `<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> one-two-three-list list-spread<span style="color: #696969;">)</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    '<span style="color: #696969;">(</span><span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> one two three <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> list-eqv?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    `<span style="color: #696969;">(((</span><span style="color: #ae81ff;">@</span> <span style="color: #ae81ff;">1</span><span style="color: #696969;">)))</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span>
    <span style="color: #ae81ff;">1</span> eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    `<span style="color: #696969;">(((</span><span style="color: #ae81ff;">@</span> `<span style="color: #696969;">(((</span><span style="color: #ae81ff;">@</span> <span style="color: #ae81ff;">1</span><span style="color: #696969;">))))))</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span>
    <span style="color: #ae81ff;">1</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org798b3b1" class="outline-3">
<h3 id="org798b3b1">(case)</h3>
<div class="outline-text-3" id="text-org798b3b1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-length/case
    <span style="color: #fd971f;">:list!</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #ae81ff;">0</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> inc<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span><span style="color: #696969;">)</span> list-length/case <span style="color: #ae81ff;">5</span> eq?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2488844" class="outline-3">
<h3 id="org2488844">dynamic-local</h3>
<div class="outline-text-3" id="text-org2488844">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> fun-1
    <span style="color: #a6e22e;">::dynamic-local</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> fun-2
    'dynamic-of-fun-2 <span style="color: #fd971f;">::dynamic-local!</span>
    fun-1
    nop<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    'dynamic-of-fun-2 fun-2 eq?<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    'dynamic-of-top-begin <span style="color: #fd971f;">::dynamic-local!</span>
    fun-2
    fun-1
    swap 'dynamic-of-fun-2 eq?
    swap 'dynamic-of-top-begin eq?
    and<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9f3976a" class="outline-2">
<h2 id="org9f3976a">monad</h2>
<div class="outline-text-2" id="text-org9f3976a">
</div><div id="outline-container-org8df13f3" class="outline-3">
<h3 id="org8df13f3"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</h3>
<div class="outline-text-3" id="text-org8df13f3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #797979;">]</span><span style="color: #696969;">)</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:2m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
    dummy <span style="color: #B380A8;">{</span>drop <span style="color: #a6e22e;">:1m</span><span style="color: #B380A8;">}</span> <span style="color: #a6e22e;">:1-2m</span> compose apply<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> compose
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-1m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #696969;">))</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;monad&gt;</span><span style="color: #696969;">)))</span>
    <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:0-1m</span> apply <span style="color: #a6e22e;">:1-2m</span> bind<span style="color: #B380A8;">}</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7e6b6b6" class="outline-3">
<h3 id="org7e6b6b6">maybe monad</h3>
<div class="outline-text-3" id="text-org7e6b6b6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> .v<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-maybe just<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-maybe <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:m</span> <span style="color: #a6e22e;">:v-&gt;m</span> <span style="color: #66d9ef; font-weight: bold;">--</span> maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:m</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span> nothing
    <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:m</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:v-&gt;m</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgad84d9d" class="outline-3">
<h3 id="orgad84d9d"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</h3>
<div class="outline-text-3" id="text-orgad84d9d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-list<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9b3b539" class="outline-2">
<h2 id="org9b3b539">pair</h2>
<div class="outline-text-2" id="text-org9b3b539">
</div><div id="outline-container-orge14697d" class="outline-3">
<h3 id="orge14697d">&lt;pair&gt;</h3>
<div class="outline-text-3" id="text-orge14697d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #ae81ff;">.l</span> <span style="color: #ae81ff;">.r</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc4d1c4a" class="outline-2">
<h2 id="orgc4d1c4a"><span class="done _test_">[test]</span> monad</h2>
<div class="outline-text-2" id="text-orgc4d1c4a">
</div><div id="outline-container-org11118e3" class="outline-3">
<h3 id="org11118e3">tree</h3>
<div class="outline-text-3" id="text-org11118e3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span> <span style="color: #ae81ff;">.v</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span> <span style="color: #ae81ff;">.l</span> <span style="color: #ae81ff;">.r</span><span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-1
    <span style="color: #ae81ff;">1</span> leaf <span style="color: #ae81ff;">2</span> leaf node
    <span style="color: #ae81ff;">3</span> leaf <span style="color: #ae81ff;">4</span> leaf node
    <span style="color: #ae81ff;">5</span> leaf node
    node<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12773d1" class="outline-3">
<h3 id="org12773d1">tree-map</h3>
<div class="outline-text-3" id="text-org12773d1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tree</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> tree<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:tree</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tree</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:fun</span> apply leaf<span style="color: #797979;">]</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tree</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:tree</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> node<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span><span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span><span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:eqv</span> apply<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span><span style="color: #797979;">]</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> not
                          <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
                          <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    tree-1 <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">100</span> add<span style="color: #B380A8;">}</span> tree-map

    <span style="color: #ae81ff;">101</span> leaf <span style="color: #ae81ff;">102</span> leaf node
    <span style="color: #ae81ff;">103</span> leaf <span style="color: #ae81ff;">104</span> leaf node
    <span style="color: #ae81ff;">105</span> leaf node
    node

    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> tree-eqv?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeed520f" class="outline-3">
<h3 id="orgeed520f">tree-zip &#x2013; maybe monad</h3>
<div class="outline-text-3" id="text-orgeed520f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-zip <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> tree maybe<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span><span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span><span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.v</span> pair leaf return-maybe<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span><span style="color: #797979;">]</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">let-bind</span> bind-maybe
                        <span style="color: #a6e22e;">:l</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span>
                        <span style="color: #a6e22e;">:r</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> tree-zip<span style="color: #797979;">]</span>
                        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> nothing<span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> maybe-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:m</span> <span style="color: #a6e22e;">:f</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:m</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span> <span style="color: #797979;">[</span>'nothing jo-write space<span style="color: #797979;">]</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:m</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:f</span> apply 'just jo-write space<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    tree-1 dup tree-zip tag '<span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> eq?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-2
    <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">1</span> pair leaf <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">2</span> pair leaf node
    <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">3</span> pair leaf <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">4</span> pair leaf node
    <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">5</span> pair leaf node
    node<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    tree-1 dup tree-zip <span style="color: #ae81ff;">.v</span>
    tree-2
    <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:pair1</span> <span style="color: #a6e22e;">:pair2</span><span style="color: #696969;">)</span>
     <span style="color: #a6e22e;">:pair1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:pair2</span> <span style="color: #ae81ff;">.l</span> eq?
     <span style="color: #a6e22e;">:pair1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:pair2</span> <span style="color: #ae81ff;">.r</span> eq? and<span style="color: #B380A8;">}</span>
    tree-eqv?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    tree-1 <span style="color: #ae81ff;">1</span> leaf tree-zip nothing?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org340f258" class="outline-3">
<h3 id="org340f258">number-tree &#x2013; intrinsic state monad</h3>
<div class="outline-text-3" id="text-org340f258">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> number-tree <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> number<span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:tree</span> <span style="color: #66d9ef; font-weight: bold;">--</span> number<span style="color: #f92672; font-weight: bold;">,</span> tree<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:tree</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;leaf&gt;</span> <span style="color: #797979;">[</span>dup inc swap leaf<span style="color: #797979;">]</span>
      <span style="color: #66d9ef; font-weight: bold;">&lt;node&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tree</span> <span style="color: #ae81ff;">.l</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> <span style="color: #fd971f;">:l!</span>
              <span style="color: #a6e22e;">:tree</span> <span style="color: #ae81ff;">.r</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> <span style="color: #fd971f;">:r!</span>
              <span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tree-3
    <span style="color: #e6db74;">"1"</span> leaf <span style="color: #e6db74;">"2"</span> leaf node
    <span style="color: #e6db74;">"3"</span> leaf <span style="color: #e6db74;">"4"</span> leaf node
    <span style="color: #e6db74;">"5"</span> leaf node
    node<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #ae81ff;">0</span> tree-3 number-tree swap drop
    tree-1 <span style="color: #B380A8;">{</span>dec<span style="color: #B380A8;">}</span> tree-map
    <span style="color: #B380A8;">{</span>eq?<span style="color: #B380A8;">}</span> tree-eqv?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2a0f727" class="outline-2">
<h2 id="org2a0f727">combinator</h2>
<div class="outline-text-2" id="text-org2a0f727">
</div><div id="outline-container-org4c67128" class="outline-3">
<h3 id="org4c67128">times</h3>
<div class="outline-text-3" id="text-org4c67128">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">times</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:n</span> <span style="color: #ae81ff;">0</span> lteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:fun</span> apply
  <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> dec <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8f33667" class="outline-2">
<h2 id="org8f33667">w &#x2013; write &#x2013; gene</h2>
<div class="outline-text-2" id="text-org8f33667">
</div><div id="outline-container-org1f3905a" class="outline-3">
<h3 id="org1f3905a">w</h3>
<div class="outline-text-3" id="text-org1f3905a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> write w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> data-print<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> int-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> string-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> jo-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;byte&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #e6db74;">"(byte "</span> w byte-write <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc115449" class="outline-3">
<h3 id="orgc115449">list-write</h3>
<div class="outline-text-3" id="text-orgc115449">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"()"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> list-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"("</span> w <span style="color: #a6e22e;">:list</span> list-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0ac377" class="outline-3">
<h3 id="orgc0ac377">array-write</h3>
<div class="outline-text-3" id="text-orgc0ac377">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> array-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(array)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(array "</span> w <span style="color: #a6e22e;">:array</span> <span style="color: #ae81ff;">0</span> array-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">1</span> sub eq? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w space
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org235f43b" class="outline-3">
<h3 id="org235f43b">pair-write</h3>
<div class="outline-text-3" id="text-org235f43b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span><span style="color: #696969;">)</span> pair-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> pair-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:pair</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.l</span> w space
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.r</span> w space
  <span style="color: #e6db74;">"pair"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbaecb9a" class="outline-3">
<h3 id="orgbaecb9a">nl</h3>
<div class="outline-text-3" id="text-orgbaecb9a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> nl newline<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org37e3cc5" class="outline-2">
<h2 id="org37e3cc5">equal? &#x2013; gene</h2>
<div class="outline-text-2" id="text-org37e3cc5">
</div><div id="outline-container-org348f2dd" class="outline-3">
<h3 id="org348f2dd">equal?</h3>
<div class="outline-text-3" id="text-org348f2dd">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> eq?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> string-eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.car</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.cdr</span> equal?<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span>equal?<span style="color: #B380A8;">}</span> array-eqv?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.l</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.r</span> equal?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5cf0a56" class="outline-2">
<h2 id="org5cf0a56">more list</h2>
<div class="outline-text-2" id="text-org5cf0a56">
</div><div id="outline-container-org66eb002" class="outline-3">
<h3 id="org66eb002">list-foldr</h3>
<div class="outline-text-3" id="text-org66eb002">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldr <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:a-b-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org69cbdd5" class="outline-3">
<h3 id="org69cbdd5">list-foldl</h3>
<div class="outline-text-3" id="text-org69cbdd5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:b-a-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4df696f" class="outline-3">
<h3 id="org4df696f">list-member?</h3>
<div class="outline-text-3" id="text-org4df696f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-member? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:x</span> equal?<span style="color: #B380A8;">}</span> list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabd7858" class="outline-3">
<h3 id="orgabd7858"><span class="done _test_">[test]</span> </h3>
<div class="outline-text-3" id="text-orgabd7858">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span><span style="color: #696969;">)</span> <span style="color: #696969;">()</span> <span style="color: #B380A8;">{</span>pair<span style="color: #B380A8;">}</span> list-foldr
    <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #696969;">()</span> pair pair pair pair pair pair
    equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span><span style="color: #696969;">)</span> <span style="color: #696969;">()</span> <span style="color: #B380A8;">{</span>pair<span style="color: #B380A8;">}</span> list-foldl
    <span style="color: #696969;">()</span> <span style="color: #ae81ff;">5</span> pair <span style="color: #ae81ff;">4</span> pair <span style="color: #ae81ff;">3</span> pair <span style="color: #ae81ff;">2</span> pair <span style="color: #ae81ff;">1</span> pair <span style="color: #ae81ff;">0</span> pair
    equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span><span style="color: #696969;">)</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">))</span>
    <span style="color: #696969;">()</span> <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr

    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">)</span>
    equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span><span style="color: #696969;">)</span>
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #696969;">))</span>
    <span style="color: #696969;">()</span> <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldl
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #ae81ff;">7</span> <span style="color: #ae81ff;">8</span> <span style="color: #ae81ff;">9</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #ae81ff;">5</span> <span style="color: #ae81ff;">6</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">1</span> <span style="color: #ae81ff;">2</span> <span style="color: #ae81ff;">3</span><span style="color: #696969;">)</span>
    equal?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfcc1855" class="outline-2">
<h2 id="orgfcc1855">table</h2>
<div class="outline-text-2" id="text-orgfcc1855">
</div><div id="outline-container-org4a13537" class="outline-3">
<h3 id="org4a13537">&lt;null-table&gt; &amp; &lt;cons-table&gt;</h3>
<div class="outline-text-3" id="text-org4a13537">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #ae81ff;">.key</span> <span style="color: #ae81ff;">.value</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga30d2ca" class="outline-3">
<h3 id="orga30d2ca">table?</h3>
<div class="outline-text-3" id="text-orga30d2ca">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a9083b" class="outline-3">
<h3 id="org8a9083b">list-&gt;table</h3>
<div class="outline-text-3" id="text-org8a9083b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:list</span> list-length odd? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- list-&gt;table fail"</span> w nl
      <span style="color: #e6db74;">"  length of list is not even"</span> w nl
      <span style="color: #e6db74;">"  length : "</span> w <span style="color: #a6e22e;">:list</span> list-length w nl
      <span style="color: #e6db74;">"  list : "</span> w <span style="color: #a6e22e;">:list</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> list-&gt;table/recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table/recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null-table
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span>
            cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc797d3" class="outline-3">
<h3 id="orgc797d3">table</h3>
<div class="outline-text-3" id="text-orgc797d3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table list 'list-&gt;table jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org50164f8" class="outline-3">
<h3 id="org50164f8">table-write</h3>
<div class="outline-text-3" id="text-org50164f8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"(table)"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span><span style="color: #696969;">)</span> table-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:table</span> null-table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(table)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(table "</span> w <span style="color: #a6e22e;">:table</span> table-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w comma w space
          <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org920fb6a" class="outline-3">
<h3 id="org920fb6a">table-find</h3>
<div class="outline-text-3" id="text-org920fb6a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-find <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">--</span> value <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:key</span> equal?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0d114e" class="outline-3">
<h3 id="orgf0d114e">table-contain?</h3>
<div class="outline-text-3" id="text-orgf0d114e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-contain? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:small</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org77c4069" class="outline-3">
<h3 id="org77c4069">table-merge</h3>
<div class="outline-text-3" id="text-org77c4069">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-merge <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table <span style="color: #66d9ef; font-weight: bold;">true</span> or key <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:src</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> cons-table
              <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4cf3a5" class="outline-3">
<h3 id="org4cf3a5">table-equal?</h3>
<div class="outline-text-3" id="text-org4cf3a5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> table-contain? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #a6e22e;">:t1</span> table-contain?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cd1bf9" class="outline-3">
<h3 id="org1cd1bf9">table-key-filter</h3>
<div class="outline-text-3" id="text-org1cd1bf9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org33078a3" class="outline-3">
<h3 id="org33078a3">table-key-map</h3>
<div class="outline-text-3" id="text-org33078a3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:fun</span> apply
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org831907d" class="outline-3">
<h3 id="org831907d"><span class="done _test_">[test]</span> </h3>
<div class="outline-text-3" id="text-org831907d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">1</span> <span style="color: #e6db74;">"1"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"3"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"3"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span> table-merge<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">1</span> <span style="color: #e6db74;">"1"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"3"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    table-equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">1</span> <span style="color: #e6db74;">"1"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"3"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>even?<span style="color: #B380A8;">}</span> table-key-filter
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    table-equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">1</span> <span style="color: #e6db74;">"1"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"3"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">4</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    <span style="color: #B380A8;">{</span>dec<span style="color: #B380A8;">}</span> table-key-map
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #ae81ff;">0</span> <span style="color: #e6db74;">"1"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">1</span> <span style="color: #e6db74;">"2"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">2</span> <span style="color: #e6db74;">"3"</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">3</span> <span style="color: #e6db74;">"4"</span><span style="color: #696969;">)</span>
    table-equal?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3a7dcc8" class="outline-2">
<h2 id="org3a7dcc8">byte</h2>
<div class="outline-text-2" id="text-org3a7dcc8">
</div><div id="outline-container-orga4ea10f" class="outline-3">
<h3 id="orga4ea10f">(byte)</h3>
<div class="outline-text-3" id="text-orga4ea10f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> byte <span style="color: #B380A8;">{</span>jo-&gt;byte emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org16d20a9" class="outline-2">
<h2 id="org16d20a9">system</h2>
<div class="outline-text-2" id="text-org16d20a9">
</div><div id="outline-container-org4208c06" class="outline-3">
<h3 id="org4208c06">cmd-list</h3>
<div class="outline-text-3" id="text-org4208c06">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list <span style="color: #ae81ff;">0</span> cmd-list/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> cmd-number eq?<span style="color: #797979;">]</span> null
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> index-&gt;cmd-string
              <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc060d80" class="outline-3">
<h3 id="orgc060d80">dash-prefixed-string?</h3>
<div class="outline-text-3" id="text-orgc060d80">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> dash-prefixed-string? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:str</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> string-length <span style="color: #ae81ff;">1</span> lt?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte -<span style="color: #696969;">)</span> eq?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac07d41" class="outline-3">
<h3 id="orgac07d41">usr-jojo-dir</h3>
<div class="outline-text-3" id="text-orgac07d41">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> usr-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"USR_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #797979;">[</span><span style="color: #e6db74;">"HOME"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"/.jojo"</span> string-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- usr-jojo-dir fail"</span> w nl
              <span style="color: #e6db74;">"  system env USR_JOJO_DIR is empty"</span> w nl
              <span style="color: #e6db74;">"  system env HOME is empty"</span> w nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org52d85c" class="outline-3">
<h3 id="org52d85c">sys-jojo-dir</h3>
<div class="outline-text-3" id="text-org52d85c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sys-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"SYS_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"/usr/lib/jojo"</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org52bedf8" class="outline-2">
<h2 id="org52bedf8">&lt;file&gt;</h2>
<div class="outline-text-2" id="text-org52bedf8">
</div><div id="outline-container-orgaccc20d" class="outline-3">
<h3 id="orgaccc20d">maybe-drop-shabang</h3>
<div class="outline-text-3" id="text-orgaccc20d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> maybe-drop-shabang
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup input-stack-empty? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  reading-stack-push
  read-line <span style="color: #fd971f;">:line!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-length <span style="color: #ae81ff;">3</span> lteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">2</span> string-slice <span style="color: #e6db74;">"#!"</span> string-eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  reading-stack-pop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org81c0519" class="outline-3">
<h3 id="org81c0519">input-stack-read-sexp-list</h3>
<div class="outline-text-3" id="text-org81c0519">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> input-stack-read-sexp-list
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  reading-stack-push
  read-sexp-list-to-the-end
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org87805d0" class="outline-3">
<h3 id="org87805d0">read-sexp-list-to-the-end</h3>
<div class="outline-text-3" id="text-org87805d0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-to-the-end <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> null <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8a57b77" class="outline-3">
<h3 id="org8a57b77">absolute-path?</h3>
<div class="outline-text-3" id="text-org8a57b77">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> absolute-path? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> string-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte /<span style="color: #696969;">)</span> eq?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org495ccca" class="outline-3">
<h3 id="org495ccca">path-&gt;reading-path</h3>
<div class="outline-text-3" id="text-org495ccca">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-&gt;reading-path <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> absolute-path?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> current-reading-dir <span style="color: #a6e22e;">:path</span> string-append<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d6ae58" class="outline-3">
<h3 id="org8d6ae58">path-readable?</h3>
<div class="outline-text-3" id="text-org8d6ae58">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-readable? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-open-read
      <span style="color: #66d9ef; font-weight: bold;">then</span> file-close <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> drop <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org26f7b7d" class="outline-3">
<h3 id="org26f7b7d">path-load</h3>
<div class="outline-text-3" id="text-org26f7b7d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span>
         <span style="color: #a6e22e;">:file</span> file-input-stack
         maybe-drop-shabang
         repl
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-load fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbe1addc" class="outline-2">
<h2 id="orgbe1addc">module</h2>
<div class="outline-text-2" id="text-orgbe1addc">
</div><div id="outline-container-org46520fa" class="outline-3">
<h3 id="org46520fa"><span class="todo _note_">[note]</span> module system</h3>
<div class="outline-text-3" id="text-org46520fa">
<ul class="org-ul">
<li><p>a module in jojo is a global name</p><p>stores a table of exported names,</p></li>

<li><p>while a module in file system is a dir of files,</p><p>with a module.jo in the dir,</p><p>to store meta data of the module.</p></li>

<li><p>every module has a version,</p><p><ul class="org-ul"></p><p><li><p>in jojo, the global name</p><p>should be "&lt;module-name&gt;/&lt;version&gt;"</p></li></p><p><li><p>in file system, the dir of a module</p><p>should be "&lt;module-name&gt;/&lt;version&gt;/*"</p></li></ul></p></li>

<li><p>a module will be installed to "~/.jojo"</p><p>as "~/.jojo/modules/&lt;module-name&gt;/&lt;version&gt;/*"</p></li>

<li><p>module system solves two problems :</p><p></p><p><ul class="org-ul"></p><p><li><p>re-load problem :</p><p>when used by multiple clients,</p><p>a module should only be loaded once.</p></li></p><p></p><p><li><p>unique-name problem :</p><p>a name must be resolved to an unique-name</p></li></ul></p></li></ul>
</div>
</div>

<div id="outline-container-org110b77a" class="outline-3">
<h3 id="org110b77a">(+module)</h3>
<div class="outline-text-3" id="text-org110b77a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +module
  dup <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-define-table
  <span style="color: #fd971f;">:define-table!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-export-table
  <span style="color: #fd971f;">:export-table!</span>

  <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #a6e22e;">:export-table</span>
  module/export-check

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #e6db74;">"- (+module) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w w nl
       <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- (+module) fail to merge import-table with define-table"</span> w nl
      <span style="color: #e6db74;">"  import-table : "</span> w <span style="color: #a6e22e;">:import-table</span> w nl
      <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
      <span style="color: #e6db74;">"  key : "</span> w w nl
      <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
  sexp-list-compile

  <span style="color: #a6e22e;">:export-table</span>
  <span style="color: #a6e22e;">:name</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d97901" class="outline-3">
<h3 id="org4d97901">expend-include</h3>
<div class="outline-text-3" id="text-org4d97901">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> expend-include <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> body<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> null?<span style="color: #797979;">]</span> null
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> 'include eq?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> path-list-read-sexp-list
         <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         list-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9476a29" class="outline-3">
<h3 id="org9476a29">path-list-read-sexp-list</h3>
<div class="outline-text-3" id="text-org9476a29">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-list-read-sexp-list
  <span style="color: #B380A8;">{</span>path-read-sexp-list<span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c3e980" class="outline-3">
<h3 id="org3c3e980">path-read-sexp-list</h3>
<div class="outline-text-3" id="text-org3c3e980">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-read-sexp-list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span> <span style="color: #a6e22e;">:file</span> file-input-stack
         input-stack-read-sexp-list
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-read-sexp-list fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org44a18eb" class="outline-3">
<h3 id="org44a18eb">list-car-filter</h3>
<div class="outline-text-3" id="text-org44a18eb">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-car-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:x!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
           <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org70431d9" class="outline-3">
<h3 id="org70431d9">module/generate-define-table</h3>
<div class="outline-text-3" id="text-org70431d9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-define-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +gene +disp<span style="color: #696969;">)</span> swap list-member?<span style="color: #B380A8;">}</span>
  list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #B380A8;">}</span> list-map
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:s</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:s</span>
   <span style="color: #a6e22e;">:name</span> ': jo-append <span style="color: #a6e22e;">:s</span> jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc233da0" class="outline-3">
<h3 id="orgc233da0">module/generate-export-table</h3>
<div class="outline-text-3" id="text-orgc233da0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-export-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span>'export eq?<span style="color: #B380A8;">}</span>
  list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span><span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:s</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:s</span>
   <span style="color: #a6e22e;">:name</span> ': jo-append <span style="color: #a6e22e;">:s</span> jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf903601" class="outline-3">
<h3 id="orgf903601">module/export-check</h3>
<div class="outline-text-3" id="text-orgf903601">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/export-check
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> table-contain? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/export-check fail"</span> w nl
  <span style="color: #e6db74;">"  define-table does not contain export-table"</span> w nl
  <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
  <span style="color: #e6db74;">"  export-table : "</span> w <span style="color: #a6e22e;">:export-table</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d83273" class="outline-3">
<h3 id="org4d83273">module/collect-import-table-list</h3>
<div class="outline-text-3" id="text-org4d83273">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/collect-import-table-list
  <span style="color: #B380A8;">{</span>'import eq?<span style="color: #B380A8;">}</span> list-car-filter
  <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> module/import-one<span style="color: #B380A8;">}</span> list-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org53507c1" class="outline-3">
<h3 id="org53507c1">module/import-one</h3>
<div class="outline-text-3" id="text-org53507c1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/import-one <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-loaded? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:name</span> module-load<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> sexp-list-run <span style="color: #fd971f;">:result!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:result</span> table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:result</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/import-one fail"</span> w nl
  <span style="color: #e6db74;">"  result of body is not table"</span> w nl
  <span style="color: #e6db74;">"  body : "</span> w <span style="color: #a6e22e;">:body</span> w nl
  <span style="color: #e6db74;">"  result : "</span> w <span style="color: #a6e22e;">:result</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5798ab1" class="outline-3">
<h3 id="org5798ab1">sexp-for-module?</h3>
<div class="outline-text-3" id="text-org5798ab1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-for-module? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> export<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:jo!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> eq?<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1f6779" class="outline-3">
<h3 id="orgc1f6779">sexp-table-substitute</h3>
<div class="outline-text-3" id="text-orgc1f6779">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-table-substitute <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> cons?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
         cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:sexp</span> table-find <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span>
                 <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org91650c1" class="outline-3">
<h3 id="org91650c1">module-loaded?</h3>
<div class="outline-text-3" id="text-org91650c1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-loaded? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> jo-bound?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:name</span> sexp-run table?
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc01d2b3" class="outline-3">
<h3 id="orgc01d2b3">module-find-path</h3>
<div class="outline-text-3" id="text-orgc01d2b3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path-from-dir
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:dir</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:dir</span> <span style="color: #e6db74;">"/modules/"</span> string-append
  <span style="color: #a6e22e;">:name</span> jo-&gt;string string-append
  <span style="color: #e6db74;">"/module.jo"</span> string-append <span style="color: #fd971f;">:path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-readable?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span>current-running-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>usr-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>sys-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org824815e" class="outline-3">
<h3 id="org824815e">module-load</h3>
<div class="outline-text-3" id="text-org824815e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-find-path
      <span style="color: #66d9ef; font-weight: bold;">then</span> path-load
      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #e6db74;">"- module-load fail"</span> w nl
      <span style="color: #e6db74;">"  can not find module : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #e6db74;">"  current-reading-dir : "</span> w current-reading-dir w nl
      <span style="color: #e6db74;">"  usr-jojo-dir : "</span> w usr-jojo-dir w nl
      <span style="color: #e6db74;">"  sys-jojo-dir : "</span> w sys-jojo-dir w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc84ee69" class="outline-3">
<h3 id="orgc84ee69">(run)</h3>
<div class="outline-text-3" id="text-orgc84ee69">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> run <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #e6db74;">"- (run) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
  sexp-list-run<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3441e0" class="outline-3">
<h3 id="orga3441e0"><span class="todo _note_">[note]</span> table processing in module system</h3>
<div class="outline-text-3" id="text-orga3441e0">
<ul class="org-ul">
<li><p><p></p><p>we can use table processing functions</p><p>to handle the name unique-name binding</p><p></p></p><p></p><p><div class="org-src-container"></p><p></p><p><pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> take r7rs import declaration for example</p><p>  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span><span style="color: #696969;">)</span></p><p>  where <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span></p><p>  = <span style="color: #66d9ef; font-weight: bold;">&lt;library-name&gt;</span></p><p>  | <span style="color: #696969;">(</span>only <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>except <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>prefix <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>rename <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;old-identifier&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new-identifier&gt;</span><span style="color: #696969;">)</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> <span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> in jojo we can use table processing functions like :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> rename<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> but these names are too general</p><p>  for table processing functions</p><p>  we use the following instead :</p><p>  only  <span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq?<span style="color: #B380A8;">}</span> table-key-filter</p><p>  except<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq? not<span style="color: #B380A8;">}</span> table-key-filter</p><p>  prefix<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> swap jo-append<span style="color: #B380A8;">}</span> table-key-map</p><p>  rename<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span> <span style="color: #66d9ef; font-weight: bold;">else</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span> table-key-map<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> we can abstract those special use of</p><p>  table processing functions :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> import-prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-rename<span style="color: #696969;">)</span></p><p></pre></p><p></div></p></li></ul>
</div>
</div>

<div id="outline-container-orgbb5fe23" class="outline-3">
<h3 id="orgbb5fe23">import-only</h3>
<div class="outline-text-3" id="text-orgbb5fe23">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-only <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org95e8960" class="outline-3">
<h3 id="org95e8960">import-except</h3>
<div class="outline-text-3" id="text-org95e8960">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-except <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq? not<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5ced9d" class="outline-3">
<h3 id="orgf5ced9d">import-prefix</h3>
<div class="outline-text-3" id="text-orgf5ced9d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-prefix <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:prefix-jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:prefix-jo</span> swap jo-append<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org98fc7c4" class="outline-3">
<h3 id="org98fc7c4">import-rename</h3>
<div class="outline-text-3" id="text-org98fc7c4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-rename <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:renaming</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:renaming</span> sexp-table-substitute<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4441e44" class="outline-3">
<h3 id="org4441e44"><span class="done _test_">[test]</span> </h3>
<div class="outline-text-3" id="text-org4441e44">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">test</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+module</span> hi/0.0.0
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">export</span>
      hi1 hi3 hi5<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hi1 <span style="color: #e6db74;">"hi1"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hi2 <span style="color: #e6db74;">"hi2"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hi3 <span style="color: #e6db74;">"hi"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hi4 <span style="color: #e6db74;">"hi4"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hi5 <span style="color: #e6db74;">"hi5"</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+module</span> ya/0.0.0
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">export</span>
      ya1 ya3 ya5<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> ya1 <span style="color: #e6db74;">"ya1"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> ya2 <span style="color: #e6db74;">"ya2"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> ya3 <span style="color: #e6db74;">"ya"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> ya4 <span style="color: #e6db74;">"ya4"</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> ya5 <span style="color: #e6db74;">"ya5"</span><span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+module</span> hiya/0.0.0
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> hi/0.0.0
      '<span style="color: #696969;">(</span>hi3<span style="color: #696969;">)</span> import-only
      'hi- import-prefix
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> 'hi-hi3 'hi<span style="color: #696969;">)</span> import-rename<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> ya/0.0.0
      '<span style="color: #696969;">(</span>ya3<span style="color: #696969;">)</span> import-only
      <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> 'ya3 'ya<span style="color: #696969;">)</span> import-rename<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">export</span>
      hiya<span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> hiya hi ya string-append<span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #66d9ef; font-weight: bold;">hiya/0.0.0:</span>hiya <span style="color: #e6db74;">"hiya"</span> equal?<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">assert</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">run</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> hiya/0.0.0<span style="color: #696969;">)</span>
      hiya <span style="color: #e6db74;">"hiya"</span> equal?<span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgead2737" class="outline-2">
<h2 id="orgead2737">the-story-begin</h2>
<div class="outline-text-2" id="text-orgead2737">
</div><div id="outline-container-org4522278" class="outline-3">
<h3 id="org4522278">welcome-to-jojo</h3>
<div class="outline-text-3" id="text-org4522278">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> welcome-to-jojo
  <span style="color: #e6db74;">"welcome to jojo's programming adventure ^-^/"</span> w nl<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2623eae" class="outline-3">
<h3 id="org2623eae">the-story-begin</h3>
<div class="outline-text-3" id="text-org2623eae">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> the-story-begin
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span>cmd-number <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>repl-flag-on
     welcome-to-jojo
     print-data-stack
     terminal-input-stack repl<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span>core-flag-off
     test-flag-off
     repl-flag-off
     cmd-list <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> path-load<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

the-story-begin
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
.
</div>
</body>
</html>
