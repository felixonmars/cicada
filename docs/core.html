<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-09-25 Mon 00:16 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>core</title>
<meta name="generator" content="Org-mode" />
<meta name="author" content="xieyuheng" />
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">core</h1>
<div id="table-of-contents">
<h2>overview</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org36512b6"><span class="done _todo_stack_">[todo-stack]</span> </a>
<ul>
<li><a href="#org8ce88d2">use sub module for EOPL</a></li>
<li><a href="#org3420f5e">EOPL</a></li>
<li><a href="#orgc71ed0">process calculi</a>
<ul>
<li><a href="#org4941d0f">CSP</a></li>
<li><a href="#org88a2e54">actor</a></li>
</ul>
</li>
<li><a href="#org7f220ba">monad</a></li>
<li><a href="#org3cbf044">from minikanren</a></li>
<li><a href="#orgd5399eb">sexp syntax for org</a></li>
<li><a href="#org8cf8148">sexp syntax for html</a></li>
<li><a href="#org47ec757">sexp syntax for c</a></li>
</ul>
</li>
<li><a href="#org5306166"><span class="todo _note_">[note]</span> </a>
<ul>
<li><a href="#orgdb0d08a">(data)</a></li>
</ul>
</li>
<li><a href="#org4ec4ec4">flag</a></li>
<li><a href="#org61a6d0a">&lt;int&gt;</a>
<ul>
<li><a href="#org704f92f">even &amp; odd</a></li>
</ul>
</li>
<li><a href="#orge73694">&lt;jo&gt;</a>
<ul>
<li><a href="#org75b4f0c">jo-append</a></li>
<li><a href="#org38fdcc3">tag-jo-&gt;jo</a></li>
<li><a href="#orgd730c4d">jo-&gt;tag-jo</a></li>
</ul>
</li>
<li><a href="#orgf5d620d">array</a>
<ul>
<li><a href="#org90ff087">array-eqv?</a></li>
</ul>
</li>
<li><a href="#orga4ed6ff">list</a>
<ul>
<li><a href="#orgd2784b5">&lt;null&gt; &amp; &lt;cons&gt;</a></li>
<li><a href="#orgbc7a686">list?</a></li>
<li><a href="#org1ed67f4">array-&gt;list</a></li>
<li><a href="#orgdbf9890">list-spread</a></li>
<li><a href="#orga001192">list-length</a></li>
<li><a href="#org3d7cefc">list-any?</a></li>
<li><a href="#org19aca25">list-every?</a></li>
<li><a href="#orgb59fb64">list-append</a></li>
<li><a href="#org50a9742">tail-cons</a></li>
<li><a href="#org3c00147">list-left</a></li>
<li><a href="#org806f78f">list-right</a></li>
<li><a href="#orge6d0c20">list-split</a></li>
<li><a href="#orgd409582">list-map</a></li>
<li><a href="#org3b0bfd3">list-for-each</a></li>
<li><a href="#orgdcf59b7">list-filter</a></li>
<li><a href="#orgb9604cf">list-reverse</a></li>
<li><a href="#org5a9df92">list-eqv?</a></li>
</ul>
</li>
<li><a href="#org4cd11c6">sexp</a>
<ul>
<li><a href="#org5373387"><span class="todo _note_">[note]</span> sexp</a></li>
<li><a href="#org3b3d75">read-sexp</a></li>
<li><a href="#org839344d">sexp-write</a></li>
</ul>
</li>
<li><a href="#org9902ef9">repl</a>
<ul>
<li><a href="#org1fe0c30">repl</a></li>
<li><a href="#org24fd2ee">sexp-eval</a></li>
<li><a href="#org7996bac">jo-eval</a></li>
</ul>
</li>
<li><a href="#org82f3ea2">compiler</a>
<ul>
<li><a href="#org5ff792">&lt;macro&gt;</a></li>
<li><a href="#orga9f665d">(+macro)</a></li>
<li><a href="#orgdad2826">body-compile-jojo</a></li>
<li><a href="#org2443a78">sexp-compile-jojo</a></li>
<li><a href="#org2f37968">sexp-list-compile</a></li>
<li><a href="#org60a0bda">macro-expend</a></li>
<li><a href="#orge629a3b">macro-compile</a></li>
<li><a href="#org97331da">sexp-compile</a></li>
<li><a href="#orga035ee7">body-compile</a></li>
<li><a href="#orgf9886b7">jo-compile</a></li>
<li><a href="#orgaccfdbb">body-run</a></li>
<li><a href="#orgeebfc71">sexp-run</a></li>
</ul>
</li>
<li><a href="#org56041ed">basic syntax</a>
<ul>
<li><a href="#org3133456">(quote)</a></li>
<li><a href="#org80bb626">(partquote)</a></li>
<li><a href="#org9c0de45">(if)</a></li>
<li><a href="#orge14c5d8">(tail-if)</a></li>
<li><a href="#orgcdf0f97">(clo)</a></li>
<li><a href="#org7462c97">(cond)</a></li>
<li><a href="#org8f9dd8e">(-&gt;)</a></li>
<li><a href="#org8f3e10d">jo-list-compile-cells</a></li>
<li><a href="#org71d1fdb">(+data)</a></li>
<li><a href="#org2daaf05">(+gene)</a></li>
<li><a href="#org9452531">(+disp)</a></li>
</ul>
</li>
<li><a href="#org670951">reboot basic syntax &#x2013; the order matters</a>
<ul>
<li><a href="#orgebf2217">re-define (+jojo)</a></li>
<li><a href="#org8abf877">run repl-over-the-repl-in-c</a></li>
<li><a href="#orga2f882f">re-define new keywords</a></li>
</ul>
</li>
<li><a href="#org711ec7d">more syntax</a>
<ul>
<li><a href="#org5f41227">(array)</a></li>
<li><a href="#org857c312">(list)</a></li>
<li><a href="#org1a09897">(assert) &amp; (assert!)</a></li>
<li><a href="#orgf3d60a7">(test)</a></li>
<li><a href="#orgd3bdad">(let-bind) &#x2013; moand interface</a></li>
<li><a href="#orga5bf7c5">(case)</a></li>
<li><a href="#org87a7790">(+var)</a></li>
<li><a href="#org79cc940">(set)</a></li>
<li><a href="#orgdf6d570">(get)</a></li>
<li><a href="#orgb557a31">(+atom)</a></li>
</ul>
</li>
<li><a href="#orgaf5da65">monad</a>
<ul>
<li><a href="#org991424"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</a></li>
<li><a href="#org94e026f">maybe monad</a></li>
<li><a href="#orgc51b43c"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</a></li>
</ul>
</li>
<li><a href="#org78ee844">pair</a>
<ul>
<li><a href="#orge080a2a">&lt;pair&gt;</a></li>
</ul>
</li>
<li><a href="#org9d0430c">combinator</a>
<ul>
<li><a href="#org304ffac">times</a></li>
</ul>
</li>
<li><a href="#org63607f4">w &#x2013; write &#x2013; gene</a>
<ul>
<li><a href="#orga8e212d">w</a></li>
<li><a href="#org2100956">list-write</a></li>
<li><a href="#org71ae5d8">array-write</a></li>
<li><a href="#org505f7ad">pair-write</a></li>
<li><a href="#org5426404">nl</a></li>
</ul>
</li>
<li><a href="#org948928a">equal? &#x2013; gene</a>
<ul>
<li><a href="#org7ac6e1b">equal?</a></li>
</ul>
</li>
<li><a href="#orgacd4e28">more list</a>
<ul>
<li><a href="#org2c5f707">list-foldr</a></li>
<li><a href="#orgd3fbe0c">list-foldl</a></li>
<li><a href="#orga01b3a">list-member?</a></li>
</ul>
</li>
<li><a href="#orga2024d2">table</a>
<ul>
<li><a href="#orgd2650d1">&lt;null-table&gt; &amp; &lt;cons-table&gt;</a></li>
<li><a href="#orgcc27c7d">table?</a></li>
<li><a href="#orga9b620">list-&gt;table</a></li>
<li><a href="#org80c9a2b">table</a></li>
<li><a href="#orgd31ace6">table-write</a></li>
<li><a href="#orgf4ea96b">table-find</a></li>
<li><a href="#org5c2ee11">table-contain?</a></li>
<li><a href="#orgbc2b553">table-merge</a></li>
<li><a href="#org3539460">table-equal?</a></li>
<li><a href="#org40854f8">table-key-filter</a></li>
<li><a href="#orgfa626f4">table-key-map</a></li>
</ul>
</li>
<li><a href="#org61aaf8a">byte</a>
<ul>
<li><a href="#orga4b6de2">(byte)</a></li>
</ul>
</li>
<li><a href="#org9cbd655">system</a>
<ul>
<li><a href="#orgf4119ba">cmd-list</a></li>
<li><a href="#org93e9f64">dash-prefixed-string?</a></li>
<li><a href="#org825b914">usr-jojo-dir</a></li>
<li><a href="#org6fb0">sys-jojo-dir</a></li>
</ul>
</li>
<li><a href="#org23fa539">&lt;lib&gt;</a>
<ul>
<li><a href="#orge50e678">lib-load</a></li>
</ul>
</li>
<li><a href="#orgc30431a">&lt;file&gt;</a>
<ul>
<li><a href="#org6050773">maybe-drop-shabang</a></li>
<li><a href="#org7d66b56">input-stack-read-sexp-list</a></li>
<li><a href="#orga2c1f3c">read-sexp-list-to-the-end</a></li>
<li><a href="#org9ba2046">absolute-path?</a></li>
<li><a href="#org6c91be0">path-&gt;reading-path</a></li>
<li><a href="#org6ec2b76">path-readable?</a></li>
<li><a href="#org76e801f">path-load</a></li>
</ul>
</li>
<li><a href="#orga32e1de">module</a>
<ul>
<li><a href="#org8976a68"><span class="todo _note_">[note]</span> module system</a></li>
<li><a href="#org7538f36">(+module)</a></li>
<li><a href="#org535a232">expend-include</a></li>
<li><a href="#orge28273a">path-list-read-sexp-list</a></li>
<li><a href="#org76ec979">path-read-sexp-list</a></li>
<li><a href="#orgd5ba916">list-car-filter</a></li>
<li><a href="#org2095646">module/generate-define-table-list</a>
<ul>
<li><a href="#org57c7542">module/generate-define-table-list</a></li>
<li><a href="#org31fac10">module/plus-filter</a></li>
<li><a href="#org45f9b4d">module/name-list-&gt;table</a></li>
<li><a href="#orgfb1ecf6">module/generate-jojo-table</a></li>
<li><a href="#org733de2b">module/generate-gene-table</a></li>
<li><a href="#org4af8d1b">module/generate-disp-table</a></li>
<li><a href="#org38a5a7e">module/generate-var-table</a></li>
<li><a href="#org54dceec">module/tag-list-&gt;table</a></li>
<li><a href="#org3e5e822">module/tag-list-&gt;predicate-table</a></li>
<li><a href="#org447f5b3">module/tag-list-&gt;constructor-table</a></li>
<li><a href="#orgea7d192">module/generate-atom-table</a></li>
<li><a href="#org8d7f272">module/generate-data-table</a></li>
</ul>
</li>
<li><a href="#org40c5420">module/generate-export-table</a></li>
<li><a href="#orgcb98a3e">module/export-check</a></li>
<li><a href="#org5256233">module/collect-import-table-list</a></li>
<li><a href="#org89aa113">module/import-one</a></li>
<li><a href="#org115a16a">sexp-for-module?</a></li>
<li><a href="#org58870ca">sexp-table-substitute</a></li>
<li><a href="#orga068aa8">module-loaded?</a></li>
<li><a href="#org7c60904">module-find-path</a></li>
<li><a href="#orga686e7">module-load</a></li>
<li><a href="#org4f4f668">(run)</a></li>
<li><a href="#org48d7e84"><span class="todo _note_">[note]</span> table processing in module system</a></li>
<li><a href="#org7225359">import-only</a></li>
<li><a href="#org26fa0bc">import-except</a></li>
<li><a href="#org3513e16">import-prefix</a></li>
<li><a href="#orgfdd9a1b">import-rename</a></li>
</ul>
</li>
<li><a href="#orge372620">the-story-begin</a>
<ul>
<li><a href="#orgbadc8fa">welcome-to-jojo</a></li>
<li><a href="#orgaab5f75">the-story-begin</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org36512b6" class="outline-2">
<h2 id="org36512b6"><span class="done _todo_stack_">[todo-stack]</span> </h2>
<div class="outline-text-2" id="text-org36512b6">
</div><div id="outline-container-org8ce88d2" class="outline-3">
<h3 id="org8ce88d2">use sub module for EOPL</h3>
<div class="outline-text-3" id="text-org8ce88d2">
<ul class="org-ul">
<li><p><p></p><p>org-page</p><p>org-index</p><p></p></p><p></p><p><p></p><p>generated pages are based on org-publish</p><p>and include information generated form org-index</p><p>to navigate a book</p><p></p></p></li></ul>
</div>
</div>

<div id="outline-container-org3420f5e" class="outline-3">
<h3 id="org3420f5e">EOPL</h3>
<div class="outline-text-3" id="text-org3420f5e">
<ul class="org-ul">
<li><p><p></p><p>a version of EOPL</p><p>for function-compose-language</p><p></p></p><p></p><p><p></p><p>we can do this by implement EOPL and re-factor it.</p><p></p></p><p></p><p><p></p><p>with concurrency in mind</p><p></p></p><p></p><p><p></p><p>and with the question about lazy-ness in mind</p><p></p></p></li></ul>
</div>
</div>

<div id="outline-container-orgc71ed0" class="outline-3">
<h3 id="orgc71ed0">process calculi</h3>
<div class="outline-text-3" id="text-orgc71ed0">
</div><div id="outline-container-org4941d0f" class="outline-4">
<h4 id="org4941d0f">CSP</h4>
</div>

<div id="outline-container-org88a2e54" class="outline-4">
<h4 id="org88a2e54">actor</h4>
<div class="outline-text-4" id="text-org88a2e54">
<ul class="org-ul">
<li><p>station</p></li>
<li><p>process</p></li>
<li><p>receive message and send message</p></li>
<li><p>message across the net</p></li>
<li><p>[maybe] (# &#x2026;) for message</p></li></ul>
</div>
</div>
</div>

<div id="outline-container-org7f220ba" class="outline-3">
<h3 id="org7f220ba">monad</h3>
<div class="outline-text-3" id="text-org7f220ba">
<ul class="org-ul">
<li><p>generic function over monad</p><p><ul class="org-ul"></p><p><li><p>maybe we need a new language</p><p>with type checker and type class to do this</p></li></ul></p></li>

<li><p>list monad</p></li></ul>
</div>
</div>

<div id="outline-container-org3cbf044" class="outline-3">
<h3 id="org3cbf044">from minikanren</h3>
<div class="outline-text-3" id="text-org3cbf044">
<ul class="org-ul">
<li><p>logic programming module</p></li></ul>
</div>
</div>

<div id="outline-container-orgd5399eb" class="outline-3">
<h3 id="orgd5399eb">sexp syntax for org</h3>
<div class="outline-text-3" id="text-orgd5399eb">
<ul class="org-ul">
<li><p>use jojo to write tangle</p></li>
<li><p>parse org</p></li></ul>
</div>
</div>

<div id="outline-container-org8cf8148" class="outline-3">
<h3 id="org8cf8148">sexp syntax for html</h3>
</div>

<div id="outline-container-org47ec757" class="outline-3">
<h3 id="org47ec757">sexp syntax for c</h3>
</div>
</div>

<div id="outline-container-org5306166" class="outline-2">
<h2 id="org5306166"><span class="todo _note_">[note]</span> </h2>
<div class="outline-text-2" id="text-org5306166">
</div><div id="outline-container-orgdb0d08a" class="outline-3">
<h3 id="orgdb0d08a">(data)</h3>
<div class="outline-text-3" id="text-orgdb0d08a">
<ul class="org-ul">
<li><p>type-name is the same as constructor-name</p><p>thus I use (data) instead of (type)</p></li></ul>
</div>
</div>
</div>

<div id="outline-container-org4ec4ec4" class="outline-2">
<h2 id="org4ec4ec4">flag</h2>
<div class="outline-text-2" id="text-org4ec4ec4">
<div class="org-src-container">

<pre class="src src-jojo">core-flag-on
test-flag-on
repl-flag-off
</pre>
</div>
</div>
</div>

<div id="outline-container-org61a6d0a" class="outline-2">
<h2 id="org61a6d0a">&lt;int&gt;</h2>
<div class="outline-text-2" id="text-org61a6d0a">
</div><div id="outline-container-org704f92f" class="outline-3">
<h3 id="org704f92f">even &amp; odd</h3>
<div class="outline-text-3" id="text-org704f92f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> even? <span style="color: #ae81ff;">2</span> mod <span style="color: #ae81ff;">0</span> eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> odd? even? not<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge73694" class="outline-2">
<h2 id="orge73694">&lt;jo&gt;</h2>
<div class="outline-text-2" id="text-orge73694">
</div><div id="outline-container-org75b4f0c" class="outline-3">
<h3 id="org75b4f0c">jo-append</h3>
<div class="outline-text-3" id="text-org75b4f0c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo1</span> <span style="color: #a6e22e;">:jo2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:jo1</span> jo-&gt;string
  <span style="color: #a6e22e;">:jo2</span> jo-&gt;string
  string-append
  string-&gt;jo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org38fdcc3" class="outline-3">
<h3 id="org38fdcc3">tag-jo-&gt;jo</h3>
<div class="outline-text-3" id="text-org38fdcc3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tag-jo-&gt;jo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:tag-jo</span> tag-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- tag-jo-&gt;jo fail"</span> string-write newline
      <span style="color: #e6db74;">"  jo is not tag jo : "</span> string-write <span style="color: #a6e22e;">:tag-jo</span> jo-write newline
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-jo</span> jo-&gt;string <span style="color: #fd971f;">:tag-string!</span>
  <span style="color: #a6e22e;">:tag-string</span> string-length <span style="color: #fd971f;">:tag-string-length!</span>
  <span style="color: #a6e22e;">:tag-string</span> <span style="color: #ae81ff;">1</span> <span style="color: #a6e22e;">:tag-string-length</span> dec string-slice
  string-&gt;jo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd730c4d" class="outline-3">
<h3 id="orgd730c4d">jo-&gt;tag-jo</h3>
<div class="outline-text-3" id="text-orgd730c4d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-&gt;tag-jo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> tag jo<span style="color: #696969;">)</span>
  '&lt; <span style="color: #a6e22e;">:jo</span> '&gt; jo-append jo-append<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf5d620d" class="outline-2">
<h2 id="orgf5d620d">array</h2>
<div class="outline-text-2" id="text-orgf5d620d">
</div><div id="outline-container-org90ff087" class="outline-3">
<h3 id="org90ff087">array-eqv?</h3>
<div class="outline-text-3" id="text-org90ff087">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> array-length
      <span style="color: #a6e22e;">:y</span> array-length
      eq? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #ae81ff;">0</span> array-eqv?/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv?/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:x</span> array-length gteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">true</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:pred</span> apply not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga4ed6ff" class="outline-2">
<h2 id="orga4ed6ff">list</h2>
<div class="outline-text-2" id="text-orga4ed6ff">
</div><div id="outline-container-orgd2784b5" class="outline-3">
<h3 id="orgd2784b5">&lt;null&gt; &amp; &lt;cons&gt;</h3>
<div class="outline-text-3" id="text-orgd2784b5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #ae81ff;">.car</span> .cdr<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cons
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup null? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup cons? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- cons fail"</span> string-write newline
  <span style="color: #e6db74;">"  cdr of cons must be &lt;null&gt; or &lt;cons&gt;"</span> string-write newline
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc7a686" class="outline-3">
<h3 id="orgbc7a686">list?</h3>
<div class="outline-text-3" id="text-orgbc7a686">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ed67f4" class="outline-3">
<h3 id="org1ed67f4">array-&gt;list</h3>
<div class="outline-text-3" id="text-org1ed67f4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-&gt;list <span style="color: #ae81ff;">0</span> right-of-array-&gt;list<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> right-of-array-&gt;list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length gteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref
              swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbf9890" class="outline-3">
<h3 id="orgdbf9890">list-spread</h3>
<div class="outline-text-3" id="text-orgdbf9890">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-spread <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga001192" class="outline-3">
<h3 id="orga001192">list-length</h3>
<div class="outline-text-3" id="text-orga001192">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-length <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #ae81ff;">0</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> inc<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d7cefc" class="outline-3">
<h3 id="org3d7cefc">list-any?</h3>
<div class="outline-text-3" id="text-org3d7cefc">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-any? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org19aca25" class="outline-3">
<h3 id="org19aca25">list-every?</h3>
<div class="outline-text-3" id="text-org19aca25">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-every? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb59fb64" class="outline-3">
<h3 id="orgb59fb64">list-append</h3>
<div class="outline-text-3" id="text-orgb59fb64">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:left</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:left</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.car</span> swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org50a9742" class="outline-3">
<h3 id="org50a9742">tail-cons</h3>
<div class="outline-text-3" id="text-org50a9742">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-cons null cons list-append<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c00147" class="outline-3">
<h3 id="org3c00147">list-left</h3>
<div class="outline-text-3" id="text-org3c00147">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-left <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org806f78f" class="outline-3">
<h3 id="org806f78f">list-right</h3>
<div class="outline-text-3" id="text-org806f78f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-right <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6d0c20" class="outline-3">
<h3 id="orge6d0c20">list-split</h3>
<div class="outline-text-3" id="text-orge6d0c20">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null <span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #fd971f;">:right!</span> cons <span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd409582" class="outline-3">
<h3 id="orgd409582">list-map</h3>
<div class="outline-text-3" id="text-orgd409582">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b0bfd3" class="outline-3">
<h3 id="org3b0bfd3">list-for-each</h3>
<div class="outline-text-3" id="text-org3b0bfd3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-for-each <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdcf59b7" class="outline-3">
<h3 id="orgdcf59b7">list-filter</h3>
<div class="outline-text-3" id="text-orgdcf59b7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9604cf" class="outline-3">
<h3 id="orgb9604cf">list-reverse</h3>
<div class="outline-text-3" id="text-orgb9604cf">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse null swap list-reverse-swap-append<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse-swap-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> left <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> swap cons <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a9df92" class="outline-3">
<h3 id="org5a9df92">list-eqv?</h3>
<div class="outline-text-3" id="text-org5a9df92">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:l1</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null? <span style="color: #a6e22e;">:l2</span> null? and<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l2</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:eqv</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4cd11c6" class="outline-2">
<h2 id="org4cd11c6">sexp</h2>
<div class="outline-text-2" id="text-org4cd11c6">
</div><div id="outline-container-org5373387" class="outline-3">
<h3 id="org5373387"><span class="todo _note_">[note]</span> sexp</h3>
<div class="outline-text-3" id="text-org5373387">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> sexp
  = sexp list <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> or <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b3d75" class="outline-3">
<h3 id="org3b3d75">read-sexp</h3>
<div class="outline-text-3" id="text-org3b3d75">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> round-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>round-ket read-sexp-list-until-ket<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> square-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'begin square-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> flower-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'clo flower-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> doublequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>read-string<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> singlequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'<span style="color: #66d9ef; font-weight: bold;">quote</span> null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> backquote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'partquote null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> :jo<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-until-ket <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:ket</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> null
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> jo-unread read-sexp<span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #f92672; font-weight: bold;">,</span> cons<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org839344d" class="outline-3">
<h3 id="org839344d">sexp-write</h3>
<div class="outline-text-3" id="text-org839344d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span>'null jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span>round-bar jo-write <span style="color: #a6e22e;">:sexp</span> sexp-list-write
            round-ket jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span>doublequote jo-write <span style="color: #a6e22e;">:sexp</span> string-write
              doublequote jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-write<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9902ef9" class="outline-2">
<h2 id="org9902ef9">repl</h2>
<div class="outline-text-2" id="text-org9902ef9">
</div><div id="outline-container-org1fe0c30" class="outline-3">
<h3 id="org1fe0c30">repl</h3>
<div class="outline-text-3" id="text-org1fe0c30">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  reading-stack-push
  repl/loop
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl/loop
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp sexp-eval
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> repl-flag <span style="color: #66d9ef; font-weight: bold;">then</span> print-data-stack<span style="color: #696969;">)</span>
  <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl-over-the-repl-in-c
  repl/loop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org24fd2ee" class="outline-3">
<h3 id="org24fd2ee">sexp-eval</h3>
<div class="outline-text-3" id="text-org24fd2ee">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-eval<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7996bac" class="outline-3">
<h3 id="org7996bac">jo-eval</h3>
<div class="outline-text-3" id="text-org7996bac">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?
     <span style="color: #a6e22e;">:jo</span> set-local-jo? or
     <span style="color: #a6e22e;">:jo</span> dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> field-jo? or
     <span style="color: #a6e22e;">:jo</span> set-field-jo? or<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo-eval can not handle : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-bound? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo is not bound : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org82f3ea2" class="outline-2">
<h2 id="org82f3ea2">compiler</h2>
<div class="outline-text-2" id="text-org82f3ea2">
</div><div id="outline-container-org5ff792" class="outline-3">
<h3 id="org5ff792">&lt;macro&gt;</h3>
<div class="outline-text-3" id="text-org5ff792">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;macro&gt;</span> <span style="color: #ae81ff;">.expend</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9f665d" class="outline-3">
<h3 id="orga9f665d">(+macro)</h3>
<div class="outline-text-3" id="text-orga9f665d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +macro <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> body-compile-jojo macro
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdad2826" class="outline-3">
<h3 id="orgdad2826">body-compile-jojo</h3>
<div class="outline-text-3" id="text-orgdad2826">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-compile-jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jojo&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:body</span> body-compile
  emit-jojo-end
  <span style="color: #a6e22e;">:address</span> new-jojo
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2443a78" class="outline-3">
<h3 id="org2443a78">sexp-compile-jojo</h3>
<div class="outline-text-3" id="text-org2443a78">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile-jojo null cons body-compile-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f37968" class="outline-3">
<h3 id="org2f37968">sexp-list-compile</h3>
<div class="outline-text-3" id="text-org2f37968">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-compile
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org60a0bda" class="outline-3">
<h3 id="org60a0bda">macro-expend</h3>
<div class="outline-text-3" id="text-org60a0bda">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> macro-expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> jo-ref <span style="color: #fd971f;">:head!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:head</span> tag '<span style="color: #66d9ef; font-weight: bold;">&lt;macro&gt;</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:head</span> <span style="color: #ae81ff;">.expend</span> apply <span style="color: #66d9ef; font-weight: bold;">recur</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge629a3b" class="outline-3">
<h3 id="orge629a3b">macro-compile</h3>
<div class="outline-text-3" id="text-orge629a3b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> macro-compile <span style="color: #ae81ff;">.expend</span> apply sexp-compile<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org97331da" class="outline-3">
<h3 id="org97331da">sexp-compile</h3>
<div class="outline-text-3" id="text-org97331da">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile/cons<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-compile<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile/cons <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:sexp</span> macro-expend <span style="color: #fd971f;">:primitive-sexp!</span>
  <span style="color: #a6e22e;">:primitive-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #a6e22e;">:primitive-sexp</span> <span style="color: #ae81ff;">.car</span>
  jo-ref apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga035ee7" class="outline-3">
<h3 id="orga035ee7">body-compile</h3>
<div class="outline-text-3" id="text-orga035ee7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-&gt;tail-sexp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> tail-sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> cons? not<span style="color: #797979;">]</span> <span style="color: #a6e22e;">:sexp</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> 'if eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>'tail-if <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> 'begin eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>'tail-begin <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> :sexp<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
     macro-expend
     sexp-&gt;tail-sexp
     sexp-compile<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-compile
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9886b7" class="outline-3">
<h3 id="orgf9886b7">jo-compile</h3>
<div class="outline-text-3" id="text-orgf9886b7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-&gt;int emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> dynamic-local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-dynamic-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-dynamic-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> field-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-field<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-field-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-field<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaccfdbb" class="outline-3">
<h3 id="orgaccfdbb">body-run</h3>
<div class="outline-text-3" id="text-orgaccfdbb">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-run body-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeebfc71" class="outline-3">
<h3 id="orgeebfc71">sexp-run</h3>
<div class="outline-text-3" id="text-orgeebfc71">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-run sexp-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org56041ed" class="outline-2">
<h2 id="org56041ed">basic syntax</h2>
<div class="outline-text-2" id="text-org56041ed">
</div><div id="outline-container-org3133456" class="outline-3">
<h3 id="org3133456">(quote)</h3>
<div class="outline-text-3" id="text-org3133456">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>sexp-quote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
        <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-quote-compile
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span>

      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org80bb626" class="outline-3">
<h3 id="org80bb626">(partquote)</h3>
<div class="outline-text-3" id="text-org80bb626">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> partquote <span style="color: #B380A8;">{</span>sexp-partquote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-partquote-compile
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> this function depends on <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> '<span style="color: #ae81ff;">@</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> list macro-compile
     'swap jo-emit
     'list-append jo-emit<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c0de45" class="outline-3">
<h3 id="org9c0de45">(if)</h3>
<div class="outline-text-3" id="text-org9c0de45">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  emit-jmp <span style="color: #fd971f;">:address-for-jmp!</span>
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
  <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jmp</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
     <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-else-then<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-then<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (if) fail"</span> string-write newline
          <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
          <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
          <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge14c5d8" class="outline-3">
<h3 id="orge14c5d8">(tail-if)</h3>
<div class="outline-text-3" id="text-orge14c5d8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
  <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
     <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-else-then<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-then<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (tail-if) fail"</span> string-write newline
          <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
          <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
          <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>


<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:question</span> sexp-list-compile
    emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
    <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    emit-jmp <span style="color: #fd971f;">:address-for-jmp!</span>
    <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
    <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    <span style="color: #a6e22e;">:address-for-jmp</span> set-offset-to-here<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:question</span> sexp-list-compile
    emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
    <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
       <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-else-then<span style="color: #797979;">]</span>

      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-then<span style="color: #797979;">]</span>

      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (tail-if) fail"</span> string-write newline
            <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
            <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
            <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdf0f97" class="outline-3">
<h3 id="orgcdf0f97">(clo)</h3>
<div class="outline-text-3" id="text-orgcdf0f97">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-clo
  body-compile-jojo emit-lit
  'current-local-env jo-emit
  'closure jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7462c97" class="outline-3">
<h3 id="org7462c97">(cond)</h3>
<div class="outline-text-3" id="text-org7462c97">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     'cond/miss-match-report tail-cons
     '<span style="color: #66d9ef; font-weight: bold;">debug</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/miss-match-report
  <span style="color: #e6db74;">"- runtime (cond) miss match"</span> string-write newline<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
    `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?
                <span style="color: #66d9ef; font-weight: bold;">then</span> '<span style="color: #66d9ef; font-weight: bold;">true</span>
                <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:question</span><span style="color: #696969;">))</span>
         <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span>'if null cons
         '<span style="color: #66d9ef; font-weight: bold;">true</span> tail-cons
         '<span style="color: #66d9ef; font-weight: bold;">then</span> tail-cons
         <span style="color: #a6e22e;">:answer</span> tail-cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span>
        <span style="color: #797979;">[</span>'if null cons
         <span style="color: #a6e22e;">:question</span> tail-cons
         '<span style="color: #66d9ef; font-weight: bold;">then</span> tail-cons
         <span style="color: #a6e22e;">:answer</span> tail-cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f9dd8e" class="outline-3">
<h3 id="org8f9dd8e">(-&gt;)</h3>
<div class="outline-text-3" id="text-org8f9dd8e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> arrow/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span>local-jo-&gt;set-local-jo<span style="color: #B380A8;">}</span> list-map
  list-reverse
  'begin swap cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f3e10d" class="outline-3">
<h3 id="org8f3e10d">jo-list-compile-cells</h3>
<div class="outline-text-3" id="text-org8f3e10d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-list-compile-cells <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;address&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span>jo-emit<span style="color: #B380A8;">}</span> list-for-each
  emit-zero
  <span style="color: #a6e22e;">:address</span> cells-copy <span style="color: #fd971f;">:new-address!</span>
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push
  <span style="color: #a6e22e;">:new-address</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org71d1fdb" class="outline-3">
<h3 id="org71d1fdb">(+data)</h3>
<div class="outline-text-3" id="text-org71d1fdb">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-data <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> tag-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- (+data) fail"</span> string-write newline
      <span style="color: #e6db74;">"  name must be of form &lt;...&gt;"</span> string-write newline
      <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
      <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>field-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address!</span>

  <span style="color: #a6e22e;">:address</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind-data<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2daaf05" class="outline-3">
<h3 id="org2daaf05">(+gene)</h3>
<div class="outline-text-3" id="text-org2daaf05">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-gene <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  list-length
  <span style="color: #a6e22e;">:name</span> name-bind-gene

  <span style="color: #a6e22e;">:rest-body</span> body-compile-jojo
  <span style="color: #a6e22e;">:name</span> name-bind-disp-default-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9452531" class="outline-3">
<h3 id="org9452531">(+disp)</h3>
<div class="outline-text-3" id="text-org9452531">
<ul class="org-ul">
<li><p>this syntax always use &lt;jojo&gt; as disp</p></li></ul>

<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-disp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>tag-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address-of-tags!</span>

  <span style="color: #a6e22e;">:rest-body</span> body-compile-jojo
  <span style="color: #a6e22e;">:address-of-tags</span>
  <span style="color: #a6e22e;">:name</span> name-bind-disp-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org670951" class="outline-2">
<h2 id="org670951">reboot basic syntax &#x2013; the order matters</h2>
<div class="outline-text-2" id="text-org670951">
</div><div id="outline-container-orgebf2217" class="outline-3">
<h3 id="orgebf2217">re-define (+jojo)</h3>
<div class="outline-text-3" id="text-orgebf2217">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> body-compile-jojo
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8abf877" class="outline-3">
<h3 id="org8abf877">run repl-over-the-repl-in-c</h3>
<div class="outline-text-3" id="text-org8abf877">
<div class="org-src-container">

<pre class="src src-jojo">repl-over-the-repl-in-c
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2f882f" class="outline-3">
<h3 id="orga2f882f">re-define new keywords</h3>
<div class="outline-text-3" id="text-orga2f882f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> note drop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> begin sexp-list-compile<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-begin body-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if core-if<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> clo core-clo<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> cond cond/expend<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> arrow/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +data plus-data<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +gene plus-gene<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +disp plus-disp<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org711ec7d" class="outline-2">
<h2 id="org711ec7d">more syntax</h2>
<div class="outline-text-2" id="text-org711ec7d">
</div><div id="outline-container-org5f41227" class="outline-3">
<h3 id="org5f41227">(array)</h3>
<div class="outline-text-3" id="text-org5f41227">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> array array/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org857c312" class="outline-3">
<h3 id="org857c312">(list)</h3>
<div class="outline-text-3" id="text-org857c312">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> list list/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons
  'array-&gt;list tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1a09897" class="outline-3">
<h3 id="org1a09897">(assert) &amp; (assert!)</h3>
<div class="outline-text-3" id="text-org1a09897">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> assert assert/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> <span style="color: #fd971f;">assert!</span> assert!/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert!/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert!) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf3d60a7" class="outline-3">
<h3 id="orgf3d60a7">(test)</h3>
<div class="outline-text-3" id="text-orgf3d60a7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> test <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> test-flag <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:body</span> begin<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd3bdad" class="outline-3">
<h3 id="orgd3bdad">(let-bind) &#x2013; moand interface</h3>
<div class="outline-text-3" id="text-orgd3bdad">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> example
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">let-bind</span> bind-maybe
    <span style="color: #a6e22e;">:l</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #a6e22e;">:r</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span>
    <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
     <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span>
     bind-maybe<span style="color: #B380A8;">}</span>
    bind-maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span> bind-maybe<span style="color: #B380A8;">}</span> bind-maybe<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> let-bind let-bind/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> let-bind/expend-recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend-recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> list-length <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo?<span style="color: #797979;">]</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo-&gt;set-local-jo
          <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span>drop
       <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5bf7c5" class="outline-3">
<h3 id="orga5bf7c5">(case)</h3>
<div class="outline-text-3" id="text-orga5bf7c5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> case case/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>tag<span style="color: #B380A8;">}</span> list-map
     <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> case/expend-rest<span style="color: #696969;">)))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-rest <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"- runtime (case) miss match"</span> string-write newline
            <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
     list-append<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">))</span>
     list-append<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> cons?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #ae81ff;">.cdr</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>case/match?<span style="color: #B380A8;">}</span> list-eqv?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #ae81ff;">.car</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span><span style="color: #696969;">))</span> case/match?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/match? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag2</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> eq?<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org87a7790" class="outline-3">
<h3 id="org87a7790">(+var)</h3>
<div class="outline-text-3" id="text-org87a7790">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +var <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:body!</span>
  'mark <span style="color: #a6e22e;">:body</span> cons
  'collect tail-cons
  body-run <span style="color: #fd971f;">:array!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">1</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:array</span> <span style="color: #ae81ff;">0</span> array-ref <span style="color: #a6e22e;">:name</span> name-bind <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- (+var) fail"</span> w nl
  <span style="color: #e6db74;">"  body eval to not one value"</span> w nl
  <span style="color: #e6db74;">"  name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
  <span style="color: #e6db74;">"  body : "</span> w <span style="color: #a6e22e;">:body</span> w nl
  <span style="color: #e6db74;">"  number of values : "</span> w <span style="color: #a6e22e;">:array</span> array-length w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org79cc940" class="outline-3">
<h3 id="org79cc940">(set)</h3>
<div class="outline-text-3" id="text-org79cc940">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> set <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-rebind<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf6d570" class="outline-3">
<h3 id="orgdf6d570">(get)</h3>
<div class="outline-text-3" id="text-orgdf6d570">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> get <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-get<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb557a31" class="outline-3">
<h3 id="orgb557a31">(+atom)</h3>
<div class="outline-text-3" id="text-orgb557a31">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +atom <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:gc-actor-name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:gc-actor-name</span><span style="color: #696969;">))</span> name-get
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-bind-atom<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaf5da65" class="outline-2">
<h2 id="orgaf5da65">monad</h2>
<div class="outline-text-2" id="text-orgaf5da65">
</div><div id="outline-container-org991424" class="outline-3">
<h3 id="org991424"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</h3>
<div class="outline-text-3" id="text-org991424">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #797979;">]</span><span style="color: #696969;">)</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:2m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #797979;">]</span><span style="color: #696969;">))</span>
    dummy <span style="color: #B380A8;">{</span>drop <span style="color: #a6e22e;">:1m</span><span style="color: #B380A8;">}</span> <span style="color: #a6e22e;">:1-2m</span> compose apply<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> compose
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-1m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #696969;">))</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">)))</span>
    <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:0-1m</span> apply <span style="color: #a6e22e;">:1-2m</span> bind<span style="color: #B380A8;">}</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org94e026f" class="outline-3">
<h3 id="org94e026f">maybe monad</h3>
<div class="outline-text-3" id="text-org94e026f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> .v<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-maybe just<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-maybe <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:m</span> <span style="color: #a6e22e;">:v-&gt;m</span> <span style="color: #66d9ef; font-weight: bold;">--</span> maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:m</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span> nothing
    <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:m</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:v-&gt;m</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc51b43c" class="outline-3">
<h3 id="orgc51b43c"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</h3>
<div class="outline-text-3" id="text-orgc51b43c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-list<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org78ee844" class="outline-2">
<h2 id="org78ee844">pair</h2>
<div class="outline-text-2" id="text-org78ee844">
</div><div id="outline-container-orge080a2a" class="outline-3">
<h3 id="orge080a2a">&lt;pair&gt;</h3>
<div class="outline-text-3" id="text-orge080a2a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #ae81ff;">.l</span> <span style="color: #ae81ff;">.r</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9d0430c" class="outline-2">
<h2 id="org9d0430c">combinator</h2>
<div class="outline-text-2" id="text-org9d0430c">
</div><div id="outline-container-org304ffac" class="outline-3">
<h3 id="org304ffac">times</h3>
<div class="outline-text-3" id="text-org304ffac">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">times</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:n</span> <span style="color: #ae81ff;">0</span> lteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:fun</span> apply
  <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> dec <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org63607f4" class="outline-2">
<h2 id="org63607f4">w &#x2013; write &#x2013; gene</h2>
<div class="outline-text-2" id="text-org63607f4">
</div><div id="outline-container-orga8e212d" class="outline-3">
<h3 id="orga8e212d">w</h3>
<div class="outline-text-3" id="text-orga8e212d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> write w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> data-print<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> int-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> string-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> jo-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;byte&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #e6db74;">"(byte "</span> w byte-write <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2100956" class="outline-3">
<h3 id="org2100956">list-write</h3>
<div class="outline-text-3" id="text-org2100956">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"()"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> list-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"("</span> w <span style="color: #a6e22e;">:list</span> list-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org71ae5d8" class="outline-3">
<h3 id="org71ae5d8">array-write</h3>
<div class="outline-text-3" id="text-org71ae5d8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> array-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(array)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(array "</span> w <span style="color: #a6e22e;">:array</span> <span style="color: #ae81ff;">0</span> array-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">1</span> sub eq? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w space
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org505f7ad" class="outline-3">
<h3 id="org505f7ad">pair-write</h3>
<div class="outline-text-3" id="text-org505f7ad">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span><span style="color: #696969;">)</span> pair-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> pair-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:pair</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.l</span> w space
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.r</span> w space
  <span style="color: #e6db74;">"pair"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5426404" class="outline-3">
<h3 id="org5426404">nl</h3>
<div class="outline-text-3" id="text-org5426404">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> nl newline<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org948928a" class="outline-2">
<h2 id="org948928a">equal? &#x2013; gene</h2>
<div class="outline-text-2" id="text-org948928a">
</div><div id="outline-container-org7ac6e1b" class="outline-3">
<h3 id="org7ac6e1b">equal?</h3>
<div class="outline-text-3" id="text-org7ac6e1b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> eq?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> string-eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.car</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.cdr</span> equal?<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span>equal?<span style="color: #B380A8;">}</span> array-eqv?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.l</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.r</span> equal?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgacd4e28" class="outline-2">
<h2 id="orgacd4e28">more list</h2>
<div class="outline-text-2" id="text-orgacd4e28">
</div><div id="outline-container-org2c5f707" class="outline-3">
<h3 id="org2c5f707">list-foldr</h3>
<div class="outline-text-3" id="text-org2c5f707">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldr <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:a-b-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd3fbe0c" class="outline-3">
<h3 id="orgd3fbe0c">list-foldl</h3>
<div class="outline-text-3" id="text-orgd3fbe0c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:b-a-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga01b3a" class="outline-3">
<h3 id="orga01b3a">list-member?</h3>
<div class="outline-text-3" id="text-orga01b3a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-member? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:x</span> equal?<span style="color: #B380A8;">}</span> list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga2024d2" class="outline-2">
<h2 id="orga2024d2">table</h2>
<div class="outline-text-2" id="text-orga2024d2">
</div><div id="outline-container-orgd2650d1" class="outline-3">
<h3 id="orgd2650d1">&lt;null-table&gt; &amp; &lt;cons-table&gt;</h3>
<div class="outline-text-3" id="text-orgd2650d1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #ae81ff;">.key</span> <span style="color: #ae81ff;">.value</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc27c7d" class="outline-3">
<h3 id="orgcc27c7d">table?</h3>
<div class="outline-text-3" id="text-orgcc27c7d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9b620" class="outline-3">
<h3 id="orga9b620">list-&gt;table</h3>
<div class="outline-text-3" id="text-orga9b620">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:list</span> list-length odd? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- list-&gt;table fail"</span> w nl
      <span style="color: #e6db74;">"  length of list is not even"</span> w nl
      <span style="color: #e6db74;">"  length : "</span> w <span style="color: #a6e22e;">:list</span> list-length w nl
      <span style="color: #e6db74;">"  list : "</span> w <span style="color: #a6e22e;">:list</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> list-&gt;table/recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table/recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null-table
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span>
            cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org80c9a2b" class="outline-3">
<h3 id="org80c9a2b">table</h3>
<div class="outline-text-3" id="text-org80c9a2b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table list macro-compile 'list-&gt;table jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd31ace6" class="outline-3">
<h3 id="orgd31ace6">table-write</h3>
<div class="outline-text-3" id="text-orgd31ace6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"(table)"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span><span style="color: #696969;">)</span> table-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:table</span> null-table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(table)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(table "</span> w <span style="color: #a6e22e;">:table</span> table-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w comma w space
          <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4ea96b" class="outline-3">
<h3 id="orgf4ea96b">table-find</h3>
<div class="outline-text-3" id="text-orgf4ea96b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-find <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">--</span> value <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:key</span> equal?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c2ee11" class="outline-3">
<h3 id="org5c2ee11">table-contain?</h3>
<div class="outline-text-3" id="text-org5c2ee11">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-contain? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:small</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc2b553" class="outline-3">
<h3 id="orgbc2b553">table-merge</h3>
<div class="outline-text-3" id="text-orgbc2b553">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-merge <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table <span style="color: #66d9ef; font-weight: bold;">true</span> or key <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:src</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> cons-table
              <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3539460" class="outline-3">
<h3 id="org3539460">table-equal?</h3>
<div class="outline-text-3" id="text-org3539460">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> table-contain? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #a6e22e;">:t1</span> table-contain?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org40854f8" class="outline-3">
<h3 id="org40854f8">table-key-filter</h3>
<div class="outline-text-3" id="text-org40854f8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa626f4" class="outline-3">
<h3 id="orgfa626f4">table-key-map</h3>
<div class="outline-text-3" id="text-orgfa626f4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:fun</span> apply
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org61aaf8a" class="outline-2">
<h2 id="org61aaf8a">byte</h2>
<div class="outline-text-2" id="text-org61aaf8a">
</div><div id="outline-container-orga4b6de2" class="outline-3">
<h3 id="orga4b6de2">(byte)</h3>
<div class="outline-text-3" id="text-orga4b6de2">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> byte <span style="color: #B380A8;">{</span>jo-&gt;byte emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9cbd655" class="outline-2">
<h2 id="org9cbd655">system</h2>
<div class="outline-text-2" id="text-org9cbd655">
</div><div id="outline-container-orgf4119ba" class="outline-3">
<h3 id="orgf4119ba">cmd-list</h3>
<div class="outline-text-3" id="text-orgf4119ba">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list <span style="color: #ae81ff;">0</span> cmd-list/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> cmd-number eq?<span style="color: #797979;">]</span> null
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> index-&gt;cmd-string
              <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org93e9f64" class="outline-3">
<h3 id="org93e9f64">dash-prefixed-string?</h3>
<div class="outline-text-3" id="text-org93e9f64">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> dash-prefixed-string? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:str</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> string-length <span style="color: #ae81ff;">1</span> lt?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte -<span style="color: #696969;">)</span> eq?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org825b914" class="outline-3">
<h3 id="org825b914">usr-jojo-dir</h3>
<div class="outline-text-3" id="text-org825b914">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> usr-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"USR_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #797979;">[</span><span style="color: #e6db74;">"HOME"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"/.jojo"</span> string-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- usr-jojo-dir fail"</span> w nl
              <span style="color: #e6db74;">"  system env USR_JOJO_DIR is empty"</span> w nl
              <span style="color: #e6db74;">"  system env HOME is empty"</span> w nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6fb0" class="outline-3">
<h3 id="org6fb0">sys-jojo-dir</h3>
<div class="outline-text-3" id="text-org6fb0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sys-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"SYS_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"/usr/lib/jojo"</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org23fa539" class="outline-2">
<h2 id="org23fa539">&lt;lib&gt;</h2>
<div class="outline-text-2" id="text-org23fa539">
</div><div id="outline-container-orge50e678" class="outline-3">
<h3 id="orge50e678">lib-load</h3>
<div class="outline-text-3" id="text-orge50e678">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> lib-load current-reading-dir swap string-append lib-open<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc30431a" class="outline-2">
<h2 id="orgc30431a">&lt;file&gt;</h2>
<div class="outline-text-2" id="text-orgc30431a">
</div><div id="outline-container-org6050773" class="outline-3">
<h3 id="org6050773">maybe-drop-shabang</h3>
<div class="outline-text-3" id="text-org6050773">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> maybe-drop-shabang
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup input-stack-empty? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  reading-stack-push
  read-line <span style="color: #fd971f;">:line!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-length <span style="color: #ae81ff;">3</span> lteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">2</span> string-slice <span style="color: #e6db74;">"#!"</span> string-eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  reading-stack-pop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7d66b56" class="outline-3">
<h3 id="org7d66b56">input-stack-read-sexp-list</h3>
<div class="outline-text-3" id="text-org7d66b56">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> input-stack-read-sexp-list
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  reading-stack-push
  read-sexp-list-to-the-end
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2c1f3c" class="outline-3">
<h3 id="orga2c1f3c">read-sexp-list-to-the-end</h3>
<div class="outline-text-3" id="text-orga2c1f3c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-to-the-end <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> null <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ba2046" class="outline-3">
<h3 id="org9ba2046">absolute-path?</h3>
<div class="outline-text-3" id="text-org9ba2046">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> absolute-path? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> string-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte /<span style="color: #696969;">)</span> eq?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c91be0" class="outline-3">
<h3 id="org6c91be0">path-&gt;reading-path</h3>
<div class="outline-text-3" id="text-org6c91be0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-&gt;reading-path <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> absolute-path?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> current-reading-dir <span style="color: #a6e22e;">:path</span> string-append<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ec2b76" class="outline-3">
<h3 id="org6ec2b76">path-readable?</h3>
<div class="outline-text-3" id="text-org6ec2b76">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-readable? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-open-read
      <span style="color: #66d9ef; font-weight: bold;">then</span> file-close <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> drop <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org76e801f" class="outline-3">
<h3 id="org76e801f">path-load</h3>
<div class="outline-text-3" id="text-org76e801f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span>
         <span style="color: #a6e22e;">:file</span> file-input-stack
         maybe-drop-shabang
         repl
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-load fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga32e1de" class="outline-2">
<h2 id="orga32e1de">module</h2>
<div class="outline-text-2" id="text-orga32e1de">
</div><div id="outline-container-org8976a68" class="outline-3">
<h3 id="org8976a68"><span class="todo _note_">[note]</span> module system</h3>
<div class="outline-text-3" id="text-org8976a68">
<ul class="org-ul">
<li><p>a module in jojo is a global name</p><p>stores a table of exported names,</p></li>

<li><p>while a module in file system is a dir of files,</p><p>with a module.jo in the dir,</p><p>to store meta data of the module.</p></li>

<li><p>every module has a version,</p><p><ul class="org-ul"></p><p><li><p>in jojo, the global name</p><p>should be "&lt;module-name&gt;/&lt;version&gt;"</p></li></p><p><li><p>in file system, the dir of a module</p><p>should be "&lt;module-name&gt;/&lt;version&gt;/*"</p></li></ul></p></li>

<li><p>a module will be installed to "~/.jojo"</p><p>as "~/.jojo/modules/&lt;module-name&gt;/&lt;version&gt;/*"</p></li>

<li><p>module system solves two problems :</p><p></p><p><ul class="org-ul"></p><p><li><p>re-load problem :</p><p>when used by multiple clients,</p><p>a module should only be loaded once.</p></li></p><p></p><p><li><p>unique-name problem :</p><p>a name must be resolved to an unique-name</p></li></ul></p></li></ul>
</div>
</div>

<div id="outline-container-org7538f36" class="outline-3">
<h3 id="org7538f36">(+module)</h3>
<div class="outline-text-3" id="text-org7538f36">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +module
  dup <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-define-table-list
  <span style="color: #fd971f;">:define-table-list!</span>

  <span style="color: #a6e22e;">:define-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (+module) fail to merge define-table-list"</span> w nl
       <span style="color: #e6db74;">"  define-table-list : "</span> w <span style="color: #a6e22e;">:define-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:define-table!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-export-table
  <span style="color: #fd971f;">:export-table!</span>

  <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #a6e22e;">:export-table</span>
  module/export-check

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (+module) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
      <span style="color: #e6db74;">"- (+module) fail to merge import-table with define-table"</span> w nl
      <span style="color: #e6db74;">"  import-table : "</span> w <span style="color: #a6e22e;">:import-table</span> w nl
      <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
      <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
      <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter

  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map

  sexp-list-compile

  <span style="color: #a6e22e;">:export-table</span>
  <span style="color: #a6e22e;">:name</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org535a232" class="outline-3">
<h3 id="org535a232">expend-include</h3>
<div class="outline-text-3" id="text-org535a232">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> expend-include <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> body<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> null?<span style="color: #797979;">]</span> null
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> 'include eq?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> path-list-read-sexp-list
         <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         list-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge28273a" class="outline-3">
<h3 id="orge28273a">path-list-read-sexp-list</h3>
<div class="outline-text-3" id="text-orge28273a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-list-read-sexp-list
  <span style="color: #B380A8;">{</span>path-read-sexp-list<span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org76ec979" class="outline-3">
<h3 id="org76ec979">path-read-sexp-list</h3>
<div class="outline-text-3" id="text-org76ec979">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-read-sexp-list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span> <span style="color: #a6e22e;">:file</span> file-input-stack
         input-stack-read-sexp-list
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-read-sexp-list fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5ba916" class="outline-3">
<h3 id="orgd5ba916">list-car-filter</h3>
<div class="outline-text-3" id="text-orgd5ba916">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-car-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:x!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
           <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2095646" class="outline-3">
<h3 id="org2095646">module/generate-define-table-list</h3>
<div class="outline-text-3" id="text-org2095646">
</div><div id="outline-container-org57c7542" class="outline-4">
<h4 id="org57c7542">module/generate-define-table-list</h4>
<div class="outline-text-4" id="text-org57c7542">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-define-table-list
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span>
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-jojo-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-gene-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-disp-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-var-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-atom-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-data-table<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org31fac10" class="outline-4">
<h4 id="org31fac10">module/plus-filter</h4>
<div class="outline-text-4" id="text-org31fac10">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/plus-filter
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:plus</span> <span style="color: #66d9ef; font-weight: bold;">--</span> name list<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:plus</span> eq?<span style="color: #B380A8;">}</span> list-car-filter
  <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #B380A8;">}</span> list-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org45f9b4d" class="outline-4">
<h4 id="org45f9b4d">module/name-list-&gt;table</h4>
<div class="outline-text-4" id="text-org45f9b4d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/name-list-&gt;table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:name-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span>
   <span style="color: #a6e22e;">:module-name</span> ': jo-append <span style="color: #a6e22e;">:jo</span> jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb1ecf6" class="outline-4">
<h4 id="orgfb1ecf6">module/generate-jojo-table</h4>
<div class="outline-text-4" id="text-orgfb1ecf6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-jojo-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+jojo module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org733de2b" class="outline-4">
<h4 id="org733de2b">module/generate-gene-table</h4>
<div class="outline-text-4" id="text-org733de2b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-gene-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+gene module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4af8d1b" class="outline-4">
<h4 id="org4af8d1b">module/generate-disp-table</h4>
<div class="outline-text-4" id="text-org4af8d1b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-disp-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+disp module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org38a5a7e" class="outline-4">
<h4 id="org38a5a7e">module/generate-var-table</h4>
<div class="outline-text-4" id="text-org38a5a7e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-var-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+var module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org54dceec" class="outline-4">
<h4 id="org54dceec">module/tag-list-&gt;table</h4>
<div class="outline-text-4" id="text-org54dceec">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span>
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   jo-&gt;tag-jo
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e5e822" class="outline-4">
<h4 id="org3e5e822">module/tag-list-&gt;predicate-table</h4>
<div class="outline-text-4" id="text-org3e5e822">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;predicate-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo '? jo-append
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   '? jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org447f5b3" class="outline-4">
<h4 id="org447f5b3">module/tag-list-&gt;constructor-table</h4>
<div class="outline-text-4" id="text-org447f5b3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;constructor-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea7d192" class="outline-4">
<h4 id="orgea7d192">module/generate-atom-table</h4>
<div class="outline-text-4" id="text-orgea7d192">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-atom-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+atom module/plus-filter <span style="color: #fd971f;">:tag-list!</span>
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;predicate-table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d7f272" class="outline-4">
<h4 id="org8d7f272">module/generate-data-table</h4>
<div class="outline-text-4" id="text-org8d7f272">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-data-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table table table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+data module/plus-filter <span style="color: #fd971f;">:tag-list!</span>
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;predicate-table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;constructor-table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org40c5420" class="outline-3">
<h3 id="org40c5420">module/generate-export-table</h3>
<div class="outline-text-3" id="text-org40c5420">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-export-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span>'export eq?<span style="color: #B380A8;">}</span>
  list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span><span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr
  <span style="color: #B380A8;">{</span>tag-jo? not<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:name-list!</span>

  <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-export-table
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:list</span>
    <span style="color: #B380A8;">{</span>'export eq?<span style="color: #B380A8;">}</span>
    list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span><span style="color: #B380A8;">}</span> list-map
    null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr

    dup <span style="color: #B380A8;">{</span>tag-jo?<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:tag-list!</span>
    <span style="color: #B380A8;">{</span>tag-jo? not<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:name-list!</span>

    <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table
    <span style="color: #a6e22e;">:tag-list</span>  <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table

    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
        <span style="color: #e6db74;">"- (module/generate-export-table)"</span> w nl
        <span style="color: #e6db74;">"  fail to merge export tables"</span> w nl
        <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
        <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb98a3e" class="outline-3">
<h3 id="orgcb98a3e">module/export-check</h3>
<div class="outline-text-3" id="text-orgcb98a3e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/export-check
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> table-contain? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/export-check fail"</span> w nl
  <span style="color: #e6db74;">"  define-table does not contain export-table"</span> w nl
  <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
  <span style="color: #e6db74;">"  export-table : "</span> w <span style="color: #a6e22e;">:export-table</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5256233" class="outline-3">
<h3 id="org5256233">module/collect-import-table-list</h3>
<div class="outline-text-3" id="text-org5256233">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/collect-import-table-list
  <span style="color: #B380A8;">{</span>'import eq?<span style="color: #B380A8;">}</span> list-car-filter
  <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> module/import-one<span style="color: #B380A8;">}</span> list-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89aa113" class="outline-3">
<h3 id="org89aa113">module/import-one</h3>
<div class="outline-text-3" id="text-org89aa113">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/import-one <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-loaded? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:name</span> module-load<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> body-run <span style="color: #fd971f;">:result!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:result</span> table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:result</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/import-one fail"</span> w nl
  <span style="color: #e6db74;">"  result of body is not table"</span> w nl
  <span style="color: #e6db74;">"  body : "</span> w <span style="color: #a6e22e;">:body</span> w nl
  <span style="color: #e6db74;">"  result : "</span> w <span style="color: #a6e22e;">:result</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org115a16a" class="outline-3">
<h3 id="org115a16a">sexp-for-module?</h3>
<div class="outline-text-3" id="text-org115a16a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-for-module? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> export<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:jo!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> eq?<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org58870ca" class="outline-3">
<h3 id="org58870ca">sexp-table-substitute</h3>
<div class="outline-text-3" id="text-org58870ca">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-table-substitute <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> cons?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
         cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:sexp</span> table-find<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga068aa8" class="outline-3">
<h3 id="orga068aa8">module-loaded?</h3>
<div class="outline-text-3" id="text-orga068aa8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-loaded? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> jo-bound?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:name</span> sexp-run table?
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c60904" class="outline-3">
<h3 id="org7c60904">module-find-path</h3>
<div class="outline-text-3" id="text-org7c60904">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path-from-dir
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:dir</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:dir</span> <span style="color: #e6db74;">"/modules/"</span> string-append
  <span style="color: #a6e22e;">:name</span> jo-&gt;string string-append
  <span style="color: #e6db74;">"/module.jo"</span> string-append <span style="color: #fd971f;">:path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-readable?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span>current-running-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>usr-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>sys-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga686e7" class="outline-3">
<h3 id="orga686e7">module-load</h3>
<div class="outline-text-3" id="text-orga686e7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-find-path
      <span style="color: #66d9ef; font-weight: bold;">then</span> path-load
      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #e6db74;">"- module-load fail"</span> w nl
      <span style="color: #e6db74;">"  can not find module : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #e6db74;">"  current-reading-dir : "</span> w current-reading-dir w nl
      <span style="color: #e6db74;">"  usr-jojo-dir : "</span> w usr-jojo-dir w nl
      <span style="color: #e6db74;">"  sys-jojo-dir : "</span> w sys-jojo-dir w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4f4f668" class="outline-3">
<h3 id="org4f4f668">(run)</h3>
<div class="outline-text-3" id="text-org4f4f668">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> run <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (run) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
  body-run<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org48d7e84" class="outline-3">
<h3 id="org48d7e84"><span class="todo _note_">[note]</span> table processing in module system</h3>
<div class="outline-text-3" id="text-org48d7e84">
<ul class="org-ul">
<li><p><p></p><p>we can use table processing functions</p><p>to handle the name unique-name binding</p><p></p></p><p></p><p><div class="org-src-container"></p><p></p><p><pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> take r7rs import declaration for example</p><p>  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span><span style="color: #696969;">)</span></p><p>  where <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span></p><p>  = <span style="color: #66d9ef; font-weight: bold;">&lt;library-name&gt;</span></p><p>  | <span style="color: #696969;">(</span>only <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>except <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>prefix <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>rename <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;old-identifier&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new-identifier&gt;</span><span style="color: #696969;">)</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> <span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> in jojo we can use table processing functions like :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> rename<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> but these names are too general</p><p>  for table processing functions</p><p>  we use the following instead :</p><p>  only  <span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq?<span style="color: #B380A8;">}</span> table-key-filter</p><p>  except<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq? not<span style="color: #B380A8;">}</span> table-key-filter</p><p>  prefix<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> swap jo-append<span style="color: #B380A8;">}</span> table-key-map</p><p>  rename<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span> <span style="color: #66d9ef; font-weight: bold;">else</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span> table-key-map<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> we can abstract those special use of</p><p>  table processing functions :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> import-prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-rename<span style="color: #696969;">)</span></p><p></pre></p><p></div></p></li></ul>
</div>
</div>

<div id="outline-container-org7225359" class="outline-3">
<h3 id="org7225359">import-only</h3>
<div class="outline-text-3" id="text-org7225359">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-only <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org26fa0bc" class="outline-3">
<h3 id="org26fa0bc">import-except</h3>
<div class="outline-text-3" id="text-org26fa0bc">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-except <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq? not<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3513e16" class="outline-3">
<h3 id="org3513e16">import-prefix</h3>
<div class="outline-text-3" id="text-org3513e16">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-prefix <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:prefix-jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:prefix-jo</span> swap jo-append<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfdd9a1b" class="outline-3">
<h3 id="orgfdd9a1b">import-rename</h3>
<div class="outline-text-3" id="text-orgfdd9a1b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-rename <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:renaming</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:renaming</span> sexp-table-substitute<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge372620" class="outline-2">
<h2 id="orge372620">the-story-begin</h2>
<div class="outline-text-2" id="text-orge372620">
</div><div id="outline-container-orgbadc8fa" class="outline-3">
<h3 id="orgbadc8fa">welcome-to-jojo</h3>
<div class="outline-text-3" id="text-orgbadc8fa">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> welcome-to-jojo
  <span style="color: #e6db74;">"welcome to jojo's programming adventure ^-^/"</span> w nl<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaab5f75" class="outline-3">
<h3 id="orgaab5f75">the-story-begin</h3>
<div class="outline-text-3" id="text-orgaab5f75">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> the-story-begin
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span>cmd-number <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>core-flag-off
     test-flag-off
     repl-flag-on
     welcome-to-jojo
     print-data-stack
     terminal-input-stack repl<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span>core-flag-off
     test-flag-off
     repl-flag-off
     cmd-list <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> path-load<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

the-story-begin
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: xieyuheng</p>
<p class="date">Created: 2017-09-25 Mon 00:16</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
