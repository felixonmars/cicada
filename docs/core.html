<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-09-24 Sun 09:17 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>core</title>
<meta name="generator" content="Org-mode" />
<meta name="author" content="xieyuheng" />
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">core</h1>
<div id="table-of-contents">
<h2>overview</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org42f025c"><span class="done _todo_stack_">[todo-stack]</span> </a>
<ul>
<li><a href="#org5e25fea">EOPL</a></li>
<li><a href="#orgbb4a176">monad</a></li>
<li><a href="#org24e44a5">process calculi</a>
<ul>
<li><a href="#orgad2472f">CSP</a></li>
<li><a href="#orge3c38f8">actor</a></li>
</ul>
</li>
<li><a href="#org2d8b20c">from minikanren</a></li>
<li><a href="#org9cbe7de">sexp syntax for org</a></li>
<li><a href="#org18b7527">sexp syntax for html</a></li>
<li><a href="#orgf384617">sexp syntax for c</a></li>
</ul>
</li>
<li><a href="#orge9f584c"><span class="todo _note_">[note]</span> </a>
<ul>
<li><a href="#org8105c52">(data)</a></li>
</ul>
</li>
<li><a href="#orge3d7169">flag</a></li>
<li><a href="#org2c7ec50">&lt;int&gt;</a>
<ul>
<li><a href="#org68478e4">even &amp; odd</a></li>
</ul>
</li>
<li><a href="#orgd3677dc">&lt;jo&gt;</a>
<ul>
<li><a href="#org9b12ec9">jo-append</a></li>
<li><a href="#org777b626">tag-jo-&gt;jo</a></li>
<li><a href="#org6d99735">jo-&gt;tag-jo</a></li>
</ul>
</li>
<li><a href="#org4b0c6ad">array</a>
<ul>
<li><a href="#org3ef8393">array-eqv?</a></li>
</ul>
</li>
<li><a href="#org10e0573">list</a>
<ul>
<li><a href="#org304a386">&lt;null&gt; &amp; &lt;cons&gt;</a></li>
<li><a href="#org634fb34">list?</a></li>
<li><a href="#orgadaa2f9">array-&gt;list</a></li>
<li><a href="#orgdf7e919">list-spread</a></li>
<li><a href="#orgb208c76">list-length</a></li>
<li><a href="#org21779d6">list-any?</a></li>
<li><a href="#orgfc9df4">list-every?</a></li>
<li><a href="#org9f65e9">list-append</a></li>
<li><a href="#org935e82d">tail-cons</a></li>
<li><a href="#orgc66b6f3">list-left</a></li>
<li><a href="#orgf72e132">list-right</a></li>
<li><a href="#org1ee8fe3">list-split</a></li>
<li><a href="#org121689e">list-map</a></li>
<li><a href="#org9768e21">list-for-each</a></li>
<li><a href="#orgc8c7b0f">list-filter</a></li>
<li><a href="#orge3df9c0">list-reverse</a></li>
<li><a href="#orgdf8b39b">list-eqv?</a></li>
</ul>
</li>
<li><a href="#org4e0165b">sexp</a>
<ul>
<li><a href="#org9457ba"><span class="todo _note_">[note]</span> sexp</a></li>
<li><a href="#orgc936def">read-sexp</a></li>
<li><a href="#org24f93d5">sexp-write</a></li>
</ul>
</li>
<li><a href="#org9ad57ba">repl</a>
<ul>
<li><a href="#org687c8a8">repl</a></li>
<li><a href="#org19b9280">sexp-eval</a></li>
<li><a href="#orgb04f1db">jo-eval</a></li>
</ul>
</li>
<li><a href="#org2eb3d19">compiler</a>
<ul>
<li><a href="#org5594304">&lt;macro&gt;</a></li>
<li><a href="#org8c68026">(+macro)</a></li>
<li><a href="#org3c4d06d">body-compile-jojo</a></li>
<li><a href="#orgc133fdf">sexp-compile-jojo</a></li>
<li><a href="#orga3e3a80">sexp-list-compile</a></li>
<li><a href="#org843825a">macro-expend</a></li>
<li><a href="#org6d52fea">macro-compile</a></li>
<li><a href="#org2186e20">sexp-compile</a></li>
<li><a href="#org67adf27">body-compile</a></li>
<li><a href="#orga6c0c19">jo-compile</a></li>
<li><a href="#org9e5e6c5">body-run</a></li>
<li><a href="#org25d79e0">sexp-run</a></li>
</ul>
</li>
<li><a href="#org8b55c8">basic syntax</a>
<ul>
<li><a href="#orgddfff68">(quote)</a></li>
<li><a href="#org2c04876">(partquote)</a></li>
<li><a href="#org36157ce">(if)</a></li>
<li><a href="#org8d39efe">(tail-if)</a></li>
<li><a href="#org8b36a34">(clo)</a></li>
<li><a href="#orgeb2c7a5">(cond)</a></li>
<li><a href="#org7763220">(-&gt;)</a></li>
<li><a href="#org2b6eee0">jo-list-compile-cells</a></li>
<li><a href="#org34ee451">(+data)</a></li>
<li><a href="#org16f10e1">(+gene)</a></li>
<li><a href="#orgea0c709">(+disp)</a></li>
</ul>
</li>
<li><a href="#org66b3c21">reboot basic syntax &#x2013; the order matters</a>
<ul>
<li><a href="#org3156d2e">re-define (+jojo)</a></li>
<li><a href="#orgaa8273d">run repl-over-the-repl-in-c</a></li>
<li><a href="#orgdcf437e">re-define new keywords</a></li>
</ul>
</li>
<li><a href="#orgb5f925b">more syntax</a>
<ul>
<li><a href="#org84a5b55">(array)</a></li>
<li><a href="#org85dea47">(list)</a></li>
<li><a href="#org4528f98">(assert) &amp; (assert!)</a></li>
<li><a href="#org35f42f7">(test)</a></li>
<li><a href="#orgdbc879c">(let-bind) &#x2013; moand interface</a></li>
<li><a href="#org942d62d">(case)</a></li>
<li><a href="#org3881e7f">(+var)</a></li>
<li><a href="#org6b9201e">(set)</a></li>
<li><a href="#org5718786">(get)</a></li>
<li><a href="#org2fce092">(+atom)</a></li>
</ul>
</li>
<li><a href="#orgb4a20be">monad</a>
<ul>
<li><a href="#org24f3d66"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</a></li>
<li><a href="#orgffd29e0">maybe monad</a></li>
<li><a href="#org528b69c"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</a></li>
</ul>
</li>
<li><a href="#org6be26be">pair</a>
<ul>
<li><a href="#orgc420083">&lt;pair&gt;</a></li>
</ul>
</li>
<li><a href="#orgcaaf656">combinator</a>
<ul>
<li><a href="#org8b30356">times</a></li>
</ul>
</li>
<li><a href="#orge6c56f3">w &#x2013; write &#x2013; gene</a>
<ul>
<li><a href="#org6804da5">w</a></li>
<li><a href="#org8b05d9c">list-write</a></li>
<li><a href="#orga4d653a">array-write</a></li>
<li><a href="#orgb91890a">pair-write</a></li>
<li><a href="#org48e47a6">nl</a></li>
</ul>
</li>
<li><a href="#org899d3c1">equal? &#x2013; gene</a>
<ul>
<li><a href="#org795d71a">equal?</a></li>
</ul>
</li>
<li><a href="#org4fd45fc">more list</a>
<ul>
<li><a href="#orgdb086ec">list-foldr</a></li>
<li><a href="#org89ccae1">list-foldl</a></li>
<li><a href="#org894c37e">list-member?</a></li>
</ul>
</li>
<li><a href="#org6d39b69">table</a>
<ul>
<li><a href="#org7d9fe27">&lt;null-table&gt; &amp; &lt;cons-table&gt;</a></li>
<li><a href="#orgac3a4ee">table?</a></li>
<li><a href="#org4188759">list-&gt;table</a></li>
<li><a href="#org200ba12">table</a></li>
<li><a href="#org9ae8f79">table-write</a></li>
<li><a href="#orgaeaa0ff">table-find</a></li>
<li><a href="#org28128e">table-contain?</a></li>
<li><a href="#orge9893e2">table-merge</a></li>
<li><a href="#org63f1430">table-equal?</a></li>
<li><a href="#orgdf16957">table-key-filter</a></li>
<li><a href="#org805ab7d">table-key-map</a></li>
</ul>
</li>
<li><a href="#org4ca7502">byte</a>
<ul>
<li><a href="#orgb8b10b4">(byte)</a></li>
</ul>
</li>
<li><a href="#org75e097c">system</a>
<ul>
<li><a href="#org3870317">cmd-list</a></li>
<li><a href="#org3d9f0b">dash-prefixed-string?</a></li>
<li><a href="#org502afb3">usr-jojo-dir</a></li>
<li><a href="#org8aea9f9">sys-jojo-dir</a></li>
</ul>
</li>
<li><a href="#org41f2a78">&lt;lib&gt;</a>
<ul>
<li><a href="#orgd14f8b">lib-load</a></li>
</ul>
</li>
<li><a href="#org7dee778">&lt;file&gt;</a>
<ul>
<li><a href="#orgfaa0fa4">maybe-drop-shabang</a></li>
<li><a href="#org6ed80d5">input-stack-read-sexp-list</a></li>
<li><a href="#orgb9fdcda">read-sexp-list-to-the-end</a></li>
<li><a href="#org8f33f78">absolute-path?</a></li>
<li><a href="#orgee6d44f">path-&gt;reading-path</a></li>
<li><a href="#orgf4cde80">path-readable?</a></li>
<li><a href="#orgfcbde76">path-load</a></li>
</ul>
</li>
<li><a href="#org18275dc">module</a>
<ul>
<li><a href="#orgf3fe44e"><span class="todo _note_">[note]</span> module system</a></li>
<li><a href="#org2ed307a">(+module)</a></li>
<li><a href="#org7a6ef64">expend-include</a></li>
<li><a href="#orgf762e4">path-list-read-sexp-list</a></li>
<li><a href="#orgc4bfc52">path-read-sexp-list</a></li>
<li><a href="#org36ece3">list-car-filter</a></li>
<li><a href="#orga6e3ac1">module/generate-define-table-list</a>
<ul>
<li><a href="#org7c85f64">module/generate-define-table-list</a></li>
<li><a href="#orge83f23a">module/plus-filter</a></li>
<li><a href="#org8595efb">module/name-list-&gt;table</a></li>
<li><a href="#org93d62cc">module/generate-jojo-table</a></li>
<li><a href="#org7c968d4">module/generate-gene-table</a></li>
<li><a href="#orgcc7f5dc">module/generate-disp-table</a></li>
<li><a href="#org2f02747">module/generate-var-table</a></li>
<li><a href="#orgdfe4f9">module/tag-list-&gt;table</a></li>
<li><a href="#org9d22b00">module/tag-list-&gt;predicate-table</a></li>
<li><a href="#org3fb7f60">module/tag-list-&gt;constructor-table</a></li>
<li><a href="#orga78b2e9">module/generate-atom-table</a></li>
<li><a href="#orgb6c7c96">module/generate-data-table</a></li>
</ul>
</li>
<li><a href="#org296b40a">module/generate-export-table</a></li>
<li><a href="#orgddcffc9">module/export-check</a></li>
<li><a href="#org6a65be8">module/collect-import-table-list</a></li>
<li><a href="#orge263bb4">module/import-one</a></li>
<li><a href="#orge5eeea5">sexp-for-module?</a></li>
<li><a href="#orgd4dde08">sexp-table-substitute</a></li>
<li><a href="#orgec44469">module-loaded?</a></li>
<li><a href="#org4866ac6">module-find-path</a></li>
<li><a href="#org339c4ae">module-load</a></li>
<li><a href="#org8852230">(run)</a></li>
<li><a href="#orgcebdd70"><span class="todo _note_">[note]</span> table processing in module system</a></li>
<li><a href="#orgdd95a33">import-only</a></li>
<li><a href="#org1191c95">import-except</a></li>
<li><a href="#org5ff13df">import-prefix</a></li>
<li><a href="#orge7efa40">import-rename</a></li>
</ul>
</li>
<li><a href="#orge3516c0">the-story-begin</a>
<ul>
<li><a href="#org46f010f">welcome-to-jojo</a></li>
<li><a href="#org6e54e93">the-story-begin</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org42f025c" class="outline-2">
<h2 id="org42f025c"><span class="done _todo_stack_">[todo-stack]</span> </h2>
<div class="outline-text-2" id="text-org42f025c">
</div><div id="outline-container-org5e25fea" class="outline-3">
<h3 id="org5e25fea">EOPL</h3>
<div class="outline-text-3" id="text-org5e25fea">
<ul class="org-ul">
<li><p><p></p><p>a version of EOPL</p><p>for function-compose-language</p><p></p></p><p></p><p><p></p><p>we can do this by implement EOPL and re-factor it.</p><p></p></p><p></p><p><p></p><p>with concurrency in mind</p><p></p></p><p></p><p><p></p><p>and with the question about lazy-ness in mind</p><p></p></p></li></ul>
</div>
</div>

<div id="outline-container-orgbb4a176" class="outline-3">
<h3 id="orgbb4a176">monad</h3>
<div class="outline-text-3" id="text-orgbb4a176">
<ul class="org-ul">
<li><p>generic function over monad</p><p><ul class="org-ul"></p><p><li><p>maybe we need a new language</p><p>with type checker and type class to do this</p></li></ul></p></li>

<li><p>list monad</p></li></ul>
</div>
</div>

<div id="outline-container-org24e44a5" class="outline-3">
<h3 id="org24e44a5">process calculi</h3>
<div class="outline-text-3" id="text-org24e44a5">
</div><div id="outline-container-orgad2472f" class="outline-4">
<h4 id="orgad2472f">CSP</h4>
</div>

<div id="outline-container-orge3c38f8" class="outline-4">
<h4 id="orge3c38f8">actor</h4>
<div class="outline-text-4" id="text-orge3c38f8">
<ul class="org-ul">
<li><p>station</p></li>
<li><p>process</p></li>
<li><p>receive message and send message</p></li>
<li><p>message across the net</p></li>
<li><p>[maybe] (# &#x2026;) for message</p></li></ul>
</div>
</div>
</div>

<div id="outline-container-org2d8b20c" class="outline-3">
<h3 id="org2d8b20c">from minikanren</h3>
<div class="outline-text-3" id="text-org2d8b20c">
<ul class="org-ul">
<li><p>logic programming module</p></li></ul>
</div>
</div>

<div id="outline-container-org9cbe7de" class="outline-3">
<h3 id="org9cbe7de">sexp syntax for org</h3>
<div class="outline-text-3" id="text-org9cbe7de">
<ul class="org-ul">
<li><p>use jojo to write tangle</p></li>
<li><p>parse org</p></li></ul>
</div>
</div>

<div id="outline-container-org18b7527" class="outline-3">
<h3 id="org18b7527">sexp syntax for html</h3>
</div>

<div id="outline-container-orgf384617" class="outline-3">
<h3 id="orgf384617">sexp syntax for c</h3>
</div>
</div>

<div id="outline-container-orge9f584c" class="outline-2">
<h2 id="orge9f584c"><span class="todo _note_">[note]</span> </h2>
<div class="outline-text-2" id="text-orge9f584c">
</div><div id="outline-container-org8105c52" class="outline-3">
<h3 id="org8105c52">(data)</h3>
<div class="outline-text-3" id="text-org8105c52">
<ul class="org-ul">
<li><p>type-name is the same as constructor-name</p><p>thus I use (data) instead of (type)</p></li></ul>
</div>
</div>
</div>

<div id="outline-container-orge3d7169" class="outline-2">
<h2 id="orge3d7169">flag</h2>
<div class="outline-text-2" id="text-orge3d7169">
<div class="org-src-container">

<pre class="src src-jojo">core-flag-on
test-flag-on
repl-flag-off
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c7ec50" class="outline-2">
<h2 id="org2c7ec50">&lt;int&gt;</h2>
<div class="outline-text-2" id="text-org2c7ec50">
</div><div id="outline-container-org68478e4" class="outline-3">
<h3 id="org68478e4">even &amp; odd</h3>
<div class="outline-text-3" id="text-org68478e4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> even? <span style="color: #ae81ff;">2</span> mod <span style="color: #ae81ff;">0</span> eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> odd? even? not<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd3677dc" class="outline-2">
<h2 id="orgd3677dc">&lt;jo&gt;</h2>
<div class="outline-text-2" id="text-orgd3677dc">
</div><div id="outline-container-org9b12ec9" class="outline-3">
<h3 id="org9b12ec9">jo-append</h3>
<div class="outline-text-3" id="text-org9b12ec9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo1</span> <span style="color: #a6e22e;">:jo2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:jo1</span> jo-&gt;string
  <span style="color: #a6e22e;">:jo2</span> jo-&gt;string
  string-append
  string-&gt;jo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org777b626" class="outline-3">
<h3 id="org777b626">tag-jo-&gt;jo</h3>
<div class="outline-text-3" id="text-org777b626">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tag-jo-&gt;jo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:tag-jo</span> tag-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- tag-jo-&gt;jo fail"</span> string-write newline
      <span style="color: #e6db74;">"  jo is not tag jo : "</span> string-write <span style="color: #a6e22e;">:tag-jo</span> jo-write newline
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-jo</span> jo-&gt;string <span style="color: #fd971f;">:tag-string!</span>
  <span style="color: #a6e22e;">:tag-string</span> string-length <span style="color: #fd971f;">:tag-string-length!</span>
  <span style="color: #a6e22e;">:tag-string</span> <span style="color: #ae81ff;">1</span> <span style="color: #a6e22e;">:tag-string-length</span> dec string-slice
  string-&gt;jo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d99735" class="outline-3">
<h3 id="org6d99735">jo-&gt;tag-jo</h3>
<div class="outline-text-3" id="text-org6d99735">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-&gt;tag-jo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> tag jo<span style="color: #696969;">)</span>
  '&lt; <span style="color: #a6e22e;">:jo</span> '&gt; jo-append jo-append<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4b0c6ad" class="outline-2">
<h2 id="org4b0c6ad">array</h2>
<div class="outline-text-2" id="text-org4b0c6ad">
</div><div id="outline-container-org3ef8393" class="outline-3">
<h3 id="org3ef8393">array-eqv?</h3>
<div class="outline-text-3" id="text-org3ef8393">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> array-length
      <span style="color: #a6e22e;">:y</span> array-length
      eq? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #ae81ff;">0</span> array-eqv?/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-eqv?/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:x</span> array-length gteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">true</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:index</span> array-ref
      <span style="color: #a6e22e;">:pred</span> apply not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org10e0573" class="outline-2">
<h2 id="org10e0573">list</h2>
<div class="outline-text-2" id="text-org10e0573">
</div><div id="outline-container-org304a386" class="outline-3">
<h3 id="org304a386">&lt;null&gt; &amp; &lt;cons&gt;</h3>
<div class="outline-text-3" id="text-org304a386">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #ae81ff;">.car</span> .cdr<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cons
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup null? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup cons? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> new <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- cons fail"</span> string-write newline
  <span style="color: #e6db74;">"  cdr of cons must be &lt;null&gt; or &lt;cons&gt;"</span> string-write newline
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org634fb34" class="outline-3">
<h3 id="org634fb34">list?</h3>
<div class="outline-text-3" id="text-org634fb34">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgadaa2f9" class="outline-3">
<h3 id="orgadaa2f9">array-&gt;list</h3>
<div class="outline-text-3" id="text-orgadaa2f9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-&gt;list <span style="color: #ae81ff;">0</span> right-of-array-&gt;list<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> right-of-array-&gt;list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length gteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref
              swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf7e919" class="outline-3">
<h3 id="orgdf7e919">list-spread</h3>
<div class="outline-text-3" id="text-orgdf7e919">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-spread <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb208c76" class="outline-3">
<h3 id="orgb208c76">list-length</h3>
<div class="outline-text-3" id="text-orgb208c76">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-length <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #ae81ff;">0</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> inc<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org21779d6" class="outline-3">
<h3 id="org21779d6">list-any?</h3>
<div class="outline-text-3" id="text-org21779d6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-any? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc9df4" class="outline-3">
<h3 id="orgfc9df4">list-every?</h3>
<div class="outline-text-3" id="text-orgfc9df4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-every? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9f65e9" class="outline-3">
<h3 id="org9f65e9">list-append</h3>
<div class="outline-text-3" id="text-org9f65e9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:left</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:left</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:right</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:left</span> <span style="color: #ae81ff;">.car</span> swap cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org935e82d" class="outline-3">
<h3 id="org935e82d">tail-cons</h3>
<div class="outline-text-3" id="text-org935e82d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-cons null cons list-append<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc66b6f3" class="outline-3">
<h3 id="orgc66b6f3">list-left</h3>
<div class="outline-text-3" id="text-orgc66b6f3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-left <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf72e132" class="outline-3">
<h3 id="orgf72e132">list-right</h3>
<div class="outline-text-3" id="text-orgf72e132">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-right <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1ee8fe3" class="outline-3">
<h3 id="org1ee8fe3">list-split</h3>
<div class="outline-text-3" id="text-org1ee8fe3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> left right<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null <span style="color: #a6e22e;">:list</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
              <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #fd971f;">:right!</span> cons <span style="color: #a6e22e;">:right</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org121689e" class="outline-3">
<h3 id="org121689e">list-map</h3>
<div class="outline-text-3" id="text-org121689e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9768e21" class="outline-3">
<h3 id="org9768e21">list-for-each</h3>
<div class="outline-text-3" id="text-org9768e21">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-for-each <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:fun</span> apply <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc8c7b0f" class="outline-3">
<h3 id="orgc8c7b0f">list-filter</h3>
<div class="outline-text-3" id="text-orgc8c7b0f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>null<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge3df9c0" class="outline-3">
<h3 id="orge3df9c0">list-reverse</h3>
<div class="outline-text-3" id="text-orge3df9c0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse null swap list-reverse-swap-append<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-reverse-swap-append <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> left <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> swap cons <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf8b39b" class="outline-3">
<h3 id="orgdf8b39b">list-eqv?</h3>
<div class="outline-text-3" id="text-orgdf8b39b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-eqv? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:l1</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null? <span style="color: #a6e22e;">:l2</span> null? and<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l2</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:eqv</span> apply not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l1</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:l2</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:eqv</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4e0165b" class="outline-2">
<h2 id="org4e0165b">sexp</h2>
<div class="outline-text-2" id="text-org4e0165b">
</div><div id="outline-container-org9457ba" class="outline-3">
<h3 id="org9457ba"><span class="todo _note_">[note]</span> sexp</h3>
<div class="outline-text-3" id="text-org9457ba">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> sexp
  = sexp list <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> or <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span>
  | <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc936def" class="outline-3">
<h3 id="orgc936def">read-sexp</h3>
<div class="outline-text-3" id="text-orgc936def">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> round-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>round-ket read-sexp-list-until-ket<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> square-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'begin square-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> flower-bar eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'clo flower-ket read-sexp-list-until-ket cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> doublequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>read-string<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> singlequote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'<span style="color: #66d9ef; font-weight: bold;">quote</span> null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> backquote eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>'partquote null cons <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> :jo<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-until-ket <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  read-jo <span style="color: #fd971f;">:jo!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:ket</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> null
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> jo-unread read-sexp<span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:ket</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #f92672; font-weight: bold;">,</span> cons<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org24f93d5" class="outline-3">
<h3 id="org24f93d5">sexp-write</h3>
<div class="outline-text-3" id="text-org24f93d5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #797979;">[</span>'null jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span>round-bar jo-write <span style="color: #a6e22e;">:sexp</span> sexp-list-write
            round-ket jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span>doublequote jo-write <span style="color: #a6e22e;">:sexp</span> string-write
              doublequote jo-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-write<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-write space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9ad57ba" class="outline-2">
<h2 id="org9ad57ba">repl</h2>
<div class="outline-text-2" id="text-org9ad57ba">
</div><div id="outline-container-org687c8a8" class="outline-3">
<h3 id="org687c8a8">repl</h3>
<div class="outline-text-3" id="text-org687c8a8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  reading-stack-push
  repl/loop
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl/loop
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp sexp-eval
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> repl-flag <span style="color: #66d9ef; font-weight: bold;">then</span> print-data-stack<span style="color: #696969;">)</span>
  <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> repl-over-the-repl-in-c
  repl/loop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org19b9280" class="outline-3">
<h3 id="org19b9280">sexp-eval</h3>
<div class="outline-text-3" id="text-org19b9280">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-eval<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb04f1db" class="outline-3">
<h3 id="orgb04f1db">jo-eval</h3>
<div class="outline-text-3" id="text-orgb04f1db">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-eval <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?
     <span style="color: #a6e22e;">:jo</span> set-local-jo? or
     <span style="color: #a6e22e;">:jo</span> dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo? or
     <span style="color: #a6e22e;">:jo</span> field-jo? or
     <span style="color: #a6e22e;">:jo</span> set-field-jo? or<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo-eval can not handle : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-bound? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #e6db74;">"- jo is not bound : "</span> string-write
     <span style="color: #a6e22e;">:jo</span> jo-write newline<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> sexp-compile-jojo apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2eb3d19" class="outline-2">
<h2 id="org2eb3d19">compiler</h2>
<div class="outline-text-2" id="text-org2eb3d19">
</div><div id="outline-container-org5594304" class="outline-3">
<h3 id="org5594304">&lt;macro&gt;</h3>
<div class="outline-text-3" id="text-org5594304">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;macro&gt;</span> <span style="color: #ae81ff;">.expend</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c68026" class="outline-3">
<h3 id="org8c68026">(+macro)</h3>
<div class="outline-text-3" id="text-org8c68026">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +macro <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> body-compile-jojo macro
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c4d06d" class="outline-3">
<h3 id="org3c4d06d">body-compile-jojo</h3>
<div class="outline-text-3" id="text-org3c4d06d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-compile-jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jojo&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:body</span> body-compile
  emit-jojo-end
  <span style="color: #a6e22e;">:address</span> new-jojo
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc133fdf" class="outline-3">
<h3 id="orgc133fdf">sexp-compile-jojo</h3>
<div class="outline-text-3" id="text-orgc133fdf">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile-jojo null cons body-compile-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3e3a80" class="outline-3">
<h3 id="orga3e3a80">sexp-list-compile</h3>
<div class="outline-text-3" id="text-orga3e3a80">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-compile
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org843825a" class="outline-3">
<h3 id="org843825a">macro-expend</h3>
<div class="outline-text-3" id="text-org843825a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> macro-expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> jo-ref <span style="color: #fd971f;">:head!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:head</span> tag '<span style="color: #66d9ef; font-weight: bold;">&lt;macro&gt;</span> eq?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:head</span> <span style="color: #ae81ff;">.expend</span> apply <span style="color: #66d9ef; font-weight: bold;">recur</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d52fea" class="outline-3">
<h3 id="org6d52fea">macro-compile</h3>
<div class="outline-text-3" id="text-org6d52fea">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> macro-compile <span style="color: #ae81ff;">.expend</span> apply sexp-compile<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2186e20" class="outline-3">
<h3 id="org2186e20">sexp-compile</h3>
<div class="outline-text-3" id="text-org2186e20">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:sexp</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span>   <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> sexp-compile/cons<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> jo-compile<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-compile/cons <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:sexp</span> macro-expend <span style="color: #fd971f;">:primitive-sexp!</span>
  <span style="color: #a6e22e;">:primitive-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #a6e22e;">:primitive-sexp</span> <span style="color: #ae81ff;">.car</span>
  jo-ref apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org67adf27" class="outline-3">
<h3 id="org67adf27">body-compile</h3>
<div class="outline-text-3" id="text-org67adf27">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-&gt;tail-sexp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> tail-sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> cons? not<span style="color: #797979;">]</span> <span style="color: #a6e22e;">:sexp</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> 'if eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>'tail-if <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> 'begin eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span>'tail-begin <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> :sexp<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
     macro-expend
     sexp-&gt;tail-sexp
     sexp-compile<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> sexp-compile
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6c0c19" class="outline-3">
<h3 id="orga6c0c19">jo-compile</h3>
<div class="outline-text-3" id="text-orga6c0c19">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> int-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-&gt;int emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> dynamic-local-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-dynamic-local<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-dynamic-local-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-dynamic-local<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> field-jo?<span style="color: #797979;">]</span>     <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-field<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> set-field-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit-set-field<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> comma eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:jo</span> jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e5e6c5" class="outline-3">
<h3 id="org9e5e6c5">body-run</h3>
<div class="outline-text-3" id="text-org9e5e6c5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> body-run body-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org25d79e0" class="outline-3">
<h3 id="org25d79e0">sexp-run</h3>
<div class="outline-text-3" id="text-org25d79e0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-run sexp-compile-jojo apply<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8b55c8" class="outline-2">
<h2 id="org8b55c8">basic syntax</h2>
<div class="outline-text-2" id="text-org8b55c8">
</div><div id="outline-container-orgddfff68" class="outline-3">
<h3 id="orgddfff68">(quote)</h3>
<div class="outline-text-3" id="text-orgddfff68">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #B380A8;">{</span>sexp-quote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
        <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-quote-compile
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-quote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span>

      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
       'swap jo-emit
       'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c04876" class="outline-3">
<h3 id="org2c04876">(partquote)</h3>
<div class="outline-text-3" id="text-org2c04876">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> partquote <span style="color: #B380A8;">{</span>sexp-partquote-compile<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:sexp</span> sexp-list-partquote-compile
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span> emit-lit<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> this function depends on <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-list-partquote-compile <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>null emit-lit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> emit-lit
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> '<span style="color: #ae81ff;">@</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> list macro-compile
     'swap jo-emit
     'list-append jo-emit<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
     'swap jo-emit
     'cons jo-emit<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org36157ce" class="outline-3">
<h3 id="org36157ce">(if)</h3>
<div class="outline-text-3" id="text-org36157ce">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  emit-jmp <span style="color: #fd971f;">:address-for-jmp!</span>
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
  <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jmp</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> sexp-list-compile
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
     <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-else-then<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> if-then<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (if) fail"</span> string-write newline
          <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
          <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
          <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d39efe" class="outline-3">
<h3 id="org8d39efe">(tail-if)</h3>
<div class="outline-text-3" id="text-org8d39efe">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
  <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:question</span> sexp-list-compile
  emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
  <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
  <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
     <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-else-then<span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-then<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (tail-if) fail"</span> string-write newline
          <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
          <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
          <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>


<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-else-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then-else</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:then-else</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:then</span> <span style="color: #a6e22e;">:else</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:question</span> sexp-list-compile
    emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
    <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    emit-jmp <span style="color: #fd971f;">:address-for-jmp!</span>
    <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here
    <span style="color: #a6e22e;">:else</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    <span style="color: #a6e22e;">:address-for-jmp</span> set-offset-to-here<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-split <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:then</span><span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:question</span> sexp-list-compile
    emit-jz <span style="color: #fd971f;">:address-for-jz!</span>
    <span style="color: #a6e22e;">:then</span> <span style="color: #ae81ff;">.cdr</span> body-compile '<span style="color: #66d9ef; font-weight: bold;">end</span> jo-emit
    <span style="color: #a6e22e;">:address-for-jz</span> set-offset-to-here<span style="color: #696969;">)</span>

  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-if <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #B380A8;">}</span> list-any?
       <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any? and<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-else-then<span style="color: #797979;">]</span>

      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">then</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #797979;">]</span>
      <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> tail-if-then<span style="color: #797979;">]</span>

      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- (tail-if) fail"</span> string-write newline
            <span style="color: #e6db74;">"  the body dose not has 'then"</span> string-write newline
            <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
            <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b36a34" class="outline-3">
<h3 id="org8b36a34">(clo)</h3>
<div class="outline-text-3" id="text-org8b36a34">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> core-clo
  body-compile-jojo emit-lit
  'current-local-env jo-emit
  'closure jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb2c7a5" class="outline-3">
<h3 id="orgeb2c7a5">(cond)</h3>
<div class="outline-text-3" id="text-orgeb2c7a5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     'cond/miss-match-report tail-cons
     '<span style="color: #66d9ef; font-weight: bold;">debug</span> tail-cons<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> cond/expend-if-then
     '<span style="color: #66d9ef; font-weight: bold;">else</span> tail-cons
     <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> tail-cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/miss-match-report
  <span style="color: #e6db74;">"- runtime (cond) miss match"</span> string-write newline<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
    `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?
                <span style="color: #66d9ef; font-weight: bold;">then</span> '<span style="color: #66d9ef; font-weight: bold;">true</span>
                <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:question</span><span style="color: #696969;">))</span>
         <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cond/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:question</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:question</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span>'if null cons
         '<span style="color: #66d9ef; font-weight: bold;">true</span> tail-cons
         '<span style="color: #66d9ef; font-weight: bold;">then</span> tail-cons
         <span style="color: #a6e22e;">:answer</span> tail-cons<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span>
        <span style="color: #797979;">[</span>'if null cons
         <span style="color: #a6e22e;">:question</span> tail-cons
         '<span style="color: #66d9ef; font-weight: bold;">then</span> tail-cons
         <span style="color: #a6e22e;">:answer</span> tail-cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7763220" class="outline-3">
<h3 id="org7763220">(-&gt;)</h3>
<div class="outline-text-3" id="text-org7763220">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> arrow/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span>local-jo-&gt;set-local-jo<span style="color: #B380A8;">}</span> list-map
  list-reverse
  'begin swap cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b6eee0" class="outline-3">
<h3 id="org2b6eee0">jo-list-compile-cells</h3>
<div class="outline-text-3" id="text-org2b6eee0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> jo-list-compile-cells <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;address&gt;</span><span style="color: #696969;">)</span>
  compiling-stack-tos <span style="color: #fd971f;">:address!</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span>jo-emit<span style="color: #B380A8;">}</span> list-for-each
  emit-zero
  <span style="color: #a6e22e;">:address</span> cells-copy <span style="color: #fd971f;">:new-address!</span>
  compiling-stack-drop <span style="color: #a6e22e;">:address</span> compiling-stack-push
  <span style="color: #a6e22e;">:new-address</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org34ee451" class="outline-3">
<h3 id="org34ee451">(+data)</h3>
<div class="outline-text-3" id="text-org34ee451">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-data <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> tag-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- (+data) fail"</span> string-write newline
      <span style="color: #e6db74;">"  name must be of form &lt;...&gt;"</span> string-write newline
      <span style="color: #e6db74;">"  body : "</span> string-write <span style="color: #a6e22e;">:body</span> sexp-list-write newline
      <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>field-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address!</span>

  <span style="color: #a6e22e;">:address</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind-data<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org16f10e1" class="outline-3">
<h3 id="org16f10e1">(+gene)</h3>
<div class="outline-text-3" id="text-org16f10e1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-gene <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>local-jo?<span style="color: #B380A8;">}</span> list-filter
  list-length
  <span style="color: #a6e22e;">:name</span> name-bind-gene

  <span style="color: #a6e22e;">:rest-body</span> body-compile-jojo
  <span style="color: #a6e22e;">:name</span> name-bind-disp-default-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea0c709" class="outline-3">
<h3 id="orgea0c709">(+disp)</h3>
<div class="outline-text-3" id="text-orgea0c709">
<ul class="org-ul">
<li><p>this syntax always use &lt;jojo&gt; as disp</p></li></ul>

<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> plus-disp <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:rest-body!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:arrow-sexp!</span>

  <span style="color: #a6e22e;">:arrow-sexp</span> <span style="color: #ae81ff;">.cdr</span>
  <span style="color: #B380A8;">{</span>'<span style="color: #66d9ef; font-weight: bold;">--</span> eq?<span style="color: #B380A8;">}</span> list-left
  <span style="color: #B380A8;">{</span>tag-jo?<span style="color: #B380A8;">}</span> list-filter
  jo-list-compile-cells <span style="color: #fd971f;">:address-of-tags!</span>

  <span style="color: #a6e22e;">:rest-body</span> body-compile-jojo
  <span style="color: #a6e22e;">:address-of-tags</span>
  <span style="color: #a6e22e;">:name</span> name-bind-disp-to-jojo<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org66b3c21" class="outline-2">
<h2 id="org66b3c21">reboot basic syntax &#x2013; the order matters</h2>
<div class="outline-text-2" id="text-org66b3c21">
</div><div id="outline-container-org3156d2e" class="outline-3">
<h3 id="org3156d2e">re-define (+jojo)</h3>
<div class="outline-text-3" id="text-org3156d2e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +jojo <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> sexp list <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> body-compile-jojo
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa8273d" class="outline-3">
<h3 id="orgaa8273d">run repl-over-the-repl-in-c</h3>
<div class="outline-text-3" id="text-orgaa8273d">
<div class="org-src-container">

<pre class="src src-jojo">repl-over-the-repl-in-c
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdcf437e" class="outline-3">
<h3 id="orgdcf437e">re-define new keywords</h3>
<div class="outline-text-3" id="text-orgdcf437e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> note drop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> begin sexp-list-compile<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> tail-begin body-compile<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> if core-if<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> clo core-clo<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> cond cond/expend<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> <span style="color: #66d9ef; font-weight: bold;">-&gt;</span> arrow/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +data plus-data<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +gene plus-gene<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +disp plus-disp<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb5f925b" class="outline-2">
<h2 id="orgb5f925b">more syntax</h2>
<div class="outline-text-2" id="text-orgb5f925b">
</div><div id="outline-container-org84a5b55" class="outline-3">
<h3 id="org84a5b55">(array)</h3>
<div class="outline-text-3" id="text-org84a5b55">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> array array/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org85dea47" class="outline-3">
<h3 id="org85dea47">(list)</h3>
<div class="outline-text-3" id="text-org85dea47">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> list list/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  'begin null cons
  'mark tail-cons
  <span style="color: #a6e22e;">:body</span> list-append
  'collect tail-cons
  'array-&gt;list tail-cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4528f98" class="outline-3">
<h3 id="org4528f98">(assert) &amp; (assert!)</h3>
<div class="outline-text-3" id="text-org4528f98">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> assert assert/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> <span style="color: #fd971f;">assert!</span> assert!/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> assert!/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> list-spread<span style="color: #696969;">)</span>
       <span style="color: #66d9ef; font-weight: bold;">then</span>
       <span style="color: #66d9ef; font-weight: bold;">else</span>
       <span style="color: #e6db74;">"- (assert!) fail"</span> string-write newline
       <span style="color: #e6db74;">"  assertion : "</span> string-write
       <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span><span style="color: #696969;">))</span> sexp-list-write newline
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org35f42f7" class="outline-3">
<h3 id="org35f42f7">(test)</h3>
<div class="outline-text-3" id="text-org35f42f7">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> test <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> test-flag <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:body</span> begin<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdbc879c" class="outline-3">
<h3 id="orgdbc879c">(let-bind) &#x2013; moand interface</h3>
<div class="outline-text-3" id="text-orgdbc879c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> example
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">let-bind</span> bind-maybe
    <span style="color: #a6e22e;">:l</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #a6e22e;">:r</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span>
    <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span>
     <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span>
     bind-maybe<span style="color: #B380A8;">}</span>
    bind-maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.l</span> tree-zip<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:l!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:t1</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #ae81ff;">.r</span> zip-tree<span style="color: #797979;">]</span> <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:r!</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:l</span> <span style="color: #a6e22e;">:r</span> node return-maybe<span style="color: #797979;">]</span><span style="color: #B380A8;">}</span> bind-maybe<span style="color: #B380A8;">}</span> bind-maybe<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> let-bind let-bind/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> let-bind/expend-recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> let-bind/expend-recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> list-length <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #797979;">]</span>

    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo?<span style="color: #797979;">]</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span> local-jo-&gt;set-local-jo
          <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    `<span style="color: #797979;">[</span><span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">)</span>
      <span style="color: #B380A8;">{</span>drop
       <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span> <span style="color: #a6e22e;">:rest</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
      <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:binder</span><span style="color: #696969;">)</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org942d62d" class="outline-3">
<h3 id="org942d62d">(case)</h3>
<div class="outline-text-3" id="text-org942d62d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+macro</span> case case/expend<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">begin</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>tag<span style="color: #B380A8;">}</span> list-map
     <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> case/expend-rest<span style="color: #696969;">)))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-rest <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> list-length <span style="color: #ae81ff;">2</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"- runtime (case) miss match"</span> string-write newline
            <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
     list-append<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> case/expend-if-then
     `<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">))</span>
     list-append<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/expend-if-then <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #a6e22e;">:answer</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> '<span style="color: #66d9ef; font-weight: bold;">else</span> eq?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tags</span> cons?<span style="color: #797979;">]</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span> <span style="color: #ae81ff;">.cdr</span><span style="color: #696969;">))</span> <span style="color: #B380A8;">{</span>case/match?<span style="color: #B380A8;">}</span> list-eqv?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:answer</span><span style="color: #696969;">))</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span>
        `<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #ae81ff;">.car</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:tags</span><span style="color: #696969;">))</span> case/match?
             <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> :answer<span style="color: #696969;">))))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> case/match? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag2</span> underscore-jo?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:tag1</span> <span style="color: #a6e22e;">:tag2</span> eq?<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3881e7f" class="outline-3">
<h3 id="org3881e7f">(+var)</h3>
<div class="outline-text-3" id="text-org3881e7f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +var <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:body!</span>
  'mark <span style="color: #a6e22e;">:body</span> cons
  'collect tail-cons
  body-run <span style="color: #fd971f;">:array!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">1</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:array</span> <span style="color: #ae81ff;">0</span> array-ref <span style="color: #a6e22e;">:name</span> name-bind <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- (+var) fail"</span> w nl
  <span style="color: #e6db74;">"  body eval to not one value"</span> w nl
  <span style="color: #e6db74;">"  name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
  <span style="color: #e6db74;">"  body : "</span> w <span style="color: #a6e22e;">:body</span> w nl
  <span style="color: #e6db74;">"  number of values : "</span> w <span style="color: #a6e22e;">:array</span> array-length w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b9201e" class="outline-3">
<h3 id="org6b9201e">(set)</h3>
<div class="outline-text-3" id="text-org6b9201e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> set <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-rebind<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5718786" class="outline-3">
<h3 id="org5718786">(get)</h3>
<div class="outline-text-3" id="text-org5718786">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> get <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-get<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2fce092" class="outline-3">
<h3 id="org2fce092">(+atom)</h3>
<div class="outline-text-3" id="text-org2fce092">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +atom <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:gc-actor-name!</span>
  `<span style="color: #696969;">((</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:gc-actor-name</span><span style="color: #696969;">))</span> name-get
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">quote</span> <span style="color: #696969;">(</span><span style="color: #ae81ff;">@</span> <span style="color: #a6e22e;">:name</span><span style="color: #696969;">))</span> name-bind-atom<span style="color: #696969;">)</span>
  begin<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb4a20be" class="outline-2">
<h2 id="orgb4a20be">monad</h2>
<div class="outline-text-2" id="text-orgb4a20be">
</div><div id="outline-container-org24f3d66" class="outline-3">
<h3 id="org24f3d66"><span class="todo _note_">[note]</span> bind and compose can implement each ohter</h3>
<div class="outline-text-3" id="text-org24f3d66">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #797979;">]</span><span style="color: #696969;">)</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:2m</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #797979;">]</span><span style="color: #696969;">))</span>
    dummy <span style="color: #B380A8;">{</span>drop <span style="color: #a6e22e;">:1m</span><span style="color: #B380A8;">}</span> <span style="color: #a6e22e;">:1-2m</span> compose apply<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> compose
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-1m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #696969;">))</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:1-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;1&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">))</span>
     <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">:</span> <span style="color: #a6e22e;">:0-2m</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:&lt;0&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:&lt;2&gt;</span> <span style="color: #696969;">)))</span>
    <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:0-1m</span> apply <span style="color: #a6e22e;">:1-2m</span> bind<span style="color: #B380A8;">}</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffd29e0" class="outline-3">
<h3 id="orgffd29e0">maybe monad</h3>
<div class="outline-text-3" id="text-orgffd29e0">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> .v<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-maybe just<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-maybe <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:m</span> <span style="color: #a6e22e;">:v-&gt;m</span> <span style="color: #66d9ef; font-weight: bold;">--</span> maybe<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:m</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;nothing&gt;</span> nothing
    <span style="color: #66d9ef; font-weight: bold;">&lt;just&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:m</span> <span style="color: #ae81ff;">.v</span> <span style="color: #a6e22e;">:v-&gt;m</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org528b69c" class="outline-3">
<h3 id="org528b69c"><span class="todo _gt__lt_">&gt;&lt;</span> list monad</h3>
<div class="outline-text-3" id="text-org528b69c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> return-list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> bind-list<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6be26be" class="outline-2">
<h2 id="org6be26be">pair</h2>
<div class="outline-text-2" id="text-org6be26be">
</div><div id="outline-container-orgc420083" class="outline-3">
<h3 id="orgc420083">&lt;pair&gt;</h3>
<div class="outline-text-3" id="text-orgc420083">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #ae81ff;">.l</span> <span style="color: #ae81ff;">.r</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcaaf656" class="outline-2">
<h2 id="orgcaaf656">combinator</h2>
<div class="outline-text-2" id="text-orgcaaf656">
</div><div id="outline-container-org8b30356" class="outline-3">
<h3 id="org8b30356">times</h3>
<div class="outline-text-3" id="text-org8b30356">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> <span style="color: #66d9ef; font-weight: bold;">times</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:n</span> <span style="color: #ae81ff;">0</span> lteq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:fun</span> apply
  <span style="color: #a6e22e;">:fun</span> <span style="color: #a6e22e;">:n</span> dec <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge6c56f3" class="outline-2">
<h2 id="orge6c56f3">w &#x2013; write &#x2013; gene</h2>
<div class="outline-text-2" id="text-orge6c56f3">
</div><div id="outline-container-org6804da5" class="outline-3">
<h3 id="org6804da5">w</h3>
<div class="outline-text-3" id="text-org6804da5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> write w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> data-print<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;int&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> int-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> string-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;jo&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> jo-write<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;byte&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> <span style="color: #e6db74;">"(byte "</span> w byte-write <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b05d9c" class="outline-3">
<h3 id="org8b05d9c">list-write</h3>
<div class="outline-text-3" id="text-org8b05d9c">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"()"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> list-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"("</span> w <span style="color: #a6e22e;">:list</span> list-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> null?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> w space
          <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4d653a" class="outline-3">
<h3 id="orga4d653a">array-write</h3>
<div class="outline-text-3" id="text-orga4d653a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span> array-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(array)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(array "</span> w <span style="color: #a6e22e;">:array</span> <span style="color: #ae81ff;">0</span> array-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> array-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:index</span> <span style="color: #a6e22e;">:array</span> array-length <span style="color: #ae81ff;">1</span> sub eq? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> array-ref w space
  <span style="color: #a6e22e;">:array</span> <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb91890a" class="outline-3">
<h3 id="orgb91890a">pair-write</h3>
<div class="outline-text-3" id="text-orgb91890a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span><span style="color: #696969;">)</span> pair-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> pair-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:pair</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.l</span> w space
  <span style="color: #a6e22e;">:pair</span> <span style="color: #ae81ff;">.r</span> w space
  <span style="color: #e6db74;">"pair"</span> w<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org48e47a6" class="outline-3">
<h3 id="org48e47a6">nl</h3>
<div class="outline-text-3" id="text-org48e47a6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> nl newline<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org899d3c1" class="outline-2">
<h2 id="org899d3c1">equal? &#x2013; gene</h2>
<div class="outline-text-2" id="text-org899d3c1">
</div><div id="outline-container-org795d71a" class="outline-3">
<h3 id="org795d71a">equal?</h3>
<div class="outline-text-3" id="text-org795d71a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+gene</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> <span style="color: #a6e22e;">:x</span> <span style="color: #a6e22e;">:y</span> eq?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;string&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span> string-eq?<span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.car</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.cdr</span> equal?<span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;array&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span>equal?<span style="color: #B380A8;">}</span> array-eqv?<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #a6e22e;">:y</span> <span style="color: #66d9ef; font-weight: bold;">&lt;pair&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.l</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.l</span> equal? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.r</span> <span style="color: #a6e22e;">:y</span> <span style="color: #ae81ff;">.r</span> equal?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4fd45fc" class="outline-2">
<h2 id="org4fd45fc">more list</h2>
<div class="outline-text-2" id="text-org4fd45fc">
</div><div id="outline-container-orgdb086ec" class="outline-3">
<h3 id="orgdb086ec">list-foldr</h3>
<div class="outline-text-3" id="text-orgdb086ec">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldr <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:a-b-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:a-b-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org89ccae1" class="outline-3">
<h3 id="org89ccae1">list-foldl</h3>
<div class="outline-text-3" id="text-org89ccae1">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-foldl <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> a <span style="color: #a6e22e;">:list</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">--</span> b<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> <span style="color: #a6e22e;">:b</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #a6e22e;">:b</span> <span style="color: #a6e22e;">:b-a-&gt;b</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span>
            <span style="color: #a6e22e;">:b-a-&gt;b</span> apply<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org894c37e" class="outline-3">
<h3 id="org894c37e">list-member?</h3>
<div class="outline-text-3" id="text-org894c37e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-member? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:x</span> equal?<span style="color: #B380A8;">}</span> list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6d39b69" class="outline-2">
<h2 id="org6d39b69">table</h2>
<div class="outline-text-2" id="text-org6d39b69">
</div><div id="outline-container-org7d9fe27" class="outline-3">
<h3 id="org7d9fe27">&lt;null-table&gt; &amp; &lt;cons-table&gt;</h3>
<div class="outline-text-3" id="text-org7d9fe27">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span>
<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+data</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #ae81ff;">.key</span> <span style="color: #ae81ff;">.value</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgac3a4ee" class="outline-3">
<h3 id="orgac3a4ee">table?</h3>
<div class="outline-text-3" id="text-orgac3a4ee">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:x</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:x</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4188759" class="outline-3">
<h3 id="org4188759">list-&gt;table</h3>
<div class="outline-text-3" id="text-org4188759">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:list</span> list-length odd? <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #e6db74;">"- list-&gt;table fail"</span> w nl
      <span style="color: #e6db74;">"  length of list is not even"</span> w nl
      <span style="color: #e6db74;">"  length : "</span> w <span style="color: #a6e22e;">:list</span> list-length w nl
      <span style="color: #e6db74;">"  list : "</span> w <span style="color: #a6e22e;">:list</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> list-&gt;table/recur<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-&gt;table/recur <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">case</span> <span style="color: #a6e22e;">:list</span>
    <span style="color: #66d9ef; font-weight: bold;">&lt;null&gt;</span> null-table
    <span style="color: #66d9ef; font-weight: bold;">&lt;cons&gt;</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:list</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span>
            cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org200ba12" class="outline-3">
<h3 id="org200ba12">table</h3>
<div class="outline-text-3" id="text-org200ba12">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table list macro-compile 'list-&gt;table jo-emit<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9ae8f79" class="outline-3">
<h3 id="org9ae8f79">table-write</h3>
<div class="outline-text-3" id="text-org9ae8f79">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;null-table&gt;</span><span style="color: #696969;">)</span> drop <span style="color: #e6db74;">"(table)"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+disp</span> w <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;cons-table&gt;</span><span style="color: #696969;">)</span> table-write<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:table</span> null-table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #e6db74;">"(table)"</span> w <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"(table "</span> w <span style="color: #a6e22e;">:table</span> table-write/loop <span style="color: #e6db74;">")"</span> w<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-write/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
    <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w<span style="color: #797979;">]</span>
    <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> w space <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> w comma w space
          <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaeaa0ff" class="outline-3">
<h3 id="orgaeaa0ff">table-find</h3>
<div class="outline-text-3" id="text-orgaeaa0ff">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-find <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">--</span> value <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:key</span> equal?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:key</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org28128e" class="outline-3">
<h3 id="org28128e">table-contain?</h3>
<div class="outline-text-3" id="text-org28128e">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-contain? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:small</span> null-table?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:large</span> <span style="color: #a6e22e;">:small</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge9893e2" class="outline-3">
<h3 id="orge9893e2">table-merge</h3>
<div class="outline-text-3" id="text-orge9893e2">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-merge <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table <span style="color: #66d9ef; font-weight: bold;">true</span> or key <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:src</span> null-table?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #66d9ef; font-weight: bold;">true</span><span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> table-find<span style="color: #797979;">]</span>
        <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> equal?
            <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:base</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.value</span> cons-table
              <span style="color: #a6e22e;">:src</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org63f1430" class="outline-3">
<h3 id="org63f1430">table-equal?</h3>
<div class="outline-text-3" id="text-org63f1430">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-equal? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:t1</span> <span style="color: #a6e22e;">:t2</span> table-contain? not
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:t2</span> <span style="color: #a6e22e;">:t1</span> table-contain?<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf16957" class="outline-3">
<h3 id="orgdf16957">table-key-filter</h3>
<div class="outline-text-3" id="text-orgdf16957">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">recur</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org805ab7d" class="outline-3">
<h3 id="org805ab7d">table-key-map</h3>
<div class="outline-text-3" id="text-org805ab7d">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> table-key-map <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #a6e22e;">:table</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> null-table?<span style="color: #797979;">]</span> null-table
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.rest</span> <span style="color: #a6e22e;">:fun</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.key</span> <span style="color: #a6e22e;">:fun</span> apply
              <span style="color: #a6e22e;">:table</span> <span style="color: #ae81ff;">.value</span> cons-table<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4ca7502" class="outline-2">
<h2 id="org4ca7502">byte</h2>
<div class="outline-text-2" id="text-org4ca7502">
</div><div id="outline-container-orgb8b10b4" class="outline-3">
<h3 id="orgb8b10b4">(byte)</h3>
<div class="outline-text-3" id="text-orgb8b10b4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> byte <span style="color: #B380A8;">{</span>jo-&gt;byte emit-lit<span style="color: #B380A8;">}</span> list-for-each<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org75e097c" class="outline-2">
<h2 id="org75e097c">system</h2>
<div class="outline-text-2" id="text-org75e097c">
</div><div id="outline-container-org3870317" class="outline-3">
<h3 id="org3870317">cmd-list</h3>
<div class="outline-text-3" id="text-org3870317">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list <span style="color: #ae81ff;">0</span> cmd-list/loop<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> cmd-list/loop <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:index</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> cmd-number eq?<span style="color: #797979;">]</span> null
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:index</span> index-&gt;cmd-string
              <span style="color: #a6e22e;">:index</span> inc <span style="color: #66d9ef; font-weight: bold;">recur</span>
              cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3d9f0b" class="outline-3">
<h3 id="org3d9f0b">dash-prefixed-string?</h3>
<div class="outline-text-3" id="text-org3d9f0b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> dash-prefixed-string? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:str</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> string-length <span style="color: #ae81ff;">1</span> lt?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:str</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte -<span style="color: #696969;">)</span> eq?<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org502afb3" class="outline-3">
<h3 id="org502afb3">usr-jojo-dir</h3>
<div class="outline-text-3" id="text-org502afb3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> usr-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"USR_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #797979;">[</span><span style="color: #e6db74;">"HOME"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"/.jojo"</span> string-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"- usr-jojo-dir fail"</span> w nl
              <span style="color: #e6db74;">"  system env USR_JOJO_DIR is empty"</span> w nl
              <span style="color: #e6db74;">"  system env HOME is empty"</span> w nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8aea9f9" class="outline-3">
<h3 id="org8aea9f9">sys-jojo-dir</h3>
<div class="outline-text-3" id="text-org8aea9f9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sys-jojo-dir
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #e6db74;">"SYS_JOJO_DIR"</span> find-env-string<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #e6db74;">"/usr/lib/jojo"</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org41f2a78" class="outline-2">
<h2 id="org41f2a78">&lt;lib&gt;</h2>
<div class="outline-text-2" id="text-org41f2a78">
</div><div id="outline-container-orgd14f8b" class="outline-3">
<h3 id="orgd14f8b">lib-load</h3>
<div class="outline-text-3" id="text-orgd14f8b">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> lib-load current-reading-dir swap string-append lib-open<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7dee778" class="outline-2">
<h2 id="org7dee778">&lt;file&gt;</h2>
<div class="outline-text-2" id="text-org7dee778">
</div><div id="outline-container-orgfaa0fa4" class="outline-3">
<h3 id="orgfaa0fa4">maybe-drop-shabang</h3>
<div class="outline-text-3" id="text-orgfaa0fa4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> maybe-drop-shabang
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup input-stack-empty? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  reading-stack-push
  read-line <span style="color: #fd971f;">:line!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-length <span style="color: #ae81ff;">3</span> lteq?<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> <span style="color: #ae81ff;">0</span> <span style="color: #ae81ff;">2</span> string-slice <span style="color: #e6db74;">"#!"</span> string-eq?<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:line</span> string-unread<span style="color: #797979;">]</span><span style="color: #696969;">)</span>
  reading-stack-pop<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ed80d5" class="outline-3">
<h3 id="org6ed80d5">input-stack-read-sexp-list</h3>
<div class="outline-text-3" id="text-org6ed80d5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> input-stack-read-sexp-list
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;input-stack&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  reading-stack-push
  read-sexp-list-to-the-end
  reading-stack-pop input-stack-free<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb9fdcda" class="outline-3">
<h3 id="orgb9fdcda">read-sexp-list-to-the-end</h3>
<div class="outline-text-3" id="text-orgb9fdcda">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> read-sexp-list-to-the-end <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> has-jo? not <span style="color: #66d9ef; font-weight: bold;">then</span> null <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  read-sexp <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f33f78" class="outline-3">
<h3 id="org8f33f78">absolute-path?</h3>
<div class="outline-text-3" id="text-org8f33f78">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> absolute-path? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> string-length <span style="color: #ae81ff;">0</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> <span style="color: #ae81ff;">0</span> string-ref <span style="color: #696969;">(</span>byte /<span style="color: #696969;">)</span> eq?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgee6d44f" class="outline-3">
<h3 id="orgee6d44f">path-&gt;reading-path</h3>
<div class="outline-text-3" id="text-orgee6d44f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-&gt;reading-path <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> absolute-path?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> current-reading-dir <span style="color: #a6e22e;">:path</span> string-append<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4cde80" class="outline-3">
<h3 id="orgf4cde80">path-readable?</h3>
<div class="outline-text-3" id="text-orgf4cde80">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-readable? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-open-read
      <span style="color: #66d9ef; font-weight: bold;">then</span> file-close <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> drop <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfcbde76" class="outline-3">
<h3 id="orgfcbde76">path-load</h3>
<div class="outline-text-3" id="text-orgfcbde76">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span>
         <span style="color: #a6e22e;">:file</span> file-input-stack
         maybe-drop-shabang
         repl
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-load fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org18275dc" class="outline-2">
<h2 id="org18275dc">module</h2>
<div class="outline-text-2" id="text-org18275dc">
</div><div id="outline-container-orgf3fe44e" class="outline-3">
<h3 id="orgf3fe44e"><span class="todo _note_">[note]</span> module system</h3>
<div class="outline-text-3" id="text-orgf3fe44e">
<ul class="org-ul">
<li><p>a module in jojo is a global name</p><p>stores a table of exported names,</p></li>

<li><p>while a module in file system is a dir of files,</p><p>with a module.jo in the dir,</p><p>to store meta data of the module.</p></li>

<li><p>every module has a version,</p><p><ul class="org-ul"></p><p><li><p>in jojo, the global name</p><p>should be "&lt;module-name&gt;/&lt;version&gt;"</p></li></p><p><li><p>in file system, the dir of a module</p><p>should be "&lt;module-name&gt;/&lt;version&gt;/*"</p></li></ul></p></li>

<li><p>a module will be installed to "~/.jojo"</p><p>as "~/.jojo/modules/&lt;module-name&gt;/&lt;version&gt;/*"</p></li>

<li><p>module system solves two problems :</p><p></p><p><ul class="org-ul"></p><p><li><p>re-load problem :</p><p>when used by multiple clients,</p><p>a module should only be loaded once.</p></li></p><p></p><p><li><p>unique-name problem :</p><p>a name must be resolved to an unique-name</p></li></ul></p></li></ul>
</div>
</div>

<div id="outline-container-org2ed307a" class="outline-3">
<h3 id="org2ed307a">(+module)</h3>
<div class="outline-text-3" id="text-org2ed307a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> +module
  dup <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-define-table-list
  <span style="color: #fd971f;">:define-table-list!</span>

  <span style="color: #a6e22e;">:define-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (+module) fail to merge define-table-list"</span> w nl
       <span style="color: #e6db74;">"  define-table-list : "</span> w <span style="color: #a6e22e;">:define-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:define-table!</span>

  <span style="color: #a6e22e;">:body</span> <span style="color: #a6e22e;">:name</span>
  module/generate-export-table
  <span style="color: #fd971f;">:export-table!</span>

  <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #a6e22e;">:export-table</span>
  module/export-check

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (+module) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #a6e22e;">:define-table</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
      <span style="color: #e6db74;">"- (+module) fail to merge import-table with define-table"</span> w nl
      <span style="color: #e6db74;">"  import-table : "</span> w <span style="color: #a6e22e;">:import-table</span> w nl
      <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
      <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
      <span style="color: #e6db74;">"  module name : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
  <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter

  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map

  sexp-list-compile

  <span style="color: #a6e22e;">:export-table</span>
  <span style="color: #a6e22e;">:name</span> name-bind<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a6ef64" class="outline-3">
<h3 id="org7a6ef64">expend-include</h3>
<div class="outline-text-3" id="text-org7a6ef64">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> expend-include <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> body<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> null?<span style="color: #797979;">]</span> null
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> cons? not<span style="color: #797979;">]</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.car</span> 'include eq?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #ae81ff;">.cdr</span> path-list-read-sexp-list
         <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         list-append<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #66d9ef; font-weight: bold;">recur</span> cons<span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf762e4" class="outline-3">
<h3 id="orgf762e4">path-list-read-sexp-list</h3>
<div class="outline-text-3" id="text-orgf762e4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-list-read-sexp-list
  <span style="color: #B380A8;">{</span>path-read-sexp-list<span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4bfc52" class="outline-3">
<h3 id="orgc4bfc52">path-read-sexp-list</h3>
<div class="outline-text-3" id="text-orgc4bfc52">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> path-read-sexp-list <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:path</span> path-&gt;reading-path <span style="color: #fd971f;">:real-path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:real-path</span> path-open-read<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #fd971f;">:file!</span> <span style="color: #a6e22e;">:file</span> file-input-stack
         input-stack-read-sexp-list
         <span style="color: #a6e22e;">:file</span> file-close<span style="color: #797979;">]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #797979;">[</span><span style="color: #fd971f;">:error-number!</span>
              <span style="color: #e6db74;">"- path-read-sexp-list fail"</span> w nl
              <span style="color: #e6db74;">"  path : "</span> w <span style="color: #a6e22e;">:path</span> w nl
              <span style="color: #e6db74;">"  real-path : "</span> w <span style="color: #a6e22e;">:real-path</span> w nl
              <span style="color: #e6db74;">"  "</span> w <span style="color: #a6e22e;">:error-number</span> error-number-print nl
              <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #797979;">]</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org36ece3" class="outline-3">
<h3 id="org36ece3">list-car-filter</h3>
<div class="outline-text-3" id="text-org36ece3">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> list-car-filter <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> list <span style="color: #a6e22e;">:pred</span> <span style="color: #66d9ef; font-weight: bold;">--</span> list<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:x!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:x</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
           <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:x</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:pred</span> apply<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6e3ac1" class="outline-3">
<h3 id="orga6e3ac1">module/generate-define-table-list</h3>
<div class="outline-text-3" id="text-orga6e3ac1">
</div><div id="outline-container-org7c85f64" class="outline-4">
<h4 id="org7c85f64">module/generate-define-table-list</h4>
<div class="outline-text-4" id="text-org7c85f64">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-define-table-list
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table list<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">list</span>
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-jojo-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-gene-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-disp-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-var-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-atom-table
    <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:name</span> module/generate-data-table<span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge83f23a" class="outline-4">
<h4 id="orge83f23a">module/plus-filter</h4>
<div class="outline-text-4" id="text-orge83f23a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/plus-filter
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:plus</span> <span style="color: #66d9ef; font-weight: bold;">--</span> name list<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:plus</span> eq?<span style="color: #B380A8;">}</span> list-car-filter
  <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span><span style="color: #B380A8;">}</span> list-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8595efb" class="outline-4">
<h4 id="org8595efb">module/name-list-&gt;table</h4>
<div class="outline-text-4" id="text-org8595efb">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/name-list-&gt;table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:name-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span>
   <span style="color: #a6e22e;">:module-name</span> ': jo-append <span style="color: #a6e22e;">:jo</span> jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org93d62cc" class="outline-4">
<h4 id="org93d62cc">module/generate-jojo-table</h4>
<div class="outline-text-4" id="text-org93d62cc">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-jojo-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+jojo module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c968d4" class="outline-4">
<h4 id="org7c968d4">module/generate-gene-table</h4>
<div class="outline-text-4" id="text-org7c968d4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-gene-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+gene module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc7f5dc" class="outline-4">
<h4 id="orgcc7f5dc">module/generate-disp-table</h4>
<div class="outline-text-4" id="text-orgcc7f5dc">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-disp-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+disp module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f02747" class="outline-4">
<h4 id="org2f02747">module/generate-var-table</h4>
<div class="outline-text-4" id="text-org2f02747">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-var-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+var module/plus-filter
  <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdfe4f9" class="outline-4">
<h4 id="orgdfe4f9">module/tag-list-&gt;table</h4>
<div class="outline-text-4" id="text-orgdfe4f9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span>
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   jo-&gt;tag-jo
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9d22b00" class="outline-4">
<h4 id="org9d22b00">module/tag-list-&gt;predicate-table</h4>
<div class="outline-text-4" id="text-org9d22b00">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;predicate-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo '? jo-append
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   '? jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3fb7f60" class="outline-4">
<h4 id="org3fb7f60">module/tag-list-&gt;constructor-table</h4>
<div class="outline-text-4" id="text-org3fb7f60">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/tag-list-&gt;constructor-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:tag-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo
   <span style="color: #a6e22e;">:module-name</span> ': jo-append
   <span style="color: #a6e22e;">:jo</span> tag-jo-&gt;jo jo-append
   cons-table<span style="color: #B380A8;">}</span>
  null-table swap list-foldr<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga78b2e9" class="outline-4">
<h4 id="orga78b2e9">module/generate-atom-table</h4>
<div class="outline-text-4" id="text-orga78b2e9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-atom-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+atom module/plus-filter <span style="color: #fd971f;">:tag-list!</span>
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;predicate-table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb6c7c96" class="outline-4">
<h4 id="orgb6c7c96">module/generate-data-table</h4>
<div class="outline-text-4" id="text-orgb6c7c96">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-data-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table table table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span> '+data module/plus-filter <span style="color: #fd971f;">:tag-list!</span>
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;predicate-table
  <span style="color: #a6e22e;">:tag-list</span> <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;constructor-table<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org296b40a" class="outline-3">
<h3 id="org296b40a">module/generate-export-table</h3>
<div class="outline-text-3" id="text-org296b40a">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-export-table
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:list</span>
  <span style="color: #B380A8;">{</span>'export eq?<span style="color: #B380A8;">}</span>
  list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span><span style="color: #B380A8;">}</span> list-map
  null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr
  <span style="color: #B380A8;">{</span>tag-jo? not<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:name-list!</span>

  <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table<span style="color: #696969;">)</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/generate-export-table
    <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:list</span> <span style="color: #a6e22e;">:module-name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
    <span style="color: #a6e22e;">:list</span>
    <span style="color: #B380A8;">{</span>'export eq?<span style="color: #B380A8;">}</span>
    list-car-filter <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span><span style="color: #B380A8;">}</span> list-map
    null <span style="color: #B380A8;">{</span>list-append<span style="color: #B380A8;">}</span> list-foldr

    dup <span style="color: #B380A8;">{</span>tag-jo?<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:tag-list!</span>
    <span style="color: #B380A8;">{</span>tag-jo? not<span style="color: #B380A8;">}</span> list-filter <span style="color: #fd971f;">:name-list!</span>

    <span style="color: #a6e22e;">:name-list</span> <span style="color: #a6e22e;">:module-name</span> module/name-list-&gt;table
    <span style="color: #a6e22e;">:tag-list</span>  <span style="color: #a6e22e;">:module-name</span> module/tag-list-&gt;table

    <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
        <span style="color: #e6db74;">"- (module/generate-export-table)"</span> w nl
        <span style="color: #e6db74;">"  fail to merge export tables"</span> w nl
        <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
        <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgddcffc9" class="outline-3">
<h3 id="orgddcffc9">module/export-check</h3>
<div class="outline-text-3" id="text-orgddcffc9">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/export-check
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:define-table</span> <span style="color: #a6e22e;">:export-table</span> table-contain? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/export-check fail"</span> w nl
  <span style="color: #e6db74;">"  define-table does not contain export-table"</span> w nl
  <span style="color: #e6db74;">"  define-table : "</span> w <span style="color: #a6e22e;">:define-table</span> w nl
  <span style="color: #e6db74;">"  export-table : "</span> w <span style="color: #a6e22e;">:export-table</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a65be8" class="outline-3">
<h3 id="org6a65be8">module/collect-import-table-list</h3>
<div class="outline-text-3" id="text-org6a65be8">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/collect-import-table-list
  <span style="color: #B380A8;">{</span>'import eq?<span style="color: #B380A8;">}</span> list-car-filter
  <span style="color: #B380A8;">{</span><span style="color: #ae81ff;">.cdr</span> module/import-one<span style="color: #B380A8;">}</span> list-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge263bb4" class="outline-3">
<h3 id="orge263bb4">module/import-one</h3>
<div class="outline-text-3" id="text-orge263bb4">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module/import-one <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> <span style="color: #ae81ff;">.car</span> <span style="color: #fd971f;">:name!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-loaded? not <span style="color: #66d9ef; font-weight: bold;">then</span>
      <span style="color: #a6e22e;">:name</span> module-load<span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> body-run <span style="color: #fd971f;">:result!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:result</span> table? <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:result</span> <span style="color: #66d9ef; font-weight: bold;">end</span><span style="color: #696969;">)</span>
  <span style="color: #e6db74;">"- module/import-one fail"</span> w nl
  <span style="color: #e6db74;">"  result of body is not table"</span> w nl
  <span style="color: #e6db74;">"  body : "</span> w <span style="color: #a6e22e;">:body</span> w nl
  <span style="color: #e6db74;">"  result : "</span> w <span style="color: #a6e22e;">:result</span> w nl
  <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5eeea5" class="outline-3">
<h3 id="orge5eeea5">sexp-for-module?</h3>
<div class="outline-text-3" id="text-orge5eeea5">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-for-module? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> export<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #fd971f;">:jo!</span> <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:sexp</span> cons? not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #66d9ef; font-weight: bold;">false</span>
            <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:jo</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> eq?<span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  list-any?<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4dde08" class="outline-3">
<h3 id="orgd4dde08">sexp-table-substitute</h3>
<div class="outline-text-3" id="text-orgd4dde08">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> sexp-table-substitute <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:sexp</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">--</span> sexp<span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> cons?<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.car</span> <span style="color: #a6e22e;">:table</span> <span style="color: #66d9ef; font-weight: bold;">recur</span>
         <span style="color: #a6e22e;">:sexp</span> <span style="color: #ae81ff;">.cdr</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
         cons<span style="color: #797979;">]</span>
        <span style="color: #797979;">[</span><span style="color: #a6e22e;">:table</span> <span style="color: #a6e22e;">:sexp</span> table-find<span style="color: #797979;">]</span> <span style="color: #797979;">[]</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #a6e22e;">:sexp</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec44469" class="outline-3">
<h3 id="orgec44469">module-loaded?</h3>
<div class="outline-text-3" id="text-orgec44469">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-loaded? <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> jo-bound?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:name</span> sexp-run table?
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4866ac6" class="outline-3">
<h3 id="org4866ac6">module-find-path</h3>
<div class="outline-text-3" id="text-org4866ac6">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path-from-dir
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:dir</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:dir</span> <span style="color: #e6db74;">"/modules/"</span> string-append
  <span style="color: #a6e22e;">:name</span> jo-&gt;string string-append
  <span style="color: #e6db74;">"/module.jo"</span> string-append <span style="color: #fd971f;">:path!</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:path</span> path-readable?
      <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #a6e22e;">:path</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
      <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>

<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-find-path
  <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> path <span style="color: #66d9ef; font-weight: bold;">true</span> or <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span> <span style="color: #797979;">[</span>current-running-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>usr-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #797979;">[</span>sys-jojo-dir <span style="color: #a6e22e;">:name</span> module-find-path-from-dir<span style="color: #797979;">]</span> <span style="color: #66d9ef; font-weight: bold;">true</span>
        <span style="color: #66d9ef; font-weight: bold;">else</span> <span style="color: #66d9ef; font-weight: bold;">false</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org339c4ae" class="outline-3">
<h3 id="org339c4ae">module-load</h3>
<div class="outline-text-3" id="text-org339c4ae">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> module-load <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> <span style="color: #a6e22e;">:name</span> module-find-path
      <span style="color: #66d9ef; font-weight: bold;">then</span> path-load
      <span style="color: #66d9ef; font-weight: bold;">else</span>
      <span style="color: #e6db74;">"- module-load fail"</span> w nl
      <span style="color: #e6db74;">"  can not find module : "</span> w <span style="color: #a6e22e;">:name</span> w nl
      <span style="color: #e6db74;">"  current-reading-dir : "</span> w current-reading-dir w nl
      <span style="color: #e6db74;">"  usr-jojo-dir : "</span> w usr-jojo-dir w nl
      <span style="color: #e6db74;">"  sys-jojo-dir : "</span> w sys-jojo-dir w nl
      <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8852230" class="outline-3">
<h3 id="org8852230">(run)</h3>
<div class="outline-text-3" id="text-org8852230">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> run <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:body</span> <span style="color: #66d9ef; font-weight: bold;">--</span><span style="color: #696969;">)</span>
  <span style="color: #a6e22e;">:body</span> expend-include <span style="color: #fd971f;">:body!</span>

  <span style="color: #a6e22e;">:body</span> module/collect-import-table-list
  <span style="color: #fd971f;">:import-table-list!</span>

  <span style="color: #a6e22e;">:import-table-list</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> table-merge not <span style="color: #66d9ef; font-weight: bold;">then</span> <span style="color: #fd971f;">:key!</span>
       <span style="color: #e6db74;">"- (run) fail to merge import-table-list"</span> w nl
       <span style="color: #e6db74;">"  import-table-list : "</span> w <span style="color: #a6e22e;">:import-table-list</span> w nl
       <span style="color: #e6db74;">"  key : "</span> w <span style="color: #a6e22e;">:key</span> w nl
       <span style="color: #66d9ef; font-weight: bold;">debug</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span>
  null-table swap list-foldr <span style="color: #fd971f;">:import-table!</span>

  <span style="color: #a6e22e;">:import-table</span> <span style="color: #fd971f;">:rename-table!</span>

  <span style="color: #a6e22e;">:body</span>
  <span style="color: #B380A8;">{</span>sexp-for-module? not<span style="color: #B380A8;">}</span> list-filter
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:rename-table</span> sexp-table-substitute<span style="color: #B380A8;">}</span> list-map
  body-run<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcebdd70" class="outline-3">
<h3 id="orgcebdd70"><span class="todo _note_">[note]</span> table processing in module system</h3>
<div class="outline-text-3" id="text-orgcebdd70">
<ul class="org-ul">
<li><p><p></p><p>we can use table processing functions</p><p>to handle the name unique-name binding</p><p></p></p><p></p><p><div class="org-src-container"></p><p></p><p><pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> take r7rs import declaration for example</p><p>  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">import</span> <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span><span style="color: #696969;">)</span></p><p>  where <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span></p><p>  = <span style="color: #66d9ef; font-weight: bold;">&lt;library-name&gt;</span></p><p>  | <span style="color: #696969;">(</span>only <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>except <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>prefix <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;identifier&gt;</span><span style="color: #696969;">)</span></p><p>  | <span style="color: #696969;">(</span>rename <span style="color: #66d9ef; font-weight: bold;">&lt;import-set&gt;</span> <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;old-identifier&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new-identifier&gt;</span><span style="color: #696969;">)</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> <span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> in jojo we can use table processing functions like :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> rename<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> but these names are too general</p><p>  for table processing functions</p><p>  we use the following instead :</p><p>  only  <span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq?<span style="color: #B380A8;">}</span> table-key-filter</p><p>  except<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> eq? not<span style="color: #B380A8;">}</span> table-key-filter</p><p>  prefix<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> swap jo-append<span style="color: #B380A8;">}</span> table-key-map</p><p>  rename<span style="color: #FFA23D;"> : </span><span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">if</span> dup <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> eq? <span style="color: #66d9ef; font-weight: bold;">then</span> drop <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span> <span style="color: #66d9ef; font-weight: bold;">else</span><span style="color: #696969;">)</span><span style="color: #B380A8;">}</span> table-key-map<span style="color: #696969;">)</span></p><p></p><p><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">note</span> we can abstract those special use of</p><p>  table processing functions :</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-only</p><p>  '<span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">&lt;name&gt;</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-except</p><p>  <span style="color: #66d9ef; font-weight: bold;">&lt;prefix&gt;</span> import-prefix</p><p>  '<span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">table</span> <span style="color: #66d9ef; font-weight: bold;">&lt;old&gt;</span> <span style="color: #66d9ef; font-weight: bold;">&lt;new&gt;</span><span style="color: #f92672; font-weight: bold;">,</span> <span style="color: #ae81ff;">...</span><span style="color: #696969;">)</span> import-rename<span style="color: #696969;">)</span></p><p></pre></p><p></div></p></li></ul>
</div>
</div>

<div id="outline-container-orgdd95a33" class="outline-3">
<h3 id="orgdd95a33">import-only</h3>
<div class="outline-text-3" id="text-orgdd95a33">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-only <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq?<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1191c95" class="outline-3">
<h3 id="org1191c95">import-except</h3>
<div class="outline-text-3" id="text-org1191c95">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-except <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:list</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> <span style="color: #a6e22e;">:name</span> <span style="color: #66d9ef; font-weight: bold;">--</span> <span style="color: #66d9ef; font-weight: bold;">&lt;bool&gt;</span><span style="color: #696969;">)</span>
   <span style="color: #a6e22e;">:list</span> <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:name</span> eq? not<span style="color: #B380A8;">}</span> list-any?<span style="color: #B380A8;">}</span>
  table-key-filter<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ff13df" class="outline-3">
<h3 id="org5ff13df">import-prefix</h3>
<div class="outline-text-3" id="text-org5ff13df">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-prefix <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:prefix-jo</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:prefix-jo</span> swap jo-append<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge7efa40" class="outline-3">
<h3 id="orge7efa40">import-rename</h3>
<div class="outline-text-3" id="text-orge7efa40">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> import-rename <span style="color: #696969;">(</span><span style="color: #66d9ef; font-weight: bold;">-&gt;</span> table <span style="color: #a6e22e;">:renaming</span> <span style="color: #66d9ef; font-weight: bold;">--</span> table<span style="color: #696969;">)</span>
  <span style="color: #B380A8;">{</span><span style="color: #a6e22e;">:renaming</span> sexp-table-substitute<span style="color: #B380A8;">}</span>
  table-key-map<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge3516c0" class="outline-2">
<h2 id="orge3516c0">the-story-begin</h2>
<div class="outline-text-2" id="text-orge3516c0">
</div><div id="outline-container-org46f010f" class="outline-3">
<h3 id="org46f010f">welcome-to-jojo</h3>
<div class="outline-text-3" id="text-org46f010f">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> welcome-to-jojo
  <span style="color: #e6db74;">"welcome to jojo's programming adventure ^-^/"</span> w nl<span style="color: #696969;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e54e93" class="outline-3">
<h3 id="org6e54e93">the-story-begin</h3>
<div class="outline-text-3" id="text-org6e54e93">
<div class="org-src-container">

<pre class="src src-jojo"><span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">+jojo</span> the-story-begin
  <span style="color: #696969;">(</span><span style="color: #f92672; font-weight: bold;">cond</span>
    <span style="color: #797979;">[</span>cmd-number <span style="color: #ae81ff;">1</span> eq?<span style="color: #797979;">]</span>
    <span style="color: #797979;">[</span>core-flag-off
     test-flag-off
     repl-flag-on
     welcome-to-jojo
     print-data-stack
     terminal-input-stack repl<span style="color: #797979;">]</span>

    <span style="color: #66d9ef; font-weight: bold;">else</span>
    <span style="color: #797979;">[</span>core-flag-off
     test-flag-off
     repl-flag-off
     cmd-list <span style="color: #ae81ff;">.cdr</span> <span style="color: #ae81ff;">.car</span> path-load<span style="color: #797979;">]</span><span style="color: #696969;">))</span>

the-story-begin
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: xieyuheng</p>
<p class="date">Created: 2017-09-24 Sun 09:17</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
